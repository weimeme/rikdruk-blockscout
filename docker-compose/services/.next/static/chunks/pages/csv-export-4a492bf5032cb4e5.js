(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3751,4150],{65629:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/csv-export",function(){return a(74830)}])},53599:function(e,t,a){"use strict";function downloadBlob(e,t){let a=URL.createObjectURL(e),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download",t),r.click(),r.remove(),URL.revokeObjectURL(a)}a.d(t,{Z:function(){return downloadBlob}})},58262:function(e,t,a){"use strict";function throwOnAbsentParamError(e){if(!e)throw Error("Required param not provided",{cause:{status:404}})}a.d(t,{Z:function(){return throwOnAbsentParamError}})},38117:function(e,t,a){"use strict";a.d(t,{W:function(){return r},Z:function(){return throwOnResourceLoadError}});let r="Resource load error";function throwOnResourceLoadError(e){let{isError:t,error:a,resource:n}=e;if(t)throw Error(r,{cause:{...a,resource:n}})}},98393:function(e,t,a){"use strict";a.d(t,{R:function(){return generate},V:function(){return update}});var r=a(44831);function compileValue(e,t){return e.replaceAll(/%(\w+)%/g,(e,a)=>{let r=t[a];return Array.isArray(r)?r.join(", "):void 0===r?"":r})}let n={"/":"Homepage","/txs":"Root page","/txs/kettle/[hash]":"Regular page","/tx/[hash]":"Regular page","/blocks":"Root page","/block/[height_or_hash]":"Regular page","/accounts":"Root page","/address/[hash]":"Regular page","/verified-contracts":"Root page","/contract-verification":"Root page","/address/[hash]/contract-verification":"Regular page","/tokens":"Root page","/token/[hash]":"Regular page","/token/[hash]/instance/[id]":"Regular page","/apps":"Root page","/apps/[id]":"Regular page","/stats":"Root page","/api-docs":"Regular page","/graphiql":"Regular page","/search-results":"Regular page","/auth/profile":"Root page","/account/watchlist":"Regular page","/account/api-key":"Regular page","/account/custom-abi":"Regular page","/account/public-tags-request":"Regular page","/account/tag-address":"Regular page","/account/verified-addresses":"Root page","/withdrawals":"Root page","/visualize/sol2uml":"Regular page","/csv-export":"Regular page","/l2-deposits":"Root page","/l2-output-roots":"Root page","/l2-txn-batches":"Root page","/l2-withdrawals":"Root page","/zkevm-l2-txn-batches":"Root page","/zkevm-l2-txn-batch/[number]":"Regular page","/404":"Regular page","/name-domains":"Root page","/name-domains/[name]":"Regular page","/login":"Regular page","/api/media-type":"Regular page","/api/proxy":"Regular page","/api/csrf":"Regular page","/api/healthz":"Regular page","/auth/auth0":"Regular page","/auth/unverified-email":"Regular page"},o={"/":"blockchain explorer","/txs":"transactions","/txs/kettle/[hash]":"kettle %hash% transactions","/tx/[hash]":"transaction %hash%","/blocks":"blocks","/block/[height_or_hash]":"block %height_or_hash%","/accounts":"top accounts","/address/[hash]":"address details for %hash%","/verified-contracts":"verified contracts","/contract-verification":"verify contract","/address/[hash]/contract-verification":"contract verification for %hash%","/tokens":"tokens","/token/[hash]":"%symbol% token details","/token/[hash]/instance/[id]":"token instance for %symbol%","/apps":"apps marketplace","/apps/[id]":"- %app_name%","/stats":"statistics","/api-docs":"REST API","/graphiql":"GraphQL","/search-results":"search result for %q%","/auth/profile":"- my profile","/account/watchlist":"- watchlist","/account/api-key":"- API keys","/account/custom-abi":"- custom ABI","/account/public-tags-request":"- public tag requests","/account/tag-address":"- private tags","/account/verified-addresses":"- my verified addresses","/withdrawals":"withdrawals","/visualize/sol2uml":"Solidity UML diagram","/csv-export":"export data to CSV","/l2-deposits":"deposits (L1 > L2)","/l2-output-roots":"output roots","/l2-txn-batches":"tx batches (L2 blocks)","/l2-withdrawals":"withdrawals (L2 > L1)","/zkevm-l2-txn-batches":"zkEvm L2 Tx batches","/zkevm-l2-txn-batch/[number]":"zkEvm L2 Tx batch %number%","/404":"error - page not found","/name-domains":"domains search and resolve","/name-domains/[name]":"%name% domain details","/login":"login","/api/media-type":"node API media type","/api/proxy":"node API proxy","/api/csrf":"node API CSRF token","/api/healthz":"node API health check","/auth/auth0":"authentication","/auth/unverified-email":"unverified email"},s="Blockscout is the #1 open-source blockchain explorer available today. 100+ chains and counting rely on Blockscout data availability, APIs, and ecosystem tools to support their networks.",i={"/":s,"/txs":s,"/txs/kettle/[hash]":s,"/tx/[hash]":"View transaction %hash% on %network_title%","/blocks":s,"/block/[height_or_hash]":"View the transactions, token transfers, and uncles for block %height_or_hash%","/accounts":s,"/address/[hash]":"View the account balance, transactions, and other data for %hash% on the %network_title%","/verified-contracts":s,"/contract-verification":s,"/address/[hash]/contract-verification":"View the account balance, transactions, and other data for %hash% on the %network_title%","/tokens":s,"/token/[hash]":"%hash%, balances and analytics on the %network_title%","/token/[hash]/instance/[id]":"%hash%, balances and analytics on the %network_title%","/apps":s,"/apps/[id]":s,"/stats":s,"/api-docs":s,"/graphiql":s,"/search-results":s,"/auth/profile":s,"/account/watchlist":s,"/account/api-key":s,"/account/custom-abi":s,"/account/public-tags-request":s,"/account/tag-address":s,"/account/verified-addresses":s,"/withdrawals":s,"/visualize/sol2uml":s,"/csv-export":s,"/l2-deposits":s,"/l2-output-roots":s,"/l2-txn-batches":s,"/l2-withdrawals":s,"/zkevm-l2-txn-batches":s,"/zkevm-l2-txn-batch/[number]":s,"/404":s,"/name-domains":s,"/name-domains/[name]":s,"/login":s,"/api/media-type":s,"/api/proxy":s,"/api/csrf":s,"/api/healthz":s,"/auth/auth0":s,"/auth/unverified-email":s};function generate(e,t){let a={...e.query,...t,network_name:r.Z.chain.name,network_title:r.Z.chain.name+(r.Z.chain.shortName?" (".concat(r.Z.chain.shortName,")"):"")+" Explorer"},s=compileValue(function(e){let t=o[e];return"%network_name% ".concat(t)}(e.pathname),a),l=s?s+(r.Z.meta.promoteBlockscoutInTitle?" | Blockscout":""):"",c=compileValue(function(e){let t=i[e];return null!=t?t:""}(e.pathname),a),u=n[e.pathname];return{title:l,description:c,opengraph:{title:l,description:"Regular page"!==u?r.Z.meta.og.description:"",imageUrl:"Regular page"!==u?r.Z.meta.og.imageUrl:""}}}function update(e,t){var a;let{title:r,description:n}=generate(e,t);window.document.title=r,null===(a=window.document.querySelector('meta[name="description"]'))||void 0===a||a.setAttribute("content",n)}},83265:function(e,t,a){"use strict";a.d(t,{Z:function(){return R}});var r=a(85893),n=a(9008),o=a.n(n),s=a(67294),i=a(21260),l=a(67894),c=a(5646),u=a(64487),d=a(83757),p=a(74517),h=a(91228),m=a(36217),f=a(89321),g=a(98393),x=a(85786),b=a(47598),v=a(30631),k=a(44831),w=a(38117);let y=k.Z.features.sentry,_=(()=>{if(!y.isEnabled)return;let e=(()=>{switch(y.environment){case"development":return 1;case"staging":return .75;case"production":return .2}})();return{environment:y.environment,dsn:y.dsn,release:y.release,enableTracing:y.enableTracing,tracesSampleRate:e,integrations:y.enableTracing?[new v.gE]:void 0,ignoreErrors:["top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage","Script error.","The quota has been exceeded","Attempt to connect to relay via","WebSocket connection failed for URL: wss://relay.walletconnect.com",w.W],denyUrls:[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/eatdifferent\.com\.woopra-ns\.com/i,/static\.woopra\.com\/js\/woopra\.js/i,/extensions\//i,/^chrome:\/\//i,/^chrome-extension:\/\//i,/^moz-extension:\/\//i,/127\.0\.0\.1:4001\/isrunning/i,/webappstoolbarba\.texthelp\.com\//i,/metrics\.itunes\.apple\.com\.edgesuite\.net\//i,/czilladx\.com/i,/coinzilla\.com/i,/coinzilla\.io/i,/slise\.xyz/i]}})();_&&(b.S(_),u.e(function(e){y.isEnabled&&e.setTag("app_instance",y.instance)}));var R=s.memo(e=>{let{title:t,description:a,opengraph:n}=g.R(e);!function(){let e=(0,f.Z)();(0,d.a)({queryKey:(0,m.$)("csrf"),queryFn:async()=>{if(!(0,h.Z)()){let e=(0,p.Z)("csrf"),t=await fetch(e,{credentials:"include"}),a=t.headers.get("x-bs-account-csrf");if(!a){u.Tb(Error("Client fetch failed"),{tags:{source:"fetch","source.resource":"csrf","status.code":500,"status.text":"Unable to obtain csrf token from header"}});return}return{token:a}}return e("/node-api/csrf")},enabled:!!l.U2(l.aL.API_TOKEN)})}(),function(){let e=l.U2(l.aL.ADBLOCK_DETECTED,(0,i.b)().cookies);(0,s.useEffect)(()=>{(0,c.Z)()&&!e&&fetch("https://request-global.czilladx.com",{method:"HEAD",mode:"no-cors",cache:"no-store"}).catch(()=>{l.t8(l.aL.ADBLOCK_DETECTED,"true",{expires:1})})},[])}();let b=x.Dp();return x.fS(b),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:t}),(0,r.jsx)("meta",{name:"description",content:a}),(0,r.jsx)("meta",{property:"og:title",content:n.title}),n.description&&(0,r.jsx)("meta",{property:"og:description",content:n.description}),(0,r.jsx)("meta",{property:"og:image",content:n.imageUrl}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{property:"twitter:image",content:n.imageUrl}),(0,r.jsx)("meta",{property:"og:type",content:"website"})]}),e.children]})})},74830:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return D},default:function(){return csv_export}});var r=a(85893),n=a(67294),o=a(83265),s=a(204),i=a(11163),l=a(40146),c=a(36217),u=a(21260),d=a(58262),p=a(38117),h=a(55036),m=a(14853),f=a(75350),g=a(96272),x=a(87536),b=a(74517),v=a(4914),k=a(53599),w=a(58586),y=a(70654),_=a(28129),R=a(48403),j=a.n(R),E=a(14072),C=n.memo(e=>{let{formApi:t,name:a}=e,{formState:o,control:s,getValues:i,trigger:l}=t,c=n.useCallback(e=>{let{field:t}=e,a=t.name in o.errors?o.errors[t.name]:void 0;return(0,r.jsxs)(y.NI,{variant:"floating",id:t.name,isRequired:!0,size:{base:"md",lg:"lg"},maxW:{base:"auto",lg:"220px"},children:[(0,r.jsx)(_.I,{...t,required:!0,isInvalid:!!a,type:"date",isDisabled:o.isSubmitting,autoComplete:"off",max:(0,v.Z)().format("YYYY-MM-DD")}),(0,r.jsx)(E.Z,{text:j()(t.name),error:a})]})},[o.errors,o.isSubmitting]),u=n.useCallback(e=>{if("from"===a){let t=i("to");if(t&&(0,v.Z)(e)>(0,v.Z)(t))return"Incorrect date";o.errors.to&&l("to")}else{let t=i("from");if(t&&(0,v.Z)(t)>(0,v.Z)(e))return"Incorrect date";o.errors.from&&l("from")}},[o.errors.from,o.errors.to,i,a,l]);return(0,r.jsx)(x.Qr,{name:a,control:s,render:c,rules:{required:!0,validate:u}})}),Z=a(31507),L=a(34853),S=a(44831),csvExport_CsvExportFormReCaptcha=e=>{let{formApi:t}=e,a=n.useRef(null);n.useEffect(()=>(t.register("reCaptcha",{required:!0,shouldUnregister:!0}),()=>{t.unregister("reCaptcha")}),[]),n.useEffect(()=>{var e;null===(e=a.current)||void 0===e||e.reset(),t.trigger("reCaptcha")},[t.formState.submitCount]);let o=n.useCallback(e=>{e&&(t.clearErrors("reCaptcha"),t.setValue("reCaptcha",e,{shouldValidate:!0}))},[t]),s=n.useCallback(()=>{t.resetField("reCaptcha"),t.setError("reCaptcha",{type:"required"})},[t]),i=S.Z.features.csvExport;return i.isEnabled?(0,r.jsx)(L.Z,{className:"recaptcha",ref:a,sitekey:i.reCaptcha.siteKey,onChange:o,onExpired:s}):(0,r.jsx)(Z.b,{status:"error",children:"CSV export is not available at the moment since reCaptcha is not configured for this application. Please contact the service maintainer to make necessary changes in the service configuration."})},T=n.memo(e=>{let{hash:t,resource:a,filterType:o,filterValue:i,fileNameTemplate:l}=e,c=(0,x.cI)({mode:"onBlur",defaultValues:{from:(0,v.Z)().subtract(1,"day").format("YYYY-MM-DD"),to:(0,v.Z)().format("YYYY-MM-DD")}}),{handleSubmit:u,formState:d}=c,p=(0,w.Z)(),h=n.useCallback(async e=>{try{let r=(0,b.Z)(a,void 0,{address_id:t,from_period:e.from,to_period:e.to,filter_type:o,filter_value:i,recaptcha_response:e.reCaptcha}),n=await fetch(r,{headers:{"content-type":"application/octet-stream"}});if(!n.ok)throw Error();let s=await n.blob();(0,k.Z)(s,"".concat(l,"_").concat(t,"_").concat(e.from,"_").concat(e.to,"\n        ").concat(o&&i?"_with_filter_type_"+o+"_value_"+i:"",".csv"))}catch(e){p({position:"top-right",title:"Error",description:(null==e?void 0:e.message)||"Something went wrong. Try again later.",status:"error",variant:"subtle",isClosable:!0})}},[l,t,a,o,i,p]);return(0,r.jsx)(x.RV,{...c,children:(0,r.jsxs)(f.m.form,{noValidate:!0,onSubmit:u(h),children:[(0,r.jsxs)(s.k,{columnGap:5,rowGap:3,flexDir:{base:"column",lg:"row"},alignItems:{base:"flex-start",lg:"center"},flexWrap:"wrap",children:[(0,r.jsx)(C,{name:"from",formApi:c}),(0,r.jsx)(C,{name:"to",formApi:c}),(0,r.jsx)(csvExport_CsvExportFormReCaptcha,{formApi:c})]}),(0,r.jsx)(g.z,{variant:"solid",size:"lg",type:"submit",mt:8,isLoading:d.isSubmitting,loadingText:"Download",isDisabled:!d.isValid,children:"Download"})]})})}),A=a(35202),z=a(26287),q=a(56048);let V={transactions:{text:"transactions",resource:"csv_export_txs",fileNameTemplate:"transactions",filterType:"address",filterValues:l.k},"internal-transactions":{text:"internal transactions",resource:"csv_export_internal_txs",fileNameTemplate:"internal_transactions",filterType:"address",filterValues:l.k},"token-transfers":{text:"token transfers",resource:"csv_export_token_transfers",fileNameTemplate:"token_transfers",filterType:"address",filterValues:l.k},logs:{text:"logs",resource:"csv_export_logs",fileNameTemplate:"logs",filterType:"topic"}},isCorrectExportType=e=>Object.keys(V).includes(e);var pages_CsvExport=()=>{var e,t,a,o,l;let f=(0,i.useRouter)(),g=(0,u.b)(),x=(0,h.Z)(),b=(null===(e=f.query.address)||void 0===e?void 0:e.toString())||"",v=(null===(t=f.query.type)||void 0===t?void 0:t.toString())||"",k=isCorrectExportType(v)?V[v]:null,w=(null===(a=f.query.filterType)||void 0===a?void 0:a.toString())||null,y=null===(o=f.query.filterValue)||void 0===o?void 0:o.toString(),_=(0,c.Z)("address",{pathParams:{hash:b},queryOptions:{enabled:!!b}}),R=n.useMemo(()=>{let e=g.referrer&&g.referrer.includes("/address");if(e)return{label:"Back to address",url:g.referrer}},[g.referrer]);if((0,d.Z)(b),(0,d.Z)(k),!k)return null;let j=w===k.filterType?w:null,E=j&&y&&(!k.filterValues||(null===(l=k.filterValues)||void 0===l?void 0:l.includes(y)))?y:null,C=((0,p.Z)(_),_.isPending)?(0,r.jsx)(A.Z,{}):(0,r.jsx)(T,{hash:b,resource:k.resource,filterType:j,filterValue:E,fileNameTemplate:k.fileNameTemplate});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.Z,{title:"Export data to CSV file",backLink:R}),(0,r.jsxs)(s.k,{mb:10,whiteSpace:"pre-wrap",flexWrap:"wrap",children:[(0,r.jsxs)("span",{children:["Export ",k.text," for address "]}),(0,r.jsx)(z.ZP,{address:{hash:b,is_contract:!0,implementation_name:null},truncation:x?"constant":"dynamic",noCopy:!0}),(0,r.jsx)("span",{children:m.vk}),j&&E&&(0,r.jsxs)("span",{children:["with applied filter by ",j," (",E,") "]}),(0,r.jsx)("span",{children:"to CSV file. "}),(0,r.jsxs)("span",{children:["Exports are limited to the last 10K ",k.text,"."]})]}),C]})},D=!0,csv_export=()=>(0,r.jsx)(o.Z,{pathname:"/csv-export",children:(0,r.jsx)(pages_CsvExport,{})})},40146:function(e,t,a){"use strict";a.d(t,{k:function(){return r}});let r=["from","to"]},14072:function(e,t,a){"use strict";var r=a(85893),n=a(96177),o=a(75350);a(67294),t.Z=(0,o.m)(e=>{let{text:t,icon:a,error:s,className:i,isFancy:l,isInModal:c}=e,u=null==s?void 0:s.message;return u||(null==s?void 0:s.type)!=="pattern"||(u="Invalid format"),(0,r.jsxs)(n.l,{className:i,alignItems:"center",...l?{"data-fancy":!0}:{},...c?{"data-in-modal":!0}:{},children:[a,(0,r.jsx)(o.m.span,{children:t}),u&&(0,r.jsxs)(o.m.span,{order:3,whiteSpace:"pre",children:[" - ",u]})]})})},56048:function(e,t,a){"use strict";var r=a(85893),n=a(93344),o=a(47523),s=a(33838),i=a(62723),l=a(204),c=a(14418),u=a(75350),d=a(23279),p=a.n(d),h=a(67294),m=a(55036),f=a(32770),g=a(96026),x=a(76215);let BackLink=e=>{if(!e)return null;if(e.isLoading)return(0,r.jsx)(n.O,{boxSize:6,display:"inline-block",borderRadius:"base",mr:3,my:2,verticalAlign:"text-bottom",isLoaded:!e.isLoading});let t=(0,r.jsx)(g.Z,{name:"arrows/east",boxSize:6,transform:"rotate(180deg)",margin:"auto",color:"gray.400"});return"url"in e?(0,r.jsx)(o.u,{label:e.label,children:(0,r.jsx)(x.Z,{display:"inline-flex",href:e.url,h:"40px",mr:3,children:t})}):(0,r.jsx)(o.u,{label:e.label,children:(0,r.jsx)(s.r,{display:"inline-flex",onClick:e.onClick,h:"40px",mr:3,children:t})})};t.Z=(0,u.m)(e=>{let{title:t,contentAfter:a,withTextAd:s,backLink:u,className:d,isLoading:g,afterTitle:x,beforeTitle:b,secondRow:v}=e,k=(0,i.q)(),w=(0,m.Z)(),[y,_]=h.useState(!1),R=h.useRef(null),j=h.useRef(null),E=h.useCallback(()=>{if(!R.current||!j.current)return;let e=R.current.getBoundingClientRect(),t=j.current.getBoundingClientRect();2*e.height<=t.height?_(!0):_(!1)},[]);return h.useEffect(()=>{g||E()},[g,E]),h.useEffect(()=>{let e=p()(E,1e3);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[E]),(0,r.jsxs)(l.k,{className:d,flexDir:"column",rowGap:3,mb:6,children:[(0,r.jsxs)(l.k,{flexDir:"row",flexWrap:"wrap",rowGap:3,columnGap:3,alignItems:"center",children:[(0,r.jsxs)(l.k,{h:{base:"auto",lg:g?10:"auto"},maxW:"100%",alignItems:"center",children:[u&&(0,r.jsx)(BackLink,{...u,isLoading:g}),b,(0,r.jsx)(n.O,{isLoaded:!g,overflow:"hidden",children:(0,r.jsx)(o.u,{label:t,isOpen:k.isOpen,onClose:k.onClose,maxW:{base:"calc(100vw - 32px)",lg:"500px"},closeOnScroll:!!w,isDisabled:!y,children:(0,r.jsx)(c.X,{ref:R,as:"h1",size:"lg",whiteSpace:"normal",wordBreak:"break-all",style:{WebkitLineClamp:1,WebkitBoxOrient:"vertical",display:"-webkit-box"},overflow:"hidden",textOverflow:"ellipsis",onMouseEnter:k.onOpen,onMouseLeave:k.onClose,onClick:w?k.onToggle:void 0,children:(0,r.jsx)("span",{ref:j,children:t})})})}),x]}),a,s&&(0,r.jsx)(f.Z,{order:{base:-1,lg:100},mb:{base:6,lg:0},ml:"auto",w:{base:"100%",lg:"auto"}})]}),v&&(0,r.jsx)(l.k,{alignItems:"center",minH:10,overflow:"hidden",children:v})]})})}},function(e){e.O(0,[5481,5521,9774,2888,179],function(){return e(e.s=65629)}),_N_E=e.O()}]);
//# sourceMappingURL=csv-export-4a492bf5032cb4e5.js.map