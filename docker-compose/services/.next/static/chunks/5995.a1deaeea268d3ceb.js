"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5995],{71520:function(e,t,i){function forEachState(e,t){let i=[],n=e;for(;null==n?void 0:n.kind;)i.push(n),n=n.prevState;for(let e=i.length-1;e>=0;e--)t(i[e])}i.d(t,{f:function(){return forEachState}}),(0,Object.defineProperty)(forEachState,"name",{value:"forEachState",configurable:!0})},85995:function(e,t,i){i.r(t);var n=i(97480),l=i(93058),r=i(3801),a=i(71520);i(59361),i(67294),i(73935);var o=Object.defineProperty,__name=(e,t)=>o(e,"name",{value:t,configurable:!0});function hintList(e,t,i){let n=filterAndSortList(i,normalizeText(t.string));if(!n)return;let l=null!==t.type&&/"|\w/.test(t.string[0])?t.start:t.end;return{list:n,from:{line:e.line,ch:l},to:{line:e.line,ch:t.end}}}function filterAndSortList(e,t){if(!t)return filterNonEmpty(e,e=>!e.isDeprecated);let i=e.map(e=>({proximity:getProximity(normalizeText(e.text),t),entry:e})),n=filterNonEmpty(filterNonEmpty(i,e=>e.proximity<=2),e=>!e.entry.isDeprecated),l=n.sort((e,t)=>(e.entry.isDeprecated?1:0)-(t.entry.isDeprecated?1:0)||e.proximity-t.proximity||e.entry.text.length-t.entry.text.length);return l.map(e=>e.entry)}function filterNonEmpty(e,t){let i=e.filter(t);return 0===i.length?e:i}function normalizeText(e){return e.toLowerCase().replace(/\W/g,"")}function getProximity(e,t){let i=lexicalDistance(t,e);return e.length>t.length&&(i-=e.length-t.length-1,i+=0===e.indexOf(t)?0:.5),i}function lexicalDistance(e,t){let i,n;let l=[],r=e.length,a=t.length;for(i=0;i<=r;i++)l[i]=[i];for(n=1;n<=a;n++)l[0][n]=n;for(i=1;i<=r;i++)for(n=1;n<=a;n++){let r=e[i-1]===t[n-1]?0:1;l[i][n]=Math.min(l[i-1][n]+1,l[i][n-1]+1,l[i-1][n-1]+r),i>1&&n>1&&e[i-1]===t[n-2]&&e[i-2]===t[n-1]&&(l[i][n]=Math.min(l[i][n],l[i-2][n-2]+r))}return l[r][a]}function getVariablesHint(e,t,i){let n="Invalid"===t.state.kind?t.state.prevState:t.state,a=n.kind,o=n.step;if("Document"===a&&0===o)return hintList(e,t,[{text:"{"}]);let s=i.variableToType;if(!s)return;let f=getTypeInfo(s,t.state);if("Document"===a||"Variable"===a&&0===o){let i=Object.keys(s);return hintList(e,t,i.map(e=>({text:`"${e}": `,type:s[e]})))}if(("ObjectValue"===a||"ObjectField"===a&&0===o)&&f.fields){let i=Object.keys(f.fields).map(e=>f.fields[e]);return hintList(e,t,i.map(e=>({text:`"${e.name}": `,type:e.type,description:e.description})))}if("StringValue"===a||"NumberValue"===a||"BooleanValue"===a||"NullValue"===a||"ListValue"===a&&1===o||"ObjectField"===a&&2===o||"Variable"===a&&2===o){let i=f.type?(0,l.xC)(f.type):void 0;if(i instanceof l.sR)return hintList(e,t,[{text:"{"}]);if(i instanceof l.mR){let n=i.getValues();return hintList(e,t,n.map(e=>({text:`"${e.name}"`,type:i,description:e.description})))}if(i===r.EZ)return hintList(e,t,[{text:"true",type:r.EZ,description:"Not false."},{text:"false",type:r.EZ,description:"Not true."}])}}function getTypeInfo(e,t){let i={type:null,fields:null};return(0,a.f)(t,t=>{if("Variable"===t.kind)i.type=e[t.name];else if("ListValue"===t.kind){let e=i.type?(0,l.tf)(i.type):void 0;i.type=e instanceof l.p2?e.ofType:null}else if("ObjectValue"===t.kind){let e=i.type?(0,l.xC)(i.type):void 0;i.fields=e instanceof l.sR?e.getFields():null}else if("ObjectField"===t.kind){let e=t.name&&i.fields?i.fields[t.name]:null;i.type=null==e?void 0:e.type}}),i}__name(hintList,"hintList"),__name(filterAndSortList,"filterAndSortList"),__name(filterNonEmpty,"filterNonEmpty"),__name(normalizeText,"normalizeText"),__name(getProximity,"getProximity"),__name(lexicalDistance,"lexicalDistance"),n.C.registerHelper("hint","graphql-variables",(e,t)=>{let i=e.getCursor(),l=e.getTokenAt(i),r=getVariablesHint(i,l,t);return(null==r?void 0:r.list)&&r.list.length>0&&(r.from=n.C.Pos(r.from.line,r.from.ch),r.to=n.C.Pos(r.to.line,r.to.ch),n.C.signal(e,"hasCompletion",e,r,l)),r}),__name(getVariablesHint,"getVariablesHint"),__name(getTypeInfo,"getTypeInfo")}}]);
//# sourceMappingURL=5995.a1deaeea268d3ceb.js.map