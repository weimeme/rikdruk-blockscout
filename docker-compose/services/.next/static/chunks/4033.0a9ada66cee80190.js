"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4033],{73730:function(e,s,r){r.d(s,{Z:function(){return K}});var t=r(85893),n=r(34151),a=r(65291),i=r(77374),o=r(10191),l=r(33838),d=r(23438),c=r(56880),u=r(67294),h=r(85786),m=r(96026),x=r(36399),p=r(23100),f=r(31507),g=r(204),j=r(96272),b=r(87536),y=r(99640),v=r(44831),S=r(22099),w=r(76215),k=r(23613),I=r(12498),C=r(70654),R=r(28129),E=r(97477),N=r(14072),_=u.memo(e=>{let{formState:s,control:r}=e,n=(0,I.ff)("white","gray.900"),a=u.useCallback(e=>{let{field:r}=e,a="address"in s.errors?s.errors.address:void 0;return(0,t.jsxs)(C.NI,{variant:"floating",id:r.name,isRequired:!0,size:"md",backgroundColor:n,mt:8,children:[(0,t.jsx)(R.I,{...r,required:!0,isInvalid:!!a,maxLength:E.y,isDisabled:s.isSubmitting,autoComplete:"off"}),(0,t.jsx)(N.Z,{text:"Smart contract address (0x...)",error:a})]})},[s.errors,s.isSubmitting,n]);return(0,t.jsx)(b.Qr,{name:"address",control:r,render:a,rules:{required:!0,pattern:E.T}})}),A=u.memo(e=>{let{defaultAddress:s,onContinue:r}=e,n=(0,b.cI)({mode:"onBlur",defaultValues:{address:s}}),{handleSubmit:a,formState:i,control:o,setError:l,clearErrors:d,watch:c}=n,h=(0,S.Z)(),m=c("address");u.useEffect(()=>{d("root")},[m,d]);let x=u.useCallback(async e=>{var s,t;try{let t={contractAddress:e.address},n=await h("address_verification",{fetchParams:{method:"POST",body:t},pathParams:{chainId:v.Z.chain.id,type:":prepare"}});if("SUCCESS"!==n.status){let e="number"==typeof n.status?"UNKNOWN_ERROR":n.status,r=("payload"in n?null===(s=n.payload)||void 0===s?void 0:s.message:void 0)||"Oops! Something went wrong";return l("root",{type:e,message:r})}r({...n.result,address:e.address})}catch(e){l("root",{type:"manual",message:(null===(t=e.payload)||void 0===t?void 0:t.message)||"Oops! Something went wrong"})}},[h,r,l]),I=a(x),C=(()=>{var e,s;switch(null===(e=i.errors.root)||void 0===e?void 0:e.type){case"INVALID_ADDRESS_ERROR":return(0,t.jsx)("span",{children:"Specified address either does not exist or is EOA."});case"IS_OWNER_ERROR":return(0,t.jsx)("span",{children:"Ownership of this contract address is already verified by this account."});case"OWNERSHIP_VERIFIED_ERROR":return(0,t.jsx)("span",{children:"Ownership of this contract address is already verified by another account."});case"SOURCE_CODE_NOT_VERIFIED_ERROR":{let e=(0,y.B)({pathname:"/address/[hash]/contract-verification",query:{hash:m}});return(0,t.jsxs)(p.xu,{children:[(0,t.jsx)("span",{children:"The contract source code you entered is not yet verified. Please follow these steps to "}),(0,t.jsx)(w.Z,{href:e,children:"verify the contract"}),(0,t.jsx)("span",{children:"."})]})}case void 0:return null;default:return null===(s=i.errors.root)||void 0===s?void 0:s.message}})();return(0,t.jsxs)("form",{noValidate:!0,onSubmit:I,children:[(0,t.jsx)(p.xu,{children:"Enter the contract address you are verifying ownership for."}),C&&(0,t.jsx)(f.b,{status:"warning",mt:3,children:C}),(0,t.jsx)(_,{formState:i,control:o}),(0,t.jsxs)(g.k,{alignItems:{base:"flex-start",lg:"center"},mt:8,columnGap:5,rowGap:2,flexDir:{base:"column",lg:"row"},children:[(0,t.jsx)(j.z,{size:"lg",type:"submit",isDisabled:i.isSubmitting,flexShrink:0,children:"Continue"}),(0,t.jsx)(k.Z,{})]})]})}),O=r(75350),D=r(94060),T=r(47860),G=r(37382),V=r(38793),W=r(16282),Z=r(68387),z=r(41753),P=u.memo(e=>{let{formState:s,control:r}=e,n=(0,I.ff)("white","gray.900"),a=u.useCallback(e=>{let{field:r}=e,a="message"in s.errors?s.errors.message:void 0;return(0,t.jsxs)(C.NI,{variant:"floating",id:r.name,isRequired:!0,size:"md",backgroundColor:n,children:[(0,t.jsx)(z.g,{...r,required:!0,isInvalid:!!a,isDisabled:!0,autoComplete:"off",maxH:{base:"140px",lg:"80px"}}),(0,t.jsx)(N.Z,{text:"Message to sign",error:a,isInModal:!0})]})},[s.errors,n]);return(0,t.jsx)(b.Qr,{defaultValue:"some value",name:"message",control:r,render:a,rules:{required:!0}})});let L=/^0x[a-fA-F\d]{130}$/;var q=u.memo(e=>{let{formState:s,control:r}=e,n=(0,I.ff)("white","gray.900"),a=u.useCallback(e=>{let{field:r}=e,a="signature"in s.errors?s.errors.signature:void 0;return(0,t.jsxs)(C.NI,{variant:"floating",id:r.name,isRequired:!0,size:"md",backgroundColor:n,children:[(0,t.jsx)(R.I,{...r,required:!0,isInvalid:!!a,isDisabled:s.isSubmitting,autoComplete:"off"}),(0,t.jsx)(N.Z,{text:"Signature hash",error:a})]})},[s.errors,s.isSubmitting,n]);return(0,t.jsx)(b.Qr,{name:"signature",control:r,render:a,rules:{required:!0,pattern:L}})}),U=u.memo(e=>{let{address:s,signingMessage:r,contractCreator:n,contractOwner:a,onContinue:i,noWeb3Provider:o}=e,[d,c]=u.useState(o?"manual":"wallet"),{open:h}=(0,G.k_)(),{isConnected:m}=(0,V.mA)(),x=(0,b.cI)({mode:"onBlur",defaultValues:{message:r}}),{handleSubmit:y,formState:w,control:I,setValue:C,getValues:R,setError:E,clearErrors:N,watch:_}=x,A=(0,S.Z)(),z=_("signature");u.useEffect(()=>{N("root")},[N,z]);let L=u.useCallback(async e=>{try{let r={contractAddress:s,message:e.message,signature:e.signature},t=await A("address_verification",{fetchParams:{method:"POST",body:r},pathParams:{chainId:v.Z.chain.id,type:":verify"}});if("SUCCESS"!==t.status){let e="number"==typeof t.status?"UNKNOWN_STATUS":t.status;return E("root",{type:e,message:"INVALID_SIGNER_ERROR"===t.status?t.invalidSigner.signer:void 0})}i(t.result.verifiedAddress,d)}catch(e){E("root",{type:"UNKNOWN_STATUS"})}},[s,A,i,E,d]),U=y(L),{signMessage:F,isLoading:K}=(0,V.QW)({onSuccess:e=>{C("signature",e),U()},onError:e=>E("root",{type:"SIGNING_FAIL",message:(null==e?void 0:e.message)||"Oops! Something went wrong"})}),Y=u.useCallback(e=>{c(e),N("root")},[N]),B=u.useCallback(()=>{N("root"),h()},[N,h]),M=u.useCallback(()=>{if(N("root"),!m)return E("root",{type:"manual",message:"Please connect to your Web3 wallet first"});let e=R("message");F({message:e})},[N,m,R,F,E]),Q=u.useCallback(()=>{N("root"),U()},[N,U]),H="manual"===d?(0,t.jsx)(j.z,{size:"lg",onClick:Q,isLoading:w.isSubmitting,loadingText:"Verifying",children:"Verify"}):(0,t.jsx)(j.z,{size:"lg",onClick:m?M:B,isLoading:w.isSubmitting||K,loadingText:K?"Signing":"Verifying",children:m?"Sign and verify":"Connect wallet"}),X=(0,t.jsxs)("span",{children:["contact us ",(0,t.jsx)(l.r,{href:"mailto:help@blockscout.com",children:"help@blockscout.com"})]}),$=(()=>{var e;switch(null===(e=w.errors.root)||void 0===e?void 0:e.type){case"INVALID_SIGNATURE_ERROR":return(0,t.jsx)("span",{children:"The signature could not be processed."});case"VALIDITY_EXPIRED_ERROR":return(0,t.jsx)("span",{children:"This verification message has expired. Add the contract address to restart the process."});case"SIGNING_FAIL":return(0,t.jsx)("span",{children:w.errors.root.message});case"INVALID_SIGNER_ERROR":{let e=(0,W.Z)(w.errors.root.message||""),s=[n,a].filter(Boolean).map(W.Z).join(", ");return(0,t.jsxs)(p.xu,{children:[(0,t.jsx)("span",{children:"This address "}),(0,t.jsx)("span",{children:e}),(0,t.jsx)("span",{children:" is not a creator/owner of the requested contract and cannot claim ownership. Only "}),(0,t.jsx)("span",{children:s}),(0,t.jsx)("span",{children:" can verify ownership of this contract."})]})}case"UNKNOWN_STATUS":return(0,t.jsxs)(p.xu,{children:[(0,t.jsx)("span",{children:"We are not able to process the verify account ownership for this contract address. Kindly "}),X,(0,t.jsx)("span",{children:" for further assistance."})]});case void 0:return null}})();return(0,t.jsxs)("form",{noValidate:!0,onSubmit:U,children:[$&&(0,t.jsx)(f.b,{status:"warning",mb:6,children:$}),(0,t.jsxs)(p.xu,{mb:8,children:[(0,t.jsx)("span",{children:"Please select the address to sign and copy the message and sign it using the Blockscout message provider of your choice. "}),(0,t.jsx)(l.r,{href:"https://docs.blockscout.com/for-users/my-account/verified-addresses/copy-and-sign-message",target:"_blank",children:"Additional instructions"}),(0,t.jsx)("span",{children:". If you do not see your address here but are sure that you are the owner of the contract, kindly "}),X,(0,t.jsx)("span",{children:" for further assistance."})]}),(a||n)&&(0,t.jsxs)(g.k,{flexDir:"column",rowGap:4,mb:4,children:[n&&(0,t.jsxs)(p.xu,{children:[(0,t.jsx)(O.m.span,{fontWeight:600,children:"Contract creator: "}),(0,t.jsx)(O.m.span,{children:n})]}),a&&(0,t.jsxs)(p.xu,{children:[(0,t.jsx)(O.m.span,{fontWeight:600,children:"Contract owner: "}),(0,t.jsx)(O.m.span,{children:a})]})]}),(0,t.jsxs)(g.k,{rowGap:5,flexDir:"column",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(Z.Z,{text:r,ml:"auto",display:"block"}),(0,t.jsx)(P,{formState:w,control:I})]}),!o&&(0,t.jsxs)(D.E,{onChange:Y,value:d,display:"flex",flexDir:"column",rowGap:4,children:[(0,t.jsx)(T.Y,{value:"wallet",children:"Sign via Web3 wallet"}),(0,t.jsx)(T.Y,{value:"manually",children:"Sign manually"})]}),"manual"===d&&(0,t.jsx)(q,{formState:w,control:I})]}),(0,t.jsxs)(g.k,{alignItems:{base:"flex-start",lg:"center"},mt:8,columnGap:5,rowGap:2,flexDir:{base:"column",lg:"row"},children:[H,(0,t.jsx)(k.Z,{})]})]})}),F=u.memo(e=>{let{onAddTokenInfoClick:s,onShowListClick:r,isToken:n,address:a}=e;return(0,t.jsxs)(p.xu,{children:[(0,t.jsxs)(f.b,{status:"success",flexWrap:"wrap",whiteSpace:"pre-wrap",wordBreak:"break-word",mb:3,display:"inline-block",children:[(0,t.jsx)("span",{children:"The address ownership for "}),(0,t.jsx)(O.m.span,{fontWeight:700,children:a}),(0,t.jsx)("span",{children:" is verified."})]}),(0,t.jsx)("p",{children:"You may now submit the “Add token information” request"}),(0,t.jsxs)(g.k,{alignItems:"center",mt:8,columnGap:5,flexWrap:"wrap",rowGap:5,children:[(0,t.jsx)(j.z,{size:"lg",variant:n?"outline":"solid",onClick:r,children:"View my verified addresses"}),n&&(0,t.jsx)(j.z,{size:"lg",onClick:s,children:"Add token information"})]})]})}),K=u.memo(e=>{let{defaultAddress:s,isOpen:r,onClose:p,onSubmit:f,onAddTokenInfoClick:g,onShowListClick:j,pageType:b}=e,[y,v]=u.useState(0),[S,w]=u.useState({address:"",signingMessage:""});u.useEffect(()=>{r&&h.Kz(h.GM.VERIFY_ADDRESS,{Action:"Form opened","Page type":b})},[r,b]);let k=u.useCallback(e=>{w(e),v(e=>e+1),h.Kz(h.GM.VERIFY_ADDRESS,{Action:"Address entered","Page type":b})},[b]),I=u.useCallback((e,s)=>{f(e),v(e=>e+1),w(s=>({...s,isToken:!!e.metadata.tokenName})),h.Kz(h.GM.VERIFY_ADDRESS,{Action:"Sign ownership","Page type":b,"Sign method":s})},[f,b]),C=u.useCallback(()=>{v(e=>e-1)},[]),R=u.useCallback(()=>{p(),v(0),w({address:"",signingMessage:""})},[p]),E=u.useCallback(()=>{g(S.address),R()},[R,S.address,g]),N=[{title:"Verify new address ownership",content:(0,t.jsx)(A,{onContinue:k,defaultAddress:s})},{title:"Copy and sign message",content:(0,t.jsx)(U,{...S,onContinue:I}),fallback:(0,t.jsx)(U,{...S,onContinue:I,noWeb3Provider:!0})},{title:"Congrats! Address is verified.",content:(0,t.jsx)(F,{onShowListClick:j,onAddTokenInfoClick:E,isToken:S.isToken,address:S.address})}],_=N[y];return(0,t.jsxs)(n.u_,{isOpen:r,onClose:R,size:{base:"full",lg:"md"},children:[(0,t.jsx)(a.Z,{}),(0,t.jsxs)(i.h,{children:[(0,t.jsxs)(o.x,{fontWeight:"500",textStyle:"h3",mb:6,children:[0!==y&&(0,t.jsx)(l.r,{mr:3,onClick:C,children:(0,t.jsx)(m.Z,{name:"arrows/east",boxSize:6,transform:"rotate(180deg)",verticalAlign:"middle"})}),(0,t.jsx)("span",{children:_.title})]}),(0,t.jsx)(d.o,{}),(0,t.jsx)(c.f,{mb:0,children:(0,t.jsx)(x.Z,{fallback:(null==_?void 0:_.fallback)||_.content,children:_.content})})]})]})})},14072:function(e,s,r){var t=r(85893),n=r(96177),a=r(75350);r(67294),s.Z=(0,a.m)(e=>{let{text:s,icon:r,error:i,className:o,isFancy:l,isInModal:d}=e,c=null==i?void 0:i.message;return c||(null==i?void 0:i.type)!=="pattern"||(c="Invalid format"),(0,t.jsxs)(n.l,{className:o,alignItems:"center",...l?{"data-fancy":!0}:{},...d?{"data-in-modal":!0}:{},children:[r,(0,t.jsx)(a.m.span,{children:s}),c&&(0,t.jsxs)(a.m.span,{order:3,whiteSpace:"pre",children:[" - ",c]})]})})},47147:function(e,s,r){var t=r(85893),n=r(75350),a=r(31708),i=r(93344),o=r(776),l=r(24262);r(67294);let d=(0,n.m)(e=>{let{isAnimated:s,children:r,className:n}=e;return(0,t.jsx)(a.r,{as:l.E.div,w:"100%",initial:s?{opacity:0,scale:.97}:{opacity:1,scale:1},animate:{opacity:1,scale:1},transitionDuration:"normal",transitionTimingFunction:"linear",rowGap:2,columnGap:2,gridTemplateColumns:"86px auto",alignItems:"start",paddingY:4,borderColor:"divider",borderTopWidth:"1px",_last:{borderBottomWidth:"1px"},className:n,fontSize:"sm",lineHeight:"20px",children:r})}),c=(0,n.m)(e=>{let{children:s,className:r,isLoading:n}=e;return(0,t.jsx)(i.O,{className:r,isLoaded:!n,fontWeight:500,my:"5px",justifySelf:"start",children:s})}),u=(0,n.m)(e=>{let{children:s,className:r}=e;return(0,t.jsx)(o.P,{className:r,py:"5px",color:"text_secondary",overflow:"hidden",children:s})});s.Z={Container:d,Label:c,Value:u}},23613:function(e,s,r){var t=r(85893),n=r(23100),a=r(33838),i=r(75350);r(67294),s.Z=(0,i.m)(e=>{let{className:s}=e;return(0,t.jsxs)(n.xu,{className:s,children:[(0,t.jsx)("span",{children:"Need help? Contact admin team at "}),(0,t.jsx)(a.r,{href:"mailto:help@blockscout.com",children:"help@blockscout.com"}),(0,t.jsx)("span",{children:" for assistance!"})]})})}}]);
//# sourceMappingURL=4033.0a9ada66cee80190.js.map