(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1307],{31050:function(r,i,c){"use strict";i.Xx=i._w=i.aP=i.KS=i.jQ=void 0,c(31416);let l=c(93350);function gf(r){let i=new Float64Array(16);if(r)for(let c=0;c<r.length;c++)i[c]=r[c];return i}c(17309),i.jQ=64,i.KS=64,i.aP=32;let p=new Uint8Array(32);p[0]=9;let v=gf(),_=gf([1]),E=(gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),P=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),q=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);function set25519(r,i){for(let c=0;c<16;c++)r[c]=0|i[c]}function car25519(r){let i=1;for(let c=0;c<16;c++){let l=r[c]+i+65535;i=Math.floor(l/65536),r[c]=l-65536*i}r[0]+=i-1+37*(i-1)}function sel25519(r,i,c){let l=~(c-1);for(let c=0;c<16;c++){let p=l&(r[c]^i[c]);r[c]^=p,i[c]^=p}}function pack25519(r,i){let c=gf(),l=gf();for(let r=0;r<16;r++)l[r]=i[r];car25519(l),car25519(l),car25519(l);for(let r=0;r<2;r++){c[0]=l[0]-65517;for(let r=1;r<15;r++)c[r]=l[r]-65535-(c[r-1]>>16&1),c[r-1]&=65535;c[15]=l[15]-32767-(c[14]>>16&1);let r=c[15]>>16&1;c[14]&=65535,sel25519(l,c,1-r)}for(let i=0;i<16;i++)r[2*i]=255&l[i],r[2*i+1]=l[i]>>8}gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function add(r,i,c){for(let l=0;l<16;l++)r[l]=i[l]+c[l]}function sub(r,i,c){for(let l=0;l<16;l++)r[l]=i[l]-c[l]}function mul(r,i,c){let l,p,v=0,_=0,E=0,P=0,q=0,z=0,M=0,U=0,J=0,Q=0,X=0,et=0,es=0,eo=0,ec=0,el=0,eh=0,ep=0,ed=0,ef=0,eg=0,ey=0,em=0,e_=0,eb=0,ew=0,eE=0,eI=0,ex=0,eS=0,eP=0,eR=c[0],eO=c[1],eN=c[2],eC=c[3],eA=c[4],ej=c[5],eT=c[6],eL=c[7],eD=c[8],ek=c[9],ez=c[10],eM=c[11],eU=c[12],e$=c[13],eH=c[14],eK=c[15];v+=(l=i[0])*eR,_+=l*eO,E+=l*eN,P+=l*eC,q+=l*eA,z+=l*ej,M+=l*eT,U+=l*eL,J+=l*eD,Q+=l*ek,X+=l*ez,et+=l*eM,es+=l*eU,eo+=l*e$,ec+=l*eH,el+=l*eK,_+=(l=i[1])*eR,E+=l*eO,P+=l*eN,q+=l*eC,z+=l*eA,M+=l*ej,U+=l*eT,J+=l*eL,Q+=l*eD,X+=l*ek,et+=l*ez,es+=l*eM,eo+=l*eU,ec+=l*e$,el+=l*eH,eh+=l*eK,E+=(l=i[2])*eR,P+=l*eO,q+=l*eN,z+=l*eC,M+=l*eA,U+=l*ej,J+=l*eT,Q+=l*eL,X+=l*eD,et+=l*ek,es+=l*ez,eo+=l*eM,ec+=l*eU,el+=l*e$,eh+=l*eH,ep+=l*eK,P+=(l=i[3])*eR,q+=l*eO,z+=l*eN,M+=l*eC,U+=l*eA,J+=l*ej,Q+=l*eT,X+=l*eL,et+=l*eD,es+=l*ek,eo+=l*ez,ec+=l*eM,el+=l*eU,eh+=l*e$,ep+=l*eH,ed+=l*eK,q+=(l=i[4])*eR,z+=l*eO,M+=l*eN,U+=l*eC,J+=l*eA,Q+=l*ej,X+=l*eT,et+=l*eL,es+=l*eD,eo+=l*ek,ec+=l*ez,el+=l*eM,eh+=l*eU,ep+=l*e$,ed+=l*eH,ef+=l*eK,z+=(l=i[5])*eR,M+=l*eO,U+=l*eN,J+=l*eC,Q+=l*eA,X+=l*ej,et+=l*eT,es+=l*eL,eo+=l*eD,ec+=l*ek,el+=l*ez,eh+=l*eM,ep+=l*eU,ed+=l*e$,ef+=l*eH,eg+=l*eK,M+=(l=i[6])*eR,U+=l*eO,J+=l*eN,Q+=l*eC,X+=l*eA,et+=l*ej,es+=l*eT,eo+=l*eL,ec+=l*eD,el+=l*ek,eh+=l*ez,ep+=l*eM,ed+=l*eU,ef+=l*e$,eg+=l*eH,ey+=l*eK,U+=(l=i[7])*eR,J+=l*eO,Q+=l*eN,X+=l*eC,et+=l*eA,es+=l*ej,eo+=l*eT,ec+=l*eL,el+=l*eD,eh+=l*ek,ep+=l*ez,ed+=l*eM,ef+=l*eU,eg+=l*e$,ey+=l*eH,em+=l*eK,J+=(l=i[8])*eR,Q+=l*eO,X+=l*eN,et+=l*eC,es+=l*eA,eo+=l*ej,ec+=l*eT,el+=l*eL,eh+=l*eD,ep+=l*ek,ed+=l*ez,ef+=l*eM,eg+=l*eU,ey+=l*e$,em+=l*eH,e_+=l*eK,Q+=(l=i[9])*eR,X+=l*eO,et+=l*eN,es+=l*eC,eo+=l*eA,ec+=l*ej,el+=l*eT,eh+=l*eL,ep+=l*eD,ed+=l*ek,ef+=l*ez,eg+=l*eM,ey+=l*eU,em+=l*e$,e_+=l*eH,eb+=l*eK,X+=(l=i[10])*eR,et+=l*eO,es+=l*eN,eo+=l*eC,ec+=l*eA,el+=l*ej,eh+=l*eT,ep+=l*eL,ed+=l*eD,ef+=l*ek,eg+=l*ez,ey+=l*eM,em+=l*eU,e_+=l*e$,eb+=l*eH,ew+=l*eK,et+=(l=i[11])*eR,es+=l*eO,eo+=l*eN,ec+=l*eC,el+=l*eA,eh+=l*ej,ep+=l*eT,ed+=l*eL,ef+=l*eD,eg+=l*ek,ey+=l*ez,em+=l*eM,e_+=l*eU,eb+=l*e$,ew+=l*eH,eE+=l*eK,es+=(l=i[12])*eR,eo+=l*eO,ec+=l*eN,el+=l*eC,eh+=l*eA,ep+=l*ej,ed+=l*eT,ef+=l*eL,eg+=l*eD,ey+=l*ek,em+=l*ez,e_+=l*eM,eb+=l*eU,ew+=l*e$,eE+=l*eH,eI+=l*eK,eo+=(l=i[13])*eR,ec+=l*eO,el+=l*eN,eh+=l*eC,ep+=l*eA,ed+=l*ej,ef+=l*eT,eg+=l*eL,ey+=l*eD,em+=l*ek,e_+=l*ez,eb+=l*eM,ew+=l*eU,eE+=l*e$,eI+=l*eH,ex+=l*eK,ec+=(l=i[14])*eR,el+=l*eO,eh+=l*eN,ep+=l*eC,ed+=l*eA,ef+=l*ej,eg+=l*eT,ey+=l*eL,em+=l*eD,e_+=l*ek,eb+=l*ez,ew+=l*eM,eE+=l*eU,eI+=l*e$,ex+=l*eH,eS+=l*eK,el+=(l=i[15])*eR,eh+=l*eO,ep+=l*eN,ed+=l*eC,ef+=l*eA,eg+=l*ej,ey+=l*eT,em+=l*eL,e_+=l*eD,eb+=l*ek,ew+=l*ez,eE+=l*eM,eI+=l*eU,ex+=l*e$,eS+=l*eH,eP+=l*eK,v+=38*eh,_+=38*ep,E+=38*ed,P+=38*ef,q+=38*eg,z+=38*ey,M+=38*em,U+=38*e_,J+=38*eb,Q+=38*ew,X+=38*eE,et+=38*eI,es+=38*ex,eo+=38*eS,ec+=38*eP,p=Math.floor((l=v+(p=1)+65535)/65536),v=l-65536*p,p=Math.floor((l=_+p+65535)/65536),_=l-65536*p,p=Math.floor((l=E+p+65535)/65536),E=l-65536*p,p=Math.floor((l=P+p+65535)/65536),P=l-65536*p,p=Math.floor((l=q+p+65535)/65536),q=l-65536*p,p=Math.floor((l=z+p+65535)/65536),z=l-65536*p,p=Math.floor((l=M+p+65535)/65536),M=l-65536*p,p=Math.floor((l=U+p+65535)/65536),U=l-65536*p,p=Math.floor((l=J+p+65535)/65536),J=l-65536*p,p=Math.floor((l=Q+p+65535)/65536),Q=l-65536*p,p=Math.floor((l=X+p+65535)/65536),X=l-65536*p,p=Math.floor((l=et+p+65535)/65536),et=l-65536*p,p=Math.floor((l=es+p+65535)/65536),es=l-65536*p,p=Math.floor((l=eo+p+65535)/65536),eo=l-65536*p,p=Math.floor((l=ec+p+65535)/65536),ec=l-65536*p,p=Math.floor((l=el+p+65535)/65536),el=l-65536*p,v+=p-1+37*(p-1),p=Math.floor((l=v+(p=1)+65535)/65536),v=l-65536*p,p=Math.floor((l=_+p+65535)/65536),_=l-65536*p,p=Math.floor((l=E+p+65535)/65536),E=l-65536*p,p=Math.floor((l=P+p+65535)/65536),P=l-65536*p,p=Math.floor((l=q+p+65535)/65536),q=l-65536*p,p=Math.floor((l=z+p+65535)/65536),z=l-65536*p,p=Math.floor((l=M+p+65535)/65536),M=l-65536*p,p=Math.floor((l=U+p+65535)/65536),U=l-65536*p,p=Math.floor((l=J+p+65535)/65536),J=l-65536*p,p=Math.floor((l=Q+p+65535)/65536),Q=l-65536*p,p=Math.floor((l=X+p+65535)/65536),X=l-65536*p,p=Math.floor((l=et+p+65535)/65536),et=l-65536*p,p=Math.floor((l=es+p+65535)/65536),es=l-65536*p,p=Math.floor((l=eo+p+65535)/65536),eo=l-65536*p,p=Math.floor((l=ec+p+65535)/65536),ec=l-65536*p,p=Math.floor((l=el+p+65535)/65536),el=l-65536*p,v+=p-1+37*(p-1),r[0]=v,r[1]=_,r[2]=E,r[3]=P,r[4]=q,r[5]=z,r[6]=M,r[7]=U,r[8]=J,r[9]=Q,r[10]=X,r[11]=et,r[12]=es,r[13]=eo,r[14]=ec,r[15]=el}function edadd(r,i){let c=gf(),l=gf(),p=gf(),v=gf(),_=gf(),P=gf(),q=gf(),z=gf(),M=gf();sub(c,r[1],r[0]),sub(M,i[1],i[0]),mul(c,c,M),add(l,r[0],r[1]),add(M,i[0],i[1]),mul(l,l,M),mul(p,r[3],i[3]),mul(p,p,E),mul(v,r[2],i[2]),add(v,v,v),sub(_,l,c),sub(P,v,p),add(q,v,p),add(z,l,c),mul(r[0],_,P),mul(r[1],z,q),mul(r[2],q,P),mul(r[3],_,z)}function cswap(r,i,c){for(let l=0;l<4;l++)sel25519(r[l],i[l],c)}function pack(r,i){let c=gf(),l=gf(),p=gf();(function(r,i){let c;let l=gf();for(c=0;c<16;c++)l[c]=i[c];for(c=253;c>=0;c--)mul(l,l,l),2!==c&&4!==c&&mul(l,l,i);for(c=0;c<16;c++)r[c]=l[c]})(p,i[2]),mul(c,i[0],p),mul(l,i[1],p),pack25519(r,l),r[31]^=function(r){let i=new Uint8Array(32);return pack25519(i,r),1&i[0]}(c)<<7}function scalarbase(r,i){let c=[gf(),gf(),gf(),gf()];set25519(c[0],P),set25519(c[1],q),set25519(c[2],_),mul(c[3],P,q),function(r,i,c){set25519(r[0],v),set25519(r[1],_),set25519(r[2],_),set25519(r[3],v);for(let l=255;l>=0;--l){let p=c[l/8|0]>>(7&l)&1;cswap(r,i,p),edadd(i,r),edadd(r,r),cswap(r,i,p)}}(r,c,i)}i._w=function(r){if(r.length!==i.aP)throw Error(`ed25519: seed must be ${i.aP} bytes`);let c=(0,l.hash)(r);c[0]&=248,c[31]&=127,c[31]|=64;let p=new Uint8Array(32),v=[gf(),gf(),gf(),gf()];scalarbase(v,c),pack(p,v);let _=new Uint8Array(64);return _.set(r),_.set(p,32),{publicKey:p,secretKey:_}};let z=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,i){let c,l,p,v;for(l=63;l>=32;--l){for(c=0,p=l-32,v=l-12;p<v;++p)i[p]+=c-16*i[l]*z[p-(l-32)],c=Math.floor((i[p]+128)/256),i[p]-=256*c;i[p]+=c,i[l]=0}for(p=0,c=0;p<32;p++)i[p]+=c-(i[31]>>4)*z[p],c=i[p]>>8,i[p]&=255;for(p=0;p<32;p++)i[p]-=c*z[p];for(l=0;l<32;l++)i[l+1]+=i[l]>>8,r[l]=255&i[l]}function reduce(r){let i=new Float64Array(64);for(let c=0;c<64;c++)i[c]=r[c];for(let i=0;i<64;i++)r[i]=0;modL(r,i)}i.Xx=function(r,i){let c=new Float64Array(64),p=[gf(),gf(),gf(),gf()],v=(0,l.hash)(r.subarray(0,32));v[0]&=248,v[31]&=127,v[31]|=64;let _=new Uint8Array(64);_.set(v.subarray(32),32);let E=new l.SHA512;E.update(_.subarray(32)),E.update(i);let P=E.digest();E.clean(),reduce(P),scalarbase(p,P),pack(_,p),E.reset(),E.update(_.subarray(0,32)),E.update(r.subarray(32)),E.update(i);let q=E.digest();reduce(q);for(let r=0;r<32;r++)c[r]=P[r];for(let r=0;r<32;r++)for(let i=0;i<32;i++)c[r+i]+=q[r]*v[i];return modL(_.subarray(32),c),_}},93350:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=c(98099),p=c(17309);i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var v=function(){function SHA512(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return SHA512.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},SHA512.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},SHA512.prototype.clean=function(){p.wipe(this._buffer),p.wipe(this._tempHi),p.wipe(this._tempLo),this.reset()},SHA512.prototype.update=function(r,c){if(void 0===c&&(c=r.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var l=0;if(this._bytesHashed+=c,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&c>0;)this._buffer[this._bufferLength++]=r[l++],c--;this._bufferLength===this.blockSize&&(hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(c>=this.blockSize&&(l=hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,r,l,c),c%=this.blockSize);c>0;)this._buffer[this._bufferLength++]=r[l++],c--;return this},SHA512.prototype.finish=function(r){if(!this._finished){var i=this._bytesHashed,c=this._bufferLength,p=i%128<112?128:256;this._buffer[c]=128;for(var v=c+1;v<p-8;v++)this._buffer[v]=0;l.writeUint32BE(i/536870912|0,this._buffer,p-8),l.writeUint32BE(i<<3,this._buffer,p-4),hashBlocks(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,p),this._finished=!0}for(var v=0;v<this.digestLength/8;v++)l.writeUint32BE(this._stateHi[v],r,8*v),l.writeUint32BE(this._stateLo[v],r,8*v+4);return this},SHA512.prototype.digest=function(){var r=new Uint8Array(this.digestLength);return this.finish(r),r},SHA512.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},SHA512.prototype.restoreState=function(r){return this._stateHi.set(r.stateHi),this._stateLo.set(r.stateLo),this._bufferLength=r.bufferLength,r.buffer&&this._buffer.set(r.buffer),this._bytesHashed=r.bytesHashed,this._finished=!1,this},SHA512.prototype.cleanSavedState=function(r){p.wipe(r.stateHi),p.wipe(r.stateLo),r.buffer&&p.wipe(r.buffer),r.bufferLength=0,r.bytesHashed=0},SHA512}();i.SHA512=v;var _=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function hashBlocks(r,i,c,p,v,E,P){for(var q,z,M,U,J,Q,X,et,es=c[0],eo=c[1],ec=c[2],el=c[3],eh=c[4],ep=c[5],ed=c[6],ef=c[7],eg=p[0],ey=p[1],em=p[2],e_=p[3],eb=p[4],ew=p[5],eE=p[6],eI=p[7];P>=128;){for(var ex=0;ex<16;ex++){var eS=8*ex+E;r[ex]=l.readUint32BE(v,eS),i[ex]=l.readUint32BE(v,eS+4)}for(var ex=0;ex<80;ex++){var eP=es,eR=eo,eO=ec,eN=el,eC=eh,eA=ep,ej=ed,eT=ef,eL=eg,eD=ey,ek=em,ez=e_,eM=eb,eU=ew,e$=eE,eH=eI;if(q=ef,J=65535&(z=eI),Q=z>>>16,X=65535&q,et=q>>>16,q=(eh>>>14|eb<<18)^(eh>>>18|eb<<14)^(eb>>>9|eh<<23),J+=65535&(z=(eb>>>14|eh<<18)^(eb>>>18|eh<<14)^(eh>>>9|eb<<23)),Q+=z>>>16,X+=65535&q,et+=q>>>16,q=eh&ep^~eh&ed,J+=65535&(z=eb&ew^~eb&eE),Q+=z>>>16,X+=65535&q,et+=q>>>16,q=_[2*ex],J+=65535&(z=_[2*ex+1]),Q+=z>>>16,X+=65535&q,et+=q>>>16,q=r[ex%16],J+=65535&(z=i[ex%16]),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,M=65535&X|et<<16,U=65535&J|Q<<16,q=M,J=65535&(z=U),Q=z>>>16,X=65535&q,et=q>>>16,q=(es>>>28|eg<<4)^(eg>>>2|es<<30)^(eg>>>7|es<<25),J+=65535&(z=(eg>>>28|es<<4)^(es>>>2|eg<<30)^(es>>>7|eg<<25)),Q+=z>>>16,X+=65535&q,et+=q>>>16,q=es&eo^es&ec^eo&ec,J+=65535&(z=eg&ey^eg&em^ey&em),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,eT=65535&X|et<<16,eH=65535&J|Q<<16,q=eN,J=65535&(z=ez),Q=z>>>16,X=65535&q,et=q>>>16,q=M,J+=65535&(z=U),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,eN=65535&X|et<<16,ez=65535&J|Q<<16,eo=eP,ec=eR,el=eO,eh=eN,ep=eC,ed=eA,ef=ej,es=eT,ey=eL,em=eD,e_=ek,eb=ez,ew=eM,eE=eU,eI=e$,eg=eH,ex%16==15)for(var eS=0;eS<16;eS++)q=r[eS],J=65535&(z=i[eS]),Q=z>>>16,X=65535&q,et=q>>>16,q=r[(eS+9)%16],J+=65535&(z=i[(eS+9)%16]),Q+=z>>>16,X+=65535&q,et+=q>>>16,q=((M=r[(eS+1)%16])>>>1|(U=i[(eS+1)%16])<<31)^(M>>>8|U<<24)^M>>>7,J+=65535&(z=(U>>>1|M<<31)^(U>>>8|M<<24)^(U>>>7|M<<25)),Q+=z>>>16,X+=65535&q,et+=q>>>16,q=((M=r[(eS+14)%16])>>>19|(U=i[(eS+14)%16])<<13)^(U>>>29|M<<3)^M>>>6,J+=65535&(z=(U>>>19|M<<13)^(M>>>29|U<<3)^(U>>>6|M<<26)),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,r[eS]=65535&X|et<<16,i[eS]=65535&J|Q<<16}q=es,J=65535&(z=eg),Q=z>>>16,X=65535&q,et=q>>>16,q=c[0],J+=65535&(z=p[0]),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,c[0]=es=65535&X|et<<16,p[0]=eg=65535&J|Q<<16,q=eo,J=65535&(z=ey),Q=z>>>16,X=65535&q,et=q>>>16,q=c[1],J+=65535&(z=p[1]),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,c[1]=eo=65535&X|et<<16,p[1]=ey=65535&J|Q<<16,q=ec,J=65535&(z=em),Q=z>>>16,X=65535&q,et=q>>>16,q=c[2],J+=65535&(z=p[2]),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,c[2]=ec=65535&X|et<<16,p[2]=em=65535&J|Q<<16,q=el,J=65535&(z=e_),Q=z>>>16,X=65535&q,et=q>>>16,q=c[3],J+=65535&(z=p[3]),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,c[3]=el=65535&X|et<<16,p[3]=e_=65535&J|Q<<16,q=eh,J=65535&(z=eb),Q=z>>>16,X=65535&q,et=q>>>16,q=c[4],J+=65535&(z=p[4]),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,c[4]=eh=65535&X|et<<16,p[4]=eb=65535&J|Q<<16,q=ep,J=65535&(z=ew),Q=z>>>16,X=65535&q,et=q>>>16,q=c[5],J+=65535&(z=p[5]),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,c[5]=ep=65535&X|et<<16,p[5]=ew=65535&J|Q<<16,q=ed,J=65535&(z=eE),Q=z>>>16,X=65535&q,et=q>>>16,q=c[6],J+=65535&(z=p[6]),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,c[6]=ed=65535&X|et<<16,p[6]=eE=65535&J|Q<<16,q=ef,J=65535&(z=eI),Q=z>>>16,X=65535&q,et=q>>>16,q=c[7],J+=65535&(z=p[7]),Q+=z>>>16,X+=65535&q,et+=q>>>16,Q+=J>>>16,X+=Q>>>16,et+=X>>>16,c[7]=ef=65535&X|et<<16,p[7]=eI=65535&J|Q<<16,E+=128,P-=128}return E}i.hash=function(r){var i=new v;i.update(r);var c=i.digest();return i.clean(),c}},40926:function(r,i,c){"use strict";function getBrowerCrypto(){return(null===c.g||void 0===c.g?void 0:c.g.crypto)||(null===c.g||void 0===c.g?void 0:c.g.msCrypto)||{}}function getSubtleCrypto(){let r=getBrowerCrypto();return r.subtle||r.webkitSubtle}Object.defineProperty(i,"__esModule",{value:!0}),i.isBrowserCryptoAvailable=i.getSubtleCrypto=i.getBrowerCrypto=void 0,i.getBrowerCrypto=getBrowerCrypto,i.getSubtleCrypto=getSubtleCrypto,i.isBrowserCryptoAvailable=function(){return!!getBrowerCrypto()&&!!getSubtleCrypto()}},88618:function(r,i,c){"use strict";var l=c(34155);function isReactNative(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function isNode(){return void 0!==l&&void 0!==l.versions&&void 0!==l.versions.node}Object.defineProperty(i,"__esModule",{value:!0}),i.isBrowser=i.isNode=i.isReactNative=void 0,i.isReactNative=isReactNative,i.isNode=isNode,i.isBrowser=function(){return!isReactNative()&&!isNode()}},1468:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let l=c(70655);l.__exportStar(c(40926),i),l.__exportStar(c(88618),i)},91307:function(r,i,c){"use strict";let l;c.d(i,{EthereumProvider:function(){return id}});var p=c(17187),v=c.n(p),_=c(15501),E=c(512),P=c(31416),q=c(73294),z=c(57664),M=c(37466),U=c(43631),J=c(66736),Q=c(62873),X=c(65755),et=c(66151),es=c(60075),eo=c(34155);function L(r,i){return r.includes(":")?[r]:i.chains||[]}let ec="base10",el="base16",eh="base64pad",ep="utf8";function Vn(){let r=(0,P.randomBytes)(32);return(0,M.BB)(r,el)}function Ln(r){let i=(0,q.vp)((0,M.mL)(r,ep));return(0,M.BB)(i,el)}function $(r){return Number((0,M.BB)(r,ec))}function ee(r){let i=(0,M.mL)(r,eh),c=i.slice(0,1);if(1===$(c)){let r=i.slice(1,33),l=i.slice(33,45),p=i.slice(45);return{type:c,sealed:p,iv:l,senderPublicKey:r}}let l=i.slice(1,13),p=i.slice(13);return{type:c,sealed:p,iv:l}}function Te(r){let i=r?.type||0;if(1===i){if(typeof r?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:i,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function qn(r){return 1===r.type&&"string"==typeof r.senderPublicKey&&"string"==typeof r.receiverPublicKey}var ed=Object.defineProperty,ef=Object.getOwnPropertySymbols,eg=Object.prototype.hasOwnProperty,ey=Object.prototype.propertyIsEnumerable,Ue=(r,i,c)=>i in r?ed(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,_e=(r,i)=>{for(var c in i||(i={}))eg.call(i,c)&&Ue(r,c,i[c]);if(ef)for(var c of ef(i))ey.call(i,c)&&Ue(r,c,i[c]);return r};let em={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function te(){return"u">typeof eo&&"u">typeof eo.versions&&"u">typeof eo.versions.node}function C(){return!(0,Q.getDocument)()&&!!(0,Q.getNavigator)()&&"ReactNative"===navigator.product}function D(){return!te()&&!!(0,Q.getNavigator)()}function T(){return C()?em.reactNative:te()?em.node:D()?em.browser:em.unknown}function O(r,i){return r.filter(r=>i.includes(r)).length===r.length}function rt(r){return Object.fromEntries(r.entries())}function ot(r){return new Map(Object.entries(r))}function at(r=J.FIVE_MINUTES,i){let c,l,p;let v=(0,J.toMiliseconds)(r||J.FIVE_MINUTES);return{resolve:r=>{p&&c&&(clearTimeout(p),c(r))},reject:r=>{p&&l&&(clearTimeout(p),l(r))},done:()=>new Promise((r,_)=>{p=setTimeout(()=>{_(Error(i))},v),c=r,l=_})}}function ut(r,i,c){return new Promise(async(l,p)=>{let v=setTimeout(()=>p(Error(c)),i);try{let i=await r;l(i)}catch(r){p(r)}clearTimeout(v)})}function re(r,i){if("string"==typeof i&&i.startsWith(`${r}:`))return i;if("topic"===r.toLowerCase()){if("string"!=typeof i)throw Error('Value must be "string" for expirer target type: topic');return`topic:${i}`}if("id"===r.toLowerCase()){if("number"!=typeof i)throw Error('Value must be "number" for expirer target type: id');return`id:${i}`}throw Error(`Unknown expirer target type: ${r}`)}function ft(r){let[i,c]=r.split(":"),l={id:void 0,topic:void 0};if("topic"===i&&"string"==typeof c)l.topic=c;else if("id"===i&&Number.isInteger(Number(c)))l.id=Number(c);else throw Error(`Invalid target, expected id:number or topic:string, got ${i}:${c}`);return l}function pt(r,i){return(0,J.fromMiliseconds)((i||Date.now())+(0,J.toMiliseconds)(r))}function mt(r){return Date.now()>=(0,J.toMiliseconds)(r)}function yt(r,i){return`${r}${i?`:${i}`:""}`}function S(r=[],i=[]){return[...new Set([...r,...i])]}async function ht({id:r,topic:i,wcDeepLink:l}){try{if(!l)return;let p="string"==typeof l?JSON.parse(l):l,v=p?.href;if("string"!=typeof v)return;v.endsWith("/")&&(v=v.slice(0,-1));let _=`${v}/wc?requestId=${r}&sessionTopic=${i}`,E=T();E===em.browser?_.startsWith("https://")?window.open(_,"_blank","noreferrer noopener"):window.open(_,"_self","noreferrer noopener"):E===em.reactNative&&"u">typeof(null==c.g?void 0:c.g.Linking)&&await c.g.Linking.openURL(_)}catch(r){console.error(r)}}async function gt(r,i){try{return await r.getItem(i)||(D()?localStorage.getItem(i):void 0)}catch(r){console.error(r)}}function vt(r){return r?.relay||{protocol:"irn"}}function Et(r){let i=es.RELAY_JSONRPC[r];if(typeof i>"u")throw Error(`Relay Protocol not supported: ${r}`);return i}var e_=Object.defineProperty,eb=Object.getOwnPropertySymbols,ew=Object.prototype.hasOwnProperty,eE=Object.prototype.propertyIsEnumerable,qe=(r,i,c)=>i in r?e_(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,St=(r,i)=>{for(var c in i||(i={}))ew.call(i,c)&&qe(r,c,i[c]);if(eb)for(var c of eb(i))eE.call(i,c)&&qe(r,c,i[c]);return r};function wt(r){var i;r=(r=r.includes("wc://")?r.replace("wc://",""):r).includes("wc:")?r.replace("wc:",""):r;let c=r.indexOf(":"),l=-1!==r.indexOf("?")?r.indexOf("?"):void 0,p=r.substring(0,c),v=r.substring(c+1,l).split("@"),_="u">typeof l?r.substring(l):"",E=et.parse(_);return{protocol:p,topic:(i=v[0]).startsWith("//")?i.substring(2):i,version:parseInt(v[1],10),symKey:E.symKey,relay:function(r,i="-"){let c={},l="relay"+i;return Object.keys(r).forEach(i=>{if(i.startsWith(l)){let p=i.replace(l,""),v=r[i];c[p]=v}}),c}(E)}}function A(r){let i=[];return r.forEach(r=>{let[c,l]=r.split(":");i.push(`${c}:${l}`)}),i}function oe(r){return r.includes(":")}function Xe(r){return oe(r)?r.split(":")[0]:r}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let eI={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ex={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function N(r,i){let{message:c,code:l}=ex[r];return{message:i?`${c} ${i}`:c,code:l}}function index_es_U(r,i){let{message:c,code:l}=eI[r];return{message:i?`${c} ${i}`:c,code:l}}function k(r,i){return!!Array.isArray(r)&&(!("u">typeof i)||!r.length||r.every(i))}function B(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function w(r){return typeof r>"u"}function h(r,i){return!!(i&&w(r))||"string"==typeof r&&!!r.trim().length}function G(r,i){return!!(i&&w(r))||"number"==typeof r&&!isNaN(r)}function V(r){return!!(h(r,!1)&&r.includes(":"))&&2===r.split(":").length}function ie(r){let i=!0;return k(r)?r.length&&(i=r.every(r=>h(r,!1))):i=!1,i}function ce(r,i){let c=null;return Object.values(r).forEach(r=>{var l;let p;if(c)return;let v=(l=`${i}, namespace`,p=null,ie(r?.methods)?ie(r?.events)||(p=index_es_U("UNSUPPORTED_EVENTS",`${l}, events should be an array of strings or empty array for no events`)):p=index_es_U("UNSUPPORTED_METHODS",`${l}, methods should be an array of strings or empty array for no methods`),p);v&&(c=v)}),c}function un(r,i){let c=null;if(r&&B(r)){let l;let p=ce(r,i);p&&(c=p);let v=(l=null,Object.values(r).forEach(r=>{var c,p;let v;if(l)return;let _=(c=r?.accounts,p=`${i} namespace`,v=null,k(c)?c.forEach(r=>{v||function(r){if(h(r,!1)&&r.includes(":")){let i=r.split(":");if(3===i.length){let r=i[0]+":"+i[1];return!!i[2]&&V(r)}}return!1}(r)||(v=index_es_U("UNSUPPORTED_ACCOUNTS",`${p}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):v=index_es_U("UNSUPPORTED_ACCOUNTS",`${p}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),v);_&&(l=_)}),l);v&&(c=v)}else c=N("MISSING_OR_INVALID",`${i}, namespaces should be an object with data`);return c}function ln(r){return h(r.protocol,!0)}function Ht(r){return"u">typeof r}function zt(r,i){return!(!V(i)||!(function(r){let i=[];return Object.values(r).forEach(r=>{i.push(...A(r.accounts))}),i})(r).includes(i))}function dn(r,i,c){let l=null,p=function(r){let i={};return Object.keys(r).forEach(c=>{var l;c.includes(":")?i[c]=r[c]:null==(l=r[c].chains)||l.forEach(l=>{i[l]={methods:r[c].methods,events:r[c].events}})}),i}(r),v=function(r){let i={};return Object.keys(r).forEach(c=>{if(c.includes(":"))i[c]=r[c];else{let l=A(r[c].accounts);l?.forEach(l=>{i[l]={accounts:r[c].accounts.filter(r=>r.includes(`${l}:`)),methods:r[c].methods,events:r[c].events}})}}),i}(i),_=Object.keys(p),E=Object.keys(v),P=fn(Object.keys(r)),q=fn(Object.keys(i)),z=P.filter(r=>!q.includes(r));return z.length&&(l=N("NON_CONFORMING_NAMESPACES",`${c} namespaces keys don't satisfy requiredNamespaces.
      Required: ${z.toString()}
      Received: ${Object.keys(i).toString()}`)),O(_,E)||(l=N("NON_CONFORMING_NAMESPACES",`${c} namespaces chains don't satisfy required namespaces.
      Required: ${_.toString()}
      Approved: ${E.toString()}`)),Object.keys(i).forEach(r=>{if(!r.includes(":")||l)return;let p=A(i[r].accounts);p.includes(r)||(l=N("NON_CONFORMING_NAMESPACES",`${c} namespaces accounts don't satisfy namespace accounts for ${r}
        Required: ${r}
        Approved: ${p.toString()}`))}),_.forEach(r=>{l||(O(p[r].methods,v[r].methods)?O(p[r].events,v[r].events)||(l=N("NON_CONFORMING_NAMESPACES",`${c} namespaces events don't satisfy namespace events for ${r}`)):l=N("NON_CONFORMING_NAMESPACES",`${c} namespaces methods don't satisfy namespace methods for ${r}`))}),l}function fn(r){return[...new Set(r.map(r=>r.includes(":")?r.split(":")[0]:r))]}function er(){let r=T();return new Promise(i=>{switch(r){case em.browser:i(D()&&navigator?.onLine);break;case em.reactNative:i(mn());break;case em.node:default:i(!0)}})}async function mn(){if(C()&&"u">typeof c.g&&null!=c.g&&c.g.NetInfo){let r=await (null==c.g?void 0:c.g.NetInfo.fetch());return r?.isConnected}return!0}let eS={};let tr=class tr{static get(r){return eS[r]}static set(r,i){eS[r]=i}static delete(r){delete eS[r]}};let eP=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,eR=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,eO=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(r,i){if("__proto__"===r||"constructor"===r&&i&&"object"==typeof i&&"prototype"in i){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`);return}return i}function destr(r,i={}){if("string"!=typeof r)return r;let c=r.trim();if('"'===r[0]&&'"'===r.at(-1)&&!r.includes("\\"))return c.slice(1,-1);if(c.length<=9){let r=c.toLowerCase();if("true"===r)return!0;if("false"===r)return!1;if("undefined"===r)return;if("null"===r)return null;if("nan"===r)return Number.NaN;if("infinity"===r)return Number.POSITIVE_INFINITY;if("-infinity"===r)return Number.NEGATIVE_INFINITY}if(!eO.test(r)){if(i.strict)throw SyntaxError("[destr] Invalid JSON");return r}try{if(eP.test(r)||eR.test(r)){if(i.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(r,jsonParseTransform)}return JSON.parse(r)}catch(c){if(i.strict)throw c;return r}}var eN=c(48764).Buffer;function asyncCall(r,...i){try{var c;return(c=r(...i))&&"function"==typeof c.then?c:Promise.resolve(c)}catch(r){return Promise.reject(r)}}function stringify(r){if(function(r){let i=typeof r;return null===r||"object"!==i&&"function"!==i}(r))return String(r);if(function(r){let i=Object.getPrototypeOf(r);return!i||i.isPrototypeOf(Object)}(r)||Array.isArray(r))return JSON.stringify(r);if("function"==typeof r.toJSON)return stringify(r.toJSON());throw Error("[unstorage] Cannot stringify value!")}let eC="base64:";function normalizeKey(r){return r?r.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function unstorage_8581f561_normalizeBaseKey(r){return(r=normalizeKey(r))?r+":":""}let memory=()=>{let r=new Map;return{name:"memory",options:{},hasItem:i=>r.has(i),getItem:i=>r.get(i)??null,getItemRaw:i=>r.get(i)??null,setItem(i,c){r.set(i,c)},setItemRaw(i,c){r.set(i,c)},removeItem(i){r.delete(i)},getKeys:()=>Array.from(r.keys()),clear(){r.clear()},dispose(){r.clear()}}};function watch(r,i,c){return r.watch?r.watch((r,l)=>i(r,c+l)):()=>{}}async function dispose(r){"function"==typeof r.dispose&&await asyncCall(r.dispose)}function promisifyRequest(r){return new Promise((i,c)=>{r.oncomplete=r.onsuccess=()=>i(r.result),r.onabort=r.onerror=()=>c(r.error)})}function createStore(r,i){let c=indexedDB.open(r);c.onupgradeneeded=()=>c.result.createObjectStore(i);let l=promisifyRequest(c);return(r,c)=>l.then(l=>c(l.transaction(i,r).objectStore(i)))}function defaultGetStore(){return l||(l=createStore("keyval-store","keyval")),l}function get(r,i=defaultGetStore()){return i("readonly",i=>promisifyRequest(i.get(r)))}function esm_safeJsonParse(r){if("string"!=typeof r)throw Error(`Cannot safe json parse value of type ${typeof r}`);try{return JSON.parse(r)}catch(i){return r}}function safeJsonStringify(r){return"string"==typeof r?r:JSON.stringify(r)}var index_es_z=(r={})=>{let i;let c=r.base&&r.base.length>0?`${r.base}:`:"",e=r=>c+r;return r.dbName&&r.storeName&&(i=createStore(r.dbName,r.storeName)),{name:"idb-keyval",options:r,hasItem:async r=>!(typeof await get(e(r),i)>"u"),getItem:async r=>await get(e(r),i)??null,setItem:(r,c)=>(function(r,i,c=defaultGetStore()){return c("readwrite",c=>(c.put(i,r),promisifyRequest(c.transaction)))})(e(r),c,i),removeItem:r=>(function(r,i=defaultGetStore()){return i("readwrite",i=>(i.delete(r),promisifyRequest(i.transaction)))})(e(r),i),getKeys:()=>(function(r=defaultGetStore()){return r("readonly",r=>{var i;if(r.getAllKeys)return promisifyRequest(r.getAllKeys());let c=[];return(i=r=>c.push(r.key),r.openCursor().onsuccess=function(){this.result&&(i(this.result),this.result.continue())},promisifyRequest(r.transaction)).then(()=>c)})})(i),clear:()=>(function(r=defaultGetStore()){return r("readwrite",r=>(r.clear(),promisifyRequest(r.transaction)))})(i)}};let index_es_=class index_es_{constructor(){this.indexedDb=function(r={}){let i={mounts:{"":r.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=r=>{for(let c of i.mountpoints)if(r.startsWith(c))return{base:c,relativeKey:r.slice(c.length),driver:i.mounts[c]};return{base:"",relativeKey:r,driver:i.mounts[""]}},getMounts=(r,c)=>i.mountpoints.filter(i=>i.startsWith(r)||c&&r.startsWith(i)).map(c=>({relativeBase:r.length>c.length?r.slice(c.length):void 0,mountpoint:c,driver:i.mounts[c]})),onChange=(r,c)=>{if(i.watching)for(let l of(c=normalizeKey(c),i.watchListeners))l(r,c)},startWatch=async()=>{if(!i.watching)for(let r in i.watching=!0,i.mounts)i.unwatch[r]=await watch(i.mounts[r],onChange,r)},stopWatch=async()=>{if(i.watching){for(let r in i.unwatch)await i.unwatch[r]();i.unwatch={},i.watching=!1}},runBatch=(r,i,c)=>{let l=new Map,getBatch=r=>{let i=l.get(r.base);return i||(i={driver:r.driver,base:r.base,items:[]},l.set(r.base,i)),i};for(let c of r){let r="string"==typeof c,l=normalizeKey(r?c:c.key),p=r?void 0:c.value,v=r||!c.options?i:{...i,...c.options},_=getMount(l);getBatch(_).items.push({key:l,value:p,relativeKey:_.relativeKey,options:v})}return Promise.all([...l.values()].map(r=>c(r))).then(r=>r.flat())},c={hasItem(r,i={}){r=normalizeKey(r);let{relativeKey:c,driver:l}=getMount(r);return asyncCall(l.hasItem,c,i)},getItem(r,i={}){r=normalizeKey(r);let{relativeKey:c,driver:l}=getMount(r);return asyncCall(l.getItem,c,i).then(r=>destr(r))},getItems:(r,i)=>runBatch(r,i,r=>r.driver.getItems?asyncCall(r.driver.getItems,r.items.map(r=>({key:r.relativeKey,options:r.options})),i).then(i=>i.map(i=>({key:function(...r){return normalizeKey(r.join(":"))}(r.base,i.key),value:destr(i.value)}))):Promise.all(r.items.map(i=>asyncCall(r.driver.getItem,i.relativeKey,i.options).then(r=>({key:i.key,value:destr(r)}))))),getItemRaw(r,i={}){r=normalizeKey(r);let{relativeKey:c,driver:l}=getMount(r);return l.getItemRaw?asyncCall(l.getItemRaw,c,i):asyncCall(l.getItem,c,i).then(r=>"string"==typeof r&&r.startsWith(eC)?eN.from(r.slice(eC.length),"base64"):r)},async setItem(r,i,l={}){if(void 0===i)return c.removeItem(r);r=normalizeKey(r);let{relativeKey:p,driver:v}=getMount(r);v.setItem&&(await asyncCall(v.setItem,p,stringify(i),l),v.watch||onChange("update",r))},async setItems(r,i){await runBatch(r,i,async r=>{r.driver.setItems&&await asyncCall(r.driver.setItems,r.items.map(r=>({key:r.relativeKey,value:stringify(r.value),options:r.options})),i),r.driver.setItem&&await Promise.all(r.items.map(i=>asyncCall(r.driver.setItem,i.relativeKey,stringify(i.value),i.options)))})},async setItemRaw(r,i,l={}){if(void 0===i)return c.removeItem(r,l);r=normalizeKey(r);let{relativeKey:p,driver:v}=getMount(r);if(v.setItemRaw)await asyncCall(v.setItemRaw,p,i,l);else{if(!v.setItem)return;await asyncCall(v.setItem,p,function(r){if("string"==typeof r)return r;let i=eN.from(r).toString("base64");return eC+i}(i),l)}v.watch||onChange("update",r)},async removeItem(r,i={}){"boolean"==typeof i&&(i={removeMeta:i}),r=normalizeKey(r);let{relativeKey:c,driver:l}=getMount(r);l.removeItem&&(await asyncCall(l.removeItem,c,i),(i.removeMeta||i.removeMata)&&await asyncCall(l.removeItem,c+"$",i),l.watch||onChange("remove",r))},async getMeta(r,i={}){"boolean"==typeof i&&(i={nativeOnly:i}),r=normalizeKey(r);let{relativeKey:c,driver:l}=getMount(r),p=Object.create(null);if(l.getMeta&&Object.assign(p,await asyncCall(l.getMeta,c,i)),!i.nativeOnly){let r=await asyncCall(l.getItem,c+"$",i).then(r=>destr(r));r&&"object"==typeof r&&("string"==typeof r.atime&&(r.atime=new Date(r.atime)),"string"==typeof r.mtime&&(r.mtime=new Date(r.mtime)),Object.assign(p,r))}return p},setMeta(r,i,c={}){return this.setItem(r+"$",i,c)},removeMeta(r,i={}){return this.removeItem(r+"$",i)},async getKeys(r,i={}){r=unstorage_8581f561_normalizeBaseKey(r);let c=getMounts(r,!0),l=[],p=[];for(let r of c){let c=await asyncCall(r.driver.getKeys,r.relativeBase,i),v=c.map(i=>r.mountpoint+normalizeKey(i)).filter(r=>!l.some(i=>r.startsWith(i)));p.push(...v),l=[r.mountpoint,...l.filter(i=>!i.startsWith(r.mountpoint))]}return r?p.filter(i=>i.startsWith(r)&&!i.endsWith("$")):p.filter(r=>!r.endsWith("$"))},async clear(r,i={}){r=unstorage_8581f561_normalizeBaseKey(r),await Promise.all(getMounts(r,!1).map(async r=>{if(r.driver.clear)return asyncCall(r.driver.clear,r.relativeBase,i);if(r.driver.removeItem){let c=await r.driver.getKeys(r.relativeBase||"",i);return Promise.all(c.map(c=>r.driver.removeItem(c,i)))}}))},async dispose(){await Promise.all(Object.values(i.mounts).map(r=>dispose(r)))},watch:async r=>(await startWatch(),i.watchListeners.push(r),async()=>{i.watchListeners=i.watchListeners.filter(i=>i!==r),0===i.watchListeners.length&&await stopWatch()}),async unwatch(){i.watchListeners=[],await stopWatch()},mount(r,l){if((r=unstorage_8581f561_normalizeBaseKey(r))&&i.mounts[r])throw Error(`already mounted at ${r}`);return r&&(i.mountpoints.push(r),i.mountpoints.sort((r,i)=>i.length-r.length)),i.mounts[r]=l,i.watching&&Promise.resolve(watch(l,onChange,r)).then(c=>{i.unwatch[r]=c}).catch(console.error),c},async unmount(r,c=!0){(r=unstorage_8581f561_normalizeBaseKey(r))&&i.mounts[r]&&(i.watching&&r in i.unwatch&&(i.unwatch[r](),delete i.unwatch[r]),c&&await dispose(i.mounts[r]),i.mountpoints=i.mountpoints.filter(i=>i!==r),delete i.mounts[r])},getMount(r=""){r=normalizeKey(r)+":";let i=getMount(r);return{driver:i.driver,base:i.base}},getMounts(r="",i={}){r=normalizeKey(r);let c=getMounts(r,i.parents);return c.map(r=>({driver:r.driver,base:r.mountpoint}))}};return c}({driver:index_es_z({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(r=>[r.key,r.value])}async getItem(r){let i=await this.indexedDb.getItem(r);if(null!==i)return i}async setItem(r,i){await this.indexedDb.setItem(r,safeJsonStringify(i))}async removeItem(r){await this.indexedDb.removeItem(r)}};var eA="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof c.g?c.g:"u">typeof self?self:{},ej={exports:{}};function index_es_k(r){var i;return[r[0],esm_safeJsonParse(null!=(i=r[1])?i:"")]}!function(){function t(){}t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,i){this[r]=String(i)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){let r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof eA&&eA.localStorage?ej.exports=eA.localStorage:"u">typeof window&&window.localStorage?ej.exports=window.localStorage:ej.exports=new t}();let index_es_K=class index_es_K{constructor(){this.localStorage=ej.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(index_es_k)}async getItem(r){let i=this.localStorage.getItem(r);if(null!==i)return esm_safeJsonParse(i)}async setItem(r,i){this.localStorage.setItem(r,safeJsonStringify(i))}async removeItem(r){this.localStorage.removeItem(r)}};let index_es_O=async(r,i,c)=>{let l="wc_storage_version",p=await i.getItem(l);if(p&&p>=1){c(i);return}let v=await r.getKeys();if(!v.length){c(i);return}let _=[];for(;v.length;){let c=v.shift();if(!c)continue;let l=c.toLowerCase();if(l.includes("wc@")||l.includes("walletconnect")||l.includes("wc_")||l.includes("wallet_connect")){let l=await r.getItem(c);await i.setItem(c,l),_.push(c)}}await i.setItem(l,1),c(i),j(r,_)},j=async(r,i)=>{i.length&&i.forEach(async i=>{await r.removeItem(i)})};let index_es_h=class index_es_h{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};let r=new index_es_K;this.storage=r;try{let i=new index_es_;index_es_O(r,i,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(r){return await this.initialize(),this.storage.getItem(r)}async setItem(r,i){return await this.initialize(),this.storage.setItem(r,i)}async removeItem(r){return await this.initialize(),this.storage.removeItem(r)}async initialize(){this.initialized||await new Promise(r=>{let i=setInterval(()=>{this.initialized&&(clearInterval(i),r())},20)})}};var eT=c(90772),eL=c(9107),eD=c(38200);let n=class n extends eD.q{constructor(r){super(),this.opts=r,this.protocol="wc",this.version=2}};let dist_index_es_h=class dist_index_es_h extends eD.q{constructor(r,i){super(),this.core=r,this.logger=i,this.records=new Map}};let a=class a{constructor(r,i){this.logger=r,this.core=i}};let u=class u extends eD.q{constructor(r,i){super(),this.relayer=r,this.logger=i}};let g=class g extends eD.q{constructor(r){super()}};let index_es_p=class index_es_p{constructor(r,i,c,l){this.core=r,this.logger=i,this.name=c}};let d=class d extends eD.q{constructor(r,i){super(),this.relayer=r,this.logger=i}};let index_es_E=class index_es_E extends eD.q{constructor(r,i){super(),this.core=r,this.logger=i}};let index_es_y=class index_es_y{constructor(r,i){this.projectId=r,this.logger=i}};let b=class b{constructor(r){this.opts=r,this.protocol="wc",this.version=2}};let index_es_S=class index_es_S{constructor(r){this.client=r}};let JSONStringify=r=>JSON.stringify(r,(r,i)=>"bigint"==typeof i?i.toString()+"n":i),JSONParse=r=>{let i=r.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(i,(r,i)=>{let c="string"==typeof i&&i.match(/^\d+n$/);return c?BigInt(i.substring(0,i.length-1)):i})};var ek=c(31050);let ez="base64url",eM="base58btc";var eU=c(20605),e$=c(92263),eH=c(52217);function encodeJSON(r){return(0,e$.B)((0,eH.m)(safeJsonStringify(r),"utf8"),ez)}function encodeIss(r){let i=(0,eH.m)("K36",eM),c="z"+(0,e$.B)((0,eU.z)([i,r]),eM);return["did","key",c].join(":")}function generateKeyPair(r=(0,P.randomBytes)(32)){return ek._w(r)}async function signJWT(r,i,c,l,p=(0,J.fromMiliseconds)(Date.now())){var v,_,E;let P={alg:"EdDSA",typ:"JWT"},q=encodeIss(l.publicKey),z={iss:q,sub:r,aud:i,iat:p,exp:p+c},M=(v={header:P,payload:z},(0,eH.m)([encodeJSON(v.header),encodeJSON(v.payload)].join("."),"utf8")),U=ek.Xx(l.secretKey,M);return[encodeJSON((_={header:P,payload:z,signature:U}).header),encodeJSON(_.payload),(E=_.signature,(0,e$.B)(E,ez))].join(".")}c(43014);let eK="INTERNAL_ERROR",eB="SERVER_ERROR",eV=[-32700,-32600,-32601,-32602,-32603],eF={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[eK]:{code:-32603,message:"Internal error"},[eB]:{code:-32e3,message:"Server error"}};function getError(r){return Object.keys(eF).includes(r)?eF[r]:eF[eB]}function parseConnectionError(r,i,c){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${c} RPC url at ${i}`):r}var eG=c(1468);function payloadId(r=3){let i=Date.now()*Math.pow(10,r);return i+Math.floor(Math.random()*Math.pow(10,r))}function getBigIntRpcId(r=6){return BigInt(payloadId(r))}function formatJsonRpcRequest(r,i,c){return{id:c||payloadId(),jsonrpc:"2.0",method:r,params:i}}function formatJsonRpcResult(r,i){return{id:r,jsonrpc:"2.0",result:i}}function formatJsonRpcError(r,i,c){var l,p;return{id:r,jsonrpc:"2.0",error:void 0===(l=i)?getError(eK):("string"==typeof l&&(l=Object.assign(Object.assign({},getError(eB)),{message:l})),void 0!==c&&(l.data=c),p=l.code,eV.includes(p)&&(l=function(r){let i=Object.values(eF).find(i=>i.code===r);return i||eF[eB]}(l.code)),l)}}let misc_IEvents=class misc_IEvents{};let IBaseJsonRpcProvider=class IBaseJsonRpcProvider extends misc_IEvents{constructor(){super()}};let IJsonRpcProvider=class IJsonRpcProvider extends IBaseJsonRpcProvider{constructor(r){super()}};function matchRegexProtocol(r,i){let c=function(r){let i=r.match(RegExp(/^\w+:/,"gi"));if(i&&i.length)return i[0]}(r);return void 0!==c&&new RegExp(i).test(c)}function isHttpUrl(r){return matchRegexProtocol(r,"^https?:")}function isWsUrl(r){return matchRegexProtocol(r,"^wss?:")}function isJsonRpcPayload(r){return"object"==typeof r&&"id"in r&&"jsonrpc"in r&&"2.0"===r.jsonrpc}function isJsonRpcRequest(r){return isJsonRpcPayload(r)&&"method"in r}function isJsonRpcResponse(r){return isJsonRpcPayload(r)&&(isJsonRpcResult(r)||isJsonRpcError(r))}function isJsonRpcResult(r){return"result"in r}function isJsonRpcError(r){return"error"in r}let JsonRpcProvider=class JsonRpcProvider extends IJsonRpcProvider{constructor(r){super(r),this.events=new p.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(r),this.connection.connected&&this.registerEventListeners()}async connect(r=this.connection){await this.open(r)}async disconnect(){await this.close()}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}async request(r,i){return this.requestStrict(formatJsonRpcRequest(r.method,r.params||[],r.id||getBigIntRpcId().toString()),i)}async requestStrict(r,i){return new Promise(async(c,l)=>{if(!this.connection.connected)try{await this.open()}catch(r){l(r)}this.events.on(`${r.id}`,r=>{isJsonRpcError(r)?l(r.error):c(r.result)});try{await this.connection.send(r,i)}catch(r){l(r)}})}setConnection(r=this.connection){return r}onPayload(r){this.events.emit("payload",r),isJsonRpcResponse(r)?this.events.emit(`${r.id}`,r):this.events.emit("message",{type:r.method,data:r.params})}onClose(r){r&&3e3===r.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${r.code} ${r.reason?`(${r.reason})`:""}`)),this.events.emit("disconnect")}async open(r=this.connection){this.connection===r&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof r&&(await this.connection.open(r),r=this.connection),this.connection=this.setConnection(r),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",r=>this.onPayload(r)),this.connection.on("close",r=>this.onClose(r)),this.connection.on("error",r=>this.events.emit("error",r)),this.connection.on("register_error",r=>this.onClose()),this.hasRegisteredEventListeners=!0)}};let esm_JSONStringify=r=>JSON.stringify(r,(r,i)=>"bigint"==typeof i?i.toString()+"n":i),esm_JSONParse=r=>{let i=r.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(i,(r,i)=>{let c="string"==typeof i&&i.match(/^\d+n$/);return c?BigInt(i.substring(0,i.length-1)):i})},index_es_b=()=>"u">typeof WebSocket||"u">typeof c.g&&"u">typeof c.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,index_es_a=r=>r.split("?")[0],eJ="u">typeof WebSocket?WebSocket:"u">typeof c.g&&"u">typeof c.g.WebSocket?c.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:c(72030);let f=class f{constructor(r){if(this.url=r,this.events=new p.EventEmitter,this.registering=!1,!isWsUrl(r))throw Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}async open(r=this.url){await this.register(r)}async close(){return new Promise((r,i)=>{if(typeof this.socket>"u"){i(Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),r()},this.socket.close()})}async send(r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send("string"==typeof r?r:esm_JSONStringify(r)||"")}catch(i){this.onError(r.id,i)}}register(r=this.url){if(!isWsUrl(r))throw Error(`Provided URL is not compatible with WebSocket connection: ${r}`);if(this.registering){let r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((r,i)=>{this.events.once("register_error",r=>{this.resetMaxListeners(),i(r)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=r,this.registering=!0,new Promise((i,c)=>{let l=new URLSearchParams(r).get("origin"),p=(0,eG.isReactNative)()?{headers:{origin:l}}:{rejectUnauthorized:!RegExp("wss?://localhost(:d{2,5})?").test(r)},v=new eJ(r,[],p);index_es_b()?v.onerror=r=>{c(this.emitError(r.error))}:v.on("error",r=>{c(this.emitError(r))}),v.onopen=()=>{this.onOpen(v),i(v)}})}onOpen(r){r.onmessage=r=>this.onPayload(r),r.onclose=r=>this.onClose(r),this.socket=r,this.registering=!1,this.events.emit("open")}onClose(r){this.socket=void 0,this.registering=!1,this.events.emit("close",r)}onPayload(r){if(typeof r.data>"u")return;let i="string"==typeof r.data?function(r){if("string"!=typeof r)throw Error(`Cannot safe json parse value of type ${typeof r}`);try{return esm_JSONParse(r)}catch(i){return r}}(r.data):r.data;this.events.emit("payload",i)}onError(r,i){let c=this.parseError(i),l=c.message||c.toString(),p=formatJsonRpcError(r,l);this.events.emit("payload",p)}parseError(r,i=this.url){return parseConnectionError(r,index_es_a(i),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(r){let i=this.parseError(Error(r?.message||`WebSocket connection failed for host: ${index_es_a(this.url)}`));return this.events.emit("register_error",i),i}};var eW=c(72307),eY=c.n(eW),eZ=c(34155),ji=function(r,i){if(r.length>=255)throw TypeError("Alphabet too long");for(var c=new Uint8Array(256),l=0;l<c.length;l++)c[l]=255;for(var p=0;p<r.length;p++){var v=r.charAt(p),_=v.charCodeAt(0);if(255!==c[_])throw TypeError(v+" is ambiguous");c[_]=p}var E=r.length,P=r.charAt(0),q=Math.log(E)/Math.log(256),z=Math.log(256)/Math.log(E);function y(r){if("string"!=typeof r)throw TypeError("Expected String");if(0===r.length)return new Uint8Array;var i=0;if(" "!==r[0]){for(var l=0,p=0;r[i]===P;)l++,i++;for(var v=(r.length-i)*q+1>>>0,_=new Uint8Array(v);r[i];){var z=c[r.charCodeAt(i)];if(255===z)return;for(var M=0,U=v-1;(0!==z||M<p)&&-1!==U;U--,M++)z+=E*_[U]>>>0,_[U]=z%256>>>0,z=z/256>>>0;if(0!==z)throw Error("Non-zero carry");p=M,i++}if(" "!==r[i]){for(var J=v-p;J!==v&&0===_[J];)J++;for(var Q=new Uint8Array(l+(v-J)),X=l;J!==v;)Q[X++]=_[J++];return Q}}}return{encode:function(i){if(i instanceof Uint8Array||(ArrayBuffer.isView(i)?i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength):Array.isArray(i)&&(i=Uint8Array.from(i))),!(i instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===i.length)return"";for(var c=0,l=0,p=0,v=i.length;p!==v&&0===i[p];)p++,c++;for(var _=(v-p)*z+1>>>0,q=new Uint8Array(_);p!==v;){for(var M=i[p],U=0,J=_-1;(0!==M||U<l)&&-1!==J;J--,U++)M+=256*q[J]>>>0,q[J]=M%E>>>0,M=M/E>>>0;if(0!==M)throw Error("Non-zero carry");l=U,p++}for(var Q=_-l;Q!==_&&0===q[Q];)Q++;for(var X=P.repeat(c);Q<_;++Q)X+=r.charAt(q[Q]);return X},decodeUnsafe:y,decode:function(r){var c=y(r);if(c)return c;throw Error(`Non-${i} character`)}}};let index_es_Ne=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw Error("Unknown type, must be binary type")},Gi=r=>new TextEncoder().encode(r),Yi=r=>new TextDecoder().decode(r);let Hi=class Hi{constructor(r,i,c){this.name=r,this.prefix=i,this.baseEncode=c}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}};let Ji=class Ji{constructor(r,i,c){if(this.name=r,this.prefix=i,void 0===i.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=i.codePointAt(0),this.baseDecode=c}decode(r){if("string"==typeof r){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(r){return index_es_Ue(this,r)}};let Wi=class Wi{constructor(r){this.decoders=r}or(r){return index_es_Ue(this,r)}decode(r){let i=r[0],c=this.decoders[i];if(c)return c.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};let index_es_Ue=(r,i)=>new Wi({...r.decoders||{[r.prefix]:r},...i.decoders||{[i.prefix]:i}});let Xi=class Xi{constructor(r,i,c,l){this.name=r,this.prefix=i,this.baseEncode=c,this.baseDecode=l,this.encoder=new Hi(r,i,c),this.decoder=new Ji(r,i,l)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};let index_es_X=({name:r,prefix:i,encode:c,decode:l})=>new Xi(r,i,c,l),index_es_B=({prefix:r,name:i,alphabet:c})=>{let{encode:l,decode:p}=ji(c,i);return index_es_X({prefix:r,name:i,encode:l,decode:r=>index_es_Ne(p(r))})},Qi=(r,i,c,l)=>{let p={};for(let r=0;r<i.length;++r)p[i[r]]=r;let v=r.length;for(;"="===r[v-1];)--v;let _=new Uint8Array(v*c/8|0),E=0,P=0,q=0;for(let i=0;i<v;++i){let v=p[r[i]];if(void 0===v)throw SyntaxError(`Non-${l} character`);P=P<<c|v,(E+=c)>=8&&(E-=8,_[q++]=255&P>>E)}if(E>=c||255&P<<8-E)throw SyntaxError("Unexpected end of data");return _},Zi=(r,i,c)=>{let l="="===i[i.length-1],p=(1<<c)-1,v="",_=0,E=0;for(let l=0;l<r.length;++l)for(E=E<<8|r[l],_+=8;_>c;)_-=c,v+=i[p&E>>_];if(_&&(v+=i[p&E<<c-_]),l)for(;v.length*c&7;)v+="=";return v},index_es_g=({name:r,prefix:i,bitsPerChar:c,alphabet:l})=>index_es_X({prefix:i,name:r,encode:r=>Zi(r,l,c),decode:i=>Qi(i,l,c,r)}),eQ=index_es_X({prefix:"\x00",name:"identity",encode:r=>Yi(r),decode:r=>Gi(r)});var eX=Object.freeze({__proto__:null,identity:eQ});let e0=index_es_g({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var e1=Object.freeze({__proto__:null,base2:e0});let e5=index_es_g({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var e6=Object.freeze({__proto__:null,base8:e5});let e2=index_es_B({prefix:"9",name:"base10",alphabet:"0123456789"});var e3=Object.freeze({__proto__:null,base10:e2});let e9=index_es_g({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),e4=index_es_g({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var e8=Object.freeze({__proto__:null,base16:e9,base16upper:e4});let e7=index_es_g({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),tn=index_es_g({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ts=index_es_g({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ta=index_es_g({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),to=index_es_g({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tc=index_es_g({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),tl=index_es_g({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),th=index_es_g({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tp=index_es_g({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var td=Object.freeze({__proto__:null,base32:e7,base32upper:tn,base32pad:ts,base32padupper:ta,base32hex:to,base32hexupper:tc,base32hexpad:tl,base32hexpadupper:th,base32z:tp});let tf=index_es_B({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tg=index_es_B({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ty=Object.freeze({__proto__:null,base36:tf,base36upper:tg});let tm=index_es_B({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),t_=index_es_B({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var tb=Object.freeze({__proto__:null,base58btc:tm,base58flickr:t_});let tw=index_es_g({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tE=index_es_g({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tI=index_es_g({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tx=index_es_g({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var tS=Object.freeze({__proto__:null,base64:tw,base64pad:tE,base64url:tI,base64urlpad:tx});let tP=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),tR=tP.reduce((r,i,c)=>(r[c]=i,r),[]),tO=tP.reduce((r,i,c)=>(r[i.codePointAt(0)]=c,r),[]),tN=index_es_X({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(r){return r.reduce((r,i)=>r+=tR[i],"")},decode:function(r){let i=[];for(let c of r){let r=tO[c.codePointAt(0)];if(void 0===r)throw Error(`Non-base256emoji character: ${c}`);i.push(r)}return new Uint8Array(i)}});var tC=Object.freeze({__proto__:null,base256emoji:tN});function index_es_$e(r,i,c){i=i||[],c=c||0;for(var l=c;r>=2147483648;)i[c++]=255&r|128,r/=128;for(;-128&r;)i[c++]=255&r|128,r>>>=7;return i[c]=0|r,index_es_$e.bytes=c-l+1,i}function index_es_he(r,i){var c,l=0,i=i||0,p=0,v=i,_=r.length;do{if(v>=_)throw index_es_he.bytes=0,RangeError("Could not decode varint");c=r[v++],l+=p<28?(127&c)<<p:(127&c)*Math.pow(2,p),p+=7}while(c>=128);return index_es_he.bytes=v-i,l}var tA={encode:index_es_$e,decode:index_es_he,encodingLength:function(r){return r<128?1:r<16384?2:r<2097152?3:r<268435456?4:r<34359738368?5:r<4398046511104?6:r<562949953421312?7:r<72057594037927940?8:r<0x7fffffffffffffff?9:10}};let index_es_Ke=(r,i,c=0)=>(tA.encode(r,i,c),i),index_es_Be=r=>tA.encodingLength(r),index_es_ce=(r,i)=>{let c=i.byteLength,l=index_es_Be(r),p=l+index_es_Be(c),v=new Uint8Array(p+c);return index_es_Ke(r,v,0),index_es_Ke(c,v,l),v.set(i,p),new index_es_tr(r,c,i,v)};let index_es_tr=class index_es_tr{constructor(r,i,c,l){this.code=r,this.size=i,this.digest=c,this.bytes=l}};let index_es_Ve=({name:r,code:i,encode:c})=>new ir(r,i,c);let ir=class ir{constructor(r,i,c){this.name=r,this.code=i,this.encode=c}digest(r){if(r instanceof Uint8Array){let i=this.encode(r);return i instanceof Uint8Array?index_es_ce(this.code,i):i.then(r=>index_es_ce(this.code,r))}throw Error("Unknown type, must be binary type")}};let index_es_qe=r=>async i=>new Uint8Array(await crypto.subtle.digest(r,i)),tj=index_es_Ve({name:"sha2-256",code:18,encode:index_es_qe("SHA-256")}),tT=index_es_Ve({name:"sha2-512",code:19,encode:index_es_qe("SHA-512")});var tL=Object.freeze({__proto__:null,sha256:tj,sha512:tT}),tD=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:index_es_Ne,digest:r=>index_es_ce(0,index_es_Ne(r))}});new TextEncoder,new TextDecoder;let tq={...eX,...e1,...e6,...e3,...e8,...td,...ty,...tb,...tS,...tC};function index_es_He(r){return null!=globalThis.Buffer?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function dist_index_es_Je(r,i,c,l){return{name:r,prefix:i,encoder:{name:r,prefix:i,encode:c},decoder:{decode:l}}}({...tL,...tD});let tk=dist_index_es_Je("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),tz=dist_index_es_Je("ascii","a",r=>{let i="a";for(let c=0;c<r.length;c++)i+=String.fromCharCode(r[c]);return i},r=>{r=r.substring(1);let i=function(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?index_es_He(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}(r.length);for(let c=0;c<r.length;c++)i[c]=r.charCodeAt(c);return i}),tM={utf8:tk,"utf-8":tk,hex:tq.base16,latin1:tz,ascii:tz,binary:tz,...tq},tU="core",t$=`wc@2:${tU}:`,tH={logger:"error"},tK={database:":memory:"},tB="client_ed25519_seed",tV=J.ONE_DAY,tF=J.SIX_HOURS,tG="wss://relay.walletconnect.com",tJ="wss://relay.walletconnect.org",tW={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},tY={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},tZ=J.ONE_SECOND,tQ={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},tX=1e3*J.FIVE_SECONDS,t0={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},t1={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},t5={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},t6={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},t2="verify-api",t3="https://verify.walletconnect.com",t9="https://verify.walletconnect.org",t4=[t3,t9];let index_es_St=class index_es_St{constructor(r,i){this.core=r,this.logger=i,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=t$,this.init=async()=>{if(!this.initialized){let r=await this.getKeyChain();"u">typeof r&&(this.keychain=r),this.initialized=!0}},this.has=r=>(this.isInitialized(),this.keychain.has(r)),this.set=async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()},this.get=r=>{this.isInitialized();let i=this.keychain.get(r);if(typeof i>"u"){let{message:i}=N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw Error(i)}return i},this.del=async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()},this.core=r,this.logger=(0,eL.generateChildLogger)(i,this.name)}get context(){return(0,eL.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(r){await this.core.storage.setItem(this.storageKey,rt(r))}async getKeyChain(){let r=await this.core.storage.getItem(this.storageKey);return"u">typeof r?ot(r):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}}};let index_es_Tt=class index_es_Tt{constructor(r,i,c){this.core=r,this.logger=i,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=r=>(this.isInitialized(),this.keychain.has(r)),this.getClientId=async()=>{this.isInitialized();let r=await this.getClientSeed(),i=generateKeyPair(r);return encodeIss(i.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let r=function(){let r=z.Au();return{privateKey:(0,M.BB)(r.secretKey,el),publicKey:(0,M.BB)(r.publicKey,el)}}();return this.setPrivateKey(r.publicKey,r.privateKey)},this.signJWT=async r=>{this.isInitialized();let i=await this.getClientSeed(),c=generateKeyPair(i),l=Vn();return await signJWT(l,r,tV,c)},this.generateSharedKey=(r,i,c)=>{this.isInitialized();let l=this.getPrivateKey(r),p=function(r,i){let c=z.gi((0,M.mL)(r,el),(0,M.mL)(i,el),!0),l=new E.t(q.mE,c).expand(32);return(0,M.BB)(l,el)}(l,i);return this.setSymKey(p,c)},this.setSymKey=async(r,i)=>{this.isInitialized();let c=i||function(r){let i=(0,q.vp)((0,M.mL)(r,el));return(0,M.BB)(i,el)}(r);return await this.keychain.set(c,r),c},this.deleteKeyPair=async r=>{this.isInitialized(),await this.keychain.del(r)},this.deleteSymKey=async r=>{this.isInitialized(),await this.keychain.del(r)},this.encode=async(r,i,c)=>{this.isInitialized();let l=Te(c),p="string"==typeof i?i:JSONStringify(i)||"";if(qn(l)){let i=l.senderPublicKey,c=l.receiverPublicKey;r=await this.generateSharedKey(i,c)}let v=this.getSymKey(r),{type:E,senderPublicKey:q}=l;return function(r){var i;let c=(i="u">typeof r.type?r.type:0,(0,M.mL)(`${i}`,ec));if(1===$(c)&&typeof r.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let l="u">typeof r.senderPublicKey?(0,M.mL)(r.senderPublicKey,el):void 0,p="u">typeof r.iv?(0,M.mL)(r.iv,el):(0,P.randomBytes)(12),v=new _.OK((0,M.mL)(r.symKey,el)).seal(p,(0,M.mL)(r.message,ep));return function(r){if(1===$(r.type)){if(typeof r.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return(0,M.BB)((0,M.zo)([r.type,r.senderPublicKey,r.iv,r.sealed]),eh)}return(0,M.BB)((0,M.zo)([r.type,r.iv,r.sealed]),eh)}({type:c,sealed:v,iv:p,senderPublicKey:l})}({type:E,symKey:v,message:p,senderPublicKey:q})},this.decode=async(r,i,c)=>{this.isInitialized();let l=function(r,i){let c=ee(r);return Te({type:$(c.type),senderPublicKey:"u">typeof c.senderPublicKey?(0,M.BB)(c.senderPublicKey,el):void 0,receiverPublicKey:i?.receiverPublicKey})}(i,c);if(qn(l)){let i=l.receiverPublicKey,c=l.senderPublicKey;r=await this.generateSharedKey(i,c)}try{let c=this.getSymKey(r),l=function(r){let i=new _.OK((0,M.mL)(r.symKey,el)),{sealed:c,iv:l}=ee(r.encoded),p=i.open(l,c);if(null===p)throw Error("Failed to decrypt");return(0,M.BB)(p,ep)}({symKey:c,encoded:i});return function(r){if("string"!=typeof r)throw Error(`Cannot safe json parse value of type ${typeof r}`);try{return JSONParse(r)}catch(i){return r}}(l)}catch(i){this.logger.error(`Failed to decode message from topic: '${r}', clientId: '${await this.getClientId()}'`),this.logger.error(i)}},this.getPayloadType=r=>{let i=ee(r);return $(i.type)},this.getPayloadSenderPublicKey=r=>{let i=ee(r);return i.senderPublicKey?(0,M.BB)(i.senderPublicKey,el):void 0},this.core=r,this.logger=(0,eL.generateChildLogger)(i,this.name),this.keychain=c||new index_es_St(this.core,this.logger)}get context(){return(0,eL.getLoggerContext)(this.logger)}async setPrivateKey(r,i){return await this.keychain.set(r,i),r}getPrivateKey(r){return this.keychain.get(r)}async getClientSeed(){let r="";try{r=this.keychain.get(tB)}catch{r=Vn(),await this.keychain.set(tB,r)}return function(r,i="utf8"){let c=tM[i];if(!c)throw Error(`Unsupported encoding "${i}"`);return("utf8"===i||"utf-8"===i)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?index_es_He(globalThis.Buffer.from(r,"utf-8")):c.decoder.decode(`${c.prefix}${r}`)}(r,"base16")}getSymKey(r){return this.keychain.get(r)}isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}}};let index_es_Pt=class index_es_Pt extends a{constructor(r,i){super(r,i),this.logger=r,this.core=i,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=t$,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let r=await this.getRelayerMessages();"u">typeof r&&(this.messages=r),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}},this.set=async(r,i)=>{this.isInitialized();let c=Ln(i),l=this.messages.get(r);return typeof l>"u"&&(l={}),"u">typeof l[c]||(l[c]=i,this.messages.set(r,l),await this.persist()),c},this.get=r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i},this.has=(r,i)=>{this.isInitialized();let c=this.get(r),l=Ln(i);return"u">typeof c[l]},this.del=async r=>{this.isInitialized(),this.messages.delete(r),await this.persist()},this.logger=(0,eL.generateChildLogger)(r,this.name),this.core=i}get context(){return(0,eL.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(r){await this.core.storage.setItem(this.storageKey,rt(r))}async getRelayerMessages(){let r=await this.core.storage.getItem(this.storageKey);return"u">typeof r?ot(r):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}}};let mr=class mr extends u{constructor(r,i){super(r,i),this.relayer=r,this.logger=i,this.events=new p.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,J.toMiliseconds)(J.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(r,i,c)=>{var l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:c}});try{let p=c?.ttl||tF,v=vt(c),_=c?.prompt||!1,E=c?.tag||0,P=c?.id||getBigIntRpcId().toString(),q={topic:r,message:i,opts:{ttl:p,relay:v,prompt:_,tag:E,id:P}},z=setTimeout(()=>this.queue.set(P,q),this.publishTimeout);try{await await ut(this.rpcPublish(r,i,p,v,_,E,P),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(P),this.relayer.events.emit(tW.publish,q)}catch(r){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(l=c?.internal)&&l.throwOnFailedPublish)throw this.removeRequestFromQueue(P),r;return}finally{clearTimeout(z)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:c}})}catch(r){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(r),r}},this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.relayer=r,this.logger=(0,eL.generateChildLogger)(i,this.name),this.registerEventListeners()}get context(){return(0,eL.getLoggerContext)(this.logger)}rpcPublish(r,i,c,l,p,v,_){var E,P,q,z;let M={method:Et(l.protocol).publish,params:{topic:r,message:i,ttl:c,prompt:p,tag:v},id:_};return w(null==(E=M.params)?void 0:E.prompt)&&(null==(P=M.params)||delete P.prompt),w(null==(q=M.params)?void 0:q.tag)&&(null==(z=M.params)||delete z.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:M}),this.relayer.request(M)}removeRequestFromQueue(r){this.queue.delete(r)}checkQueue(){this.queue.forEach(async r=>{let{topic:i,message:c,opts:l}=r;await this.publish(i,c,l)})}registerEventListeners(){this.relayer.core.heartbeat.on(eT.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tW.connection_stalled);return}this.checkQueue()}),this.relayer.on(tW.message_ack,r=>{this.removeRequestFromQueue(r.id.toString())})}};let br=class br{constructor(){this.map=new Map,this.set=(r,i)=>{let c=this.get(r);this.exists(r,i)||this.map.set(r,[...c,i])},this.get=r=>this.map.get(r)||[],this.exists=(r,i)=>this.get(r).includes(i),this.delete=(r,i)=>{if(typeof i>"u"){this.map.delete(r);return}if(!this.map.has(r))return;let c=this.get(r);if(!this.exists(r,i))return;let l=c.filter(r=>r!==i);if(!l.length){this.map.delete(r);return}this.map.set(r,l)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var t8=Object.defineProperty,t7=Object.defineProperties,rs=Object.getOwnPropertyDescriptors,ra=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,rc=Object.prototype.propertyIsEnumerable,index_es_Ot=(r,i,c)=>i in r?t8(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_q=(r,i)=>{for(var c in i||(i={}))ro.call(i,c)&&index_es_Ot(r,c,i[c]);if(ra)for(var c of ra(i))rc.call(i,c)&&index_es_Ot(r,c,i[c]);return r},index_es_De=(r,i)=>t7(r,rs(i));let index_es_At=class index_es_At extends d{constructor(r,i){super(r,i),this.relayer=r,this.logger=i,this.subscriptions=new Map,this.topicMap=new br,this.events=new p.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=t$,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(r,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{let c=vt(i),l={topic:r,relay:c};this.pending.set(r,l);let p=await this.rpcSubscribe(r,c);return this.onSubscribe(p,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}}),p}catch(r){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(r),r}},this.unsubscribe=async(r,i)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof i?.id?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)},this.isSubscribed=async r=>!!this.topics.includes(r)||await new Promise((i,c)=>{let l=new J.Watch;l.start(this.pendingSubscriptionWatchLabel);let p=setInterval(()=>{!this.pending.has(r)&&this.topics.includes(r)&&(clearInterval(p),l.stop(this.pendingSubscriptionWatchLabel),i(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=tX&&(clearInterval(p),l.stop(this.pendingSubscriptionWatchLabel),c(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=(0,eL.generateChildLogger)(i,this.name),this.clientId=""}get context(){return(0,eL.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(r,i){let c=!1;try{c=this.getSubscription(r).topic===i}catch{}return c}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(r,i){let c=this.topicMap.get(r);await Promise.all(c.map(async c=>await this.unsubscribeById(r,c,i)))}async unsubscribeById(r,i,c){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:i,opts:c}});try{let l=vt(c);await this.rpcUnsubscribe(r,i,l);let p=index_es_U("USER_DISCONNECTED",`${this.name}, ${r}`);await this.onUnsubscribe(r,i,p),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:i,opts:c}})}catch(r){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(r),r}}async rpcSubscribe(r,i){let c={method:Et(i.protocol).subscribe,params:{topic:r}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{await await ut(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tW.connection_stalled)}return Ln(r+this.clientId)}async rpcBatchSubscribe(r){if(!r.length)return;let i=r[0].relay,c={method:Et(i.protocol).batchSubscribe,params:{topics:r.map(r=>r.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{return await await ut(this.relayer.request(c),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tW.connection_stalled)}}rpcUnsubscribe(r,i,c){let l={method:Et(c.protocol).unsubscribe,params:{topic:r,id:i}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:l}),this.relayer.request(l)}onSubscribe(r,i){this.setSubscription(r,index_es_De(index_es_q({},i),{id:r})),this.pending.delete(i.topic)}onBatchSubscribe(r){r.length&&r.forEach(r=>{this.setSubscription(r.id,index_es_q({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(r,i,c){this.events.removeAllListeners(i),this.hasSubscription(i,r)&&this.deleteSubscription(i,c),await this.relayer.messages.del(r)}async setRelayerSubscriptions(r){await this.relayer.core.storage.setItem(this.storageKey,r)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(r,i){this.subscriptions.has(r)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:r,subscription:i}),this.addSubscription(r,i))}addSubscription(r,i){this.subscriptions.set(r,index_es_q({},i)),this.topicMap.set(i.topic,r),this.events.emit(tQ.created,i)}getSubscription(r){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:r});let i=this.subscriptions.get(r);if(!i){let{message:i}=N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw Error(i)}return i}deleteSubscription(r,i){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:r,reason:i});let c=this.getSubscription(r);this.subscriptions.delete(r),this.topicMap.delete(c.topic,r),this.events.emit(tQ.deleted,index_es_De(index_es_q({},c),{reason:i}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(tQ.sync)}async reset(){if(this.cached.length){let r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<r;i++){let r=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(r)}}this.events.emit(tQ.resubscribed)}async restore(){try{let r=await this.getRelayerSubscriptions();if(typeof r>"u"||!r.length)return;if(this.subscriptions.size){let{message:r}=N("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(r)}this.cached=r,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(r){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(r)}}async batchSubscribe(r){if(!r.length)return;let i=await this.rpcBatchSubscribe(r);k(i)&&this.onBatchSubscribe(i.map((i,c)=>index_es_De(index_es_q({},r[c]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;let r=[];this.pending.forEach(i=>{r.push(i)}),await this.batchSubscribe(r)}registerEventListeners(){this.relayer.core.heartbeat.on(eT.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tW.connect,async()=>{await this.onConnect()}),this.relayer.on(tW.disconnect,()=>{this.onDisconnect()}),this.events.on(tQ.created,async r=>{let i=tQ.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()}),this.events.on(tQ.deleted,async r=>{let i=tQ.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}}async restartToComplete(){this.restartInProgress&&await new Promise(r=>{let i=setInterval(()=>{this.restartInProgress||(clearInterval(i),r())},this.pollingInterval)})}};var rl=Object.defineProperty,rh=Object.getOwnPropertySymbols,rp=Object.prototype.hasOwnProperty,rd=Object.prototype.propertyIsEnumerable,index_es_Nt=(r,i,c)=>i in r?rl(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,Sr=(r,i)=>{for(var c in i||(i={}))rp.call(i,c)&&index_es_Nt(r,c,i[c]);if(rh)for(var c of rh(i))rd.call(i,c)&&index_es_Nt(r,c,i[c]);return r};let index_es_Ut=class index_es_Ut extends g{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new p.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(r){throw this.logger.debug("Failed to Publish Request"),this.logger.error(r),r}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(tW.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(tW.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(tY.payload,this.onPayloadHandler),this.provider.on(tY.connect,this.onConnectHandler),this.provider.on(tY.disconnect,this.onDisconnectHandler),this.provider.on(tY.error,this.onProviderErrorHandler)},this.core=r.core,this.logger="u">typeof r.logger&&"string"!=typeof r.logger?(0,eL.generateChildLogger)(r.logger,this.name):(0,eL.pino)((0,eL.getDefaultLoggerOptions)({level:r.logger||"error"})),this.messages=new index_es_Pt(this.logger,r.core),this.subscriber=new index_es_At(this,this.logger),this.publisher=new mr(this,this.logger),this.relayUrl=r?.relayUrl||tG,this.projectId=r.projectId,this.bundleId=function(){var r;try{return C()&&"u">typeof c.g&&"u">typeof(null==c.g?void 0:c.g.Application)?null==(r=c.g.Application)?void 0:r.applicationId:void 0}catch{return}}(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${tJ}...`),await this.restartTransport(tJ)}this.initialized=!0,setTimeout(async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},1e4)}get context(){return(0,eL.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(r,i,c){this.isInitialized(),await this.publisher.publish(r,i,c),await this.recordMessageEvent({topic:r,message:i,publishedAt:Date.now()})}async subscribe(r,i){var c;let l;this.isInitialized();let p=(null==(c=this.subscriber.topicMap.get(r))?void 0:c[0])||"";if(p)return p;let o=i=>{i.topic===r&&(this.subscriber.off(tQ.created,o),l())};return await Promise.all([new Promise(r=>{l=r,this.subscriber.on(tQ.created,o)}),new Promise(async c=>{p=await this.subscriber.subscribe(r,i),c()})]),p}async unsubscribe(r,i){this.isInitialized(),await this.subscriber.unsubscribe(r,i)}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ut(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(r){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){r&&r!==this.relayUrl&&(this.relayUrl=r,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(tQ.resubscribed,()=>{r()})}),new Promise(async(r,i)=>{try{await ut(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(r){i(r);return}r()})])}catch(r){if(this.logger.error(r),!this.isConnectionStalled(r.message))throw r;this.provider.events.emit(tY.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(r){await this.confirmOnlineStateOrThrow(),this.connectionAttemptInProgress||(this.relayUrl=r||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await er())throw Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(r){return this.staleConnectionErrors.some(i=>r.includes(i))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let r=await this.core.crypto.signJWT(this.relayUrl);this.provider=new JsonRpcProvider(new f(function({protocol:r,version:i,relayUrl:l,sdkVersion:p,auth:v,projectId:_,useOnCloseEvent:E,bundleId:P}){var q;let z;let M=l.split("?"),J=function(r,i,l){let p=function(){if(T()===em.reactNative&&"u">typeof c.g&&"u">typeof(null==c.g?void 0:c.g.Platform)){let{OS:r,Version:i}=c.g.Platform;return[r,i].join("-")}let r=(0,U.detect)();if(null===r)return"unknown";let i=r.os?r.os.replace(" ","").toLowerCase():"unknown";return"browser"===r.type?[i,r.name,r.version].join("-"):[i,r.version].join("-")}(),v=function(){var r;let i=T();return i===em.browser?[i,(null==(r=(0,Q.getLocation)())?void 0:r.host)||"unknown"].join(":"):i}();return[[r,i].join("-"),["js",l].join("-"),p,v].join("/")}(r,i,p),X=(q=M[1]||"",z=_e(_e({},z=et.parse(q)),{auth:v,ua:J,projectId:_,useOnCloseEvent:E||void 0,origin:P||void 0}),q=et.stringify(z));return M[0]+"?"+X}({sdkVersion:"2.10.6",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:r,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(r){let{topic:i,message:c}=r;await this.messages.set(i,c)}async shouldIgnoreMessageEvent(r){let{topic:i,message:c}=r;if(!c||0===c.length)return this.logger.debug(`Ignoring invalid/empty message: ${c}`),!0;if(!await this.subscriber.isSubscribed(i))return this.logger.debug(`Ignoring message for non-subscribed topic ${i}`),!0;let l=this.messages.has(i,c);return l&&this.logger.debug(`Ignoring duplicate message: ${c}`),l}async onProviderPayload(r){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:r}),isJsonRpcRequest(r)){if(!r.method.endsWith("_subscription"))return;let i=r.params,{topic:c,message:l,publishedAt:p}=i.data,v={topic:c,message:l,publishedAt:p};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Sr({type:"event",event:i.id},v)),this.events.emit(i.id,v),await this.acknowledgePayload(r),await this.onMessageEvent(v)}else isJsonRpcResponse(r)&&this.events.emit(tW.message_ack,r)}async onMessageEvent(r){await this.shouldIgnoreMessageEvent(r)||(this.events.emit(tW.message,r),await this.recordMessageEvent(r))}async acknowledgePayload(r){let i=formatJsonRpcResult(r.id,!0);await this.provider.connection.send(i)}unregisterProviderListeners(){this.provider.off(tY.payload,this.onPayloadHandler),this.provider.off(tY.connect,this.onConnectHandler),this.provider.off(tY.disconnect,this.onDisconnectHandler),this.provider.off(tY.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(tW.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let r=await er();!function(r){switch(T()){case em.browser:!C()&&D()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)));break;case em.reactNative:C()&&"u">typeof c.g&&null!=c.g&&c.g.NetInfo&&c.g?.NetInfo.addEventListener(i=>r(i?.isConnected));case em.node:}}(async i=>{this.initialized&&r!==i&&(r=i,i?await this.restartTransport().catch(r=>this.logger.error(r)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(r=>this.logger.error(r))))})}onProviderDisconnect(){this.events.emit(tW.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(r=>this.logger.error(r))},(0,J.toMiliseconds)(tZ)))}isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(r=>{let i=setInterval(()=>{this.connected&&(clearInterval(i),r())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var rg=Object.defineProperty,ry=Object.getOwnPropertySymbols,rm=Object.prototype.hasOwnProperty,r_=Object.prototype.propertyIsEnumerable,index_es_Ft=(r,i,c)=>i in r?rg(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_$t=(r,i)=>{for(var c in i||(i={}))rm.call(i,c)&&index_es_Ft(r,c,i[c]);if(ry)for(var c of ry(i))r_.call(i,c)&&index_es_Ft(r,c,i[c]);return r};let Mt=class Mt extends index_es_p{constructor(r,i,c,l=t$,p){super(r,i,c,l),this.core=r,this.logger=i,this.name=c,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=t$,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>{var i;this.getKey&&null!==r&&!w(r)?this.map.set(this.getKey(r),r):(null==(i=r?.proposer)?void 0:i.publicKey)?this.map.set(r.id,r):r?.topic&&this.map.set(r.topic,r)}),this.cached=[],this.initialized=!0)},this.set=async(r,i)=>{this.isInitialized(),this.map.has(r)?await this.update(r,i):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:r,value:i}),this.map.set(r,i),await this.persist())},this.get=r=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:r}),this.getData(r)),this.getAll=r=>(this.isInitialized(),r?this.values.filter(i=>Object.keys(r).every(c=>eY()(i[c],r[c]))):this.values),this.update=async(r,i)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:r,update:i});let c=index_es_$t(index_es_$t({},this.getData(r)),i);this.map.set(r,c),await this.persist()},this.delete=async(r,i)=>{this.isInitialized(),this.map.has(r)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:r,reason:i}),this.map.delete(r),await this.persist())},this.logger=(0,eL.generateChildLogger)(i,this.name),this.storagePrefix=l,this.getKey=p}get context(){return(0,eL.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(r){await this.core.storage.setItem(this.storageKey,r)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(r){let i=this.map.get(r);if(!i){let{message:i}=N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(i),Error(i)}return i}async persist(){await this.setDataStore(this.values)}async restore(){try{let r=await this.getDataStore();if(typeof r>"u"||!r.length)return;if(this.map.size){let{message:r}=N("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),Error(r)}this.cached=r,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(r){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(r)}}isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}}};let kt=class kt{constructor(r,i){this.core=r,this.logger=i,this.name="pairing",this.version="0.3",this.events=new(v()),this.initialized=!1,this.storagePrefix=t$,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]},this.create=async()=>{var r;this.isInitialized();let i=Vn(),c=await this.core.crypto.setSymKey(i),l=pt(J.FIVE_MINUTES),p={protocol:"irn"},v=(r={protocol:this.core.protocol,version:this.core.version,topic:c,symKey:i,relay:p},`${r.protocol}:${r.topic}@${r.version}?`+et.stringify(St({symKey:r.symKey},function(r,i="-"){let c={};return Object.keys(r).forEach(l=>{r[l]&&(c["relay"+i+l]=r[l])}),c}(r.relay))));return await this.pairings.set(c,{topic:c,expiry:l,relay:p,active:!1}),await this.core.relayer.subscribe(c),this.core.expirer.set(c,l),{topic:c,uri:v}},this.pair=async r=>{this.isInitialized(),this.isValidPair(r);let{topic:i,symKey:c,relay:l}=wt(r.uri);if(this.pairings.keys.includes(i)&&this.pairings.get(i).active)throw Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);let p=pt(J.FIVE_MINUTES),v={topic:i,relay:l,expiry:p,active:!1};return await this.pairings.set(i,v),this.core.expirer.set(i,p),r.activatePairing&&await this.activate({topic:i}),this.events.emit(t1.create,v),this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(c,i),await this.core.relayer.subscribe(i,{relay:l})),v},this.activate=async({topic:r})=>{this.isInitialized();let i=pt(J.THIRTY_DAYS);await this.pairings.update(r,{active:!0,expiry:i}),this.core.expirer.set(r,i)},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);let{topic:i}=r;if(this.pairings.keys.includes(i)){let r=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:l,reject:p}=at();this.events.once(yt("pairing_ping",r),({error:r})=>{r?p(r):l()}),await c()}},this.updateExpiry=async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})},this.updateMetadata=async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);let{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",index_es_U("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(r,i,c)=>{let l=formatJsonRpcRequest(i,c),p=await this.core.crypto.encode(r,l),v=t0[i].req;return this.core.history.set(r,l),this.core.relayer.publish(r,p,v),l.id},this.sendResult=async(r,i,c)=>{let l=formatJsonRpcResult(r,c),p=await this.core.crypto.encode(i,l),v=await this.core.history.get(i,r),_=t0[v.request.method].res;await this.core.relayer.publish(i,p,_),await this.core.history.resolve(l)},this.sendError=async(r,i,c)=>{let l=formatJsonRpcError(r,c),p=await this.core.crypto.encode(i,l),v=await this.core.history.get(i,r),_=t0[v.request.method]?t0[v.request.method].res:t0.unregistered_method.res;await this.core.relayer.publish(i,p,_),await this.core.history.resolve(l)},this.deletePairing=async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,index_es_U("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])},this.cleanup=async()=>{let r=this.pairings.getAll().filter(r=>mt(r.expiry));await Promise.all(r.map(r=>this.deletePairing(r.topic)))},this.onRelayEventRequest=r=>{let{topic:i,payload:c}=r;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(i,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,c);default:return this.onUnknownRpcMethodRequest(i,c)}},this.onRelayEventResponse=async r=>{let{topic:i,payload:c}=r,l=(await this.core.history.get(i,c.id)).request.method;return"wc_pairingPing"===l?this.onPairingPingResponse(i,c):this.onUnknownRpcMethodResponse(l)},this.onPairingPingRequest=async(r,i)=>{let{id:c}=i;try{this.isValidPing({topic:r}),await this.sendResult(c,r,!0),this.events.emit(t1.ping,{id:c,topic:r})}catch(i){await this.sendError(c,r,i),this.logger.error(i)}},this.onPairingPingResponse=(r,i)=>{let{id:c}=i;setTimeout(()=>{isJsonRpcResult(i)?this.events.emit(yt("pairing_ping",c),{}):isJsonRpcError(i)&&this.events.emit(yt("pairing_ping",c),{error:i.error})},500)},this.onPairingDeleteRequest=async(r,i)=>{let{id:c}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(t1.delete,{id:c,topic:r})}catch(i){await this.sendError(c,r,i),this.logger.error(i)}},this.onUnknownRpcMethodRequest=async(r,i)=>{let{id:c,method:l}=i;try{if(this.registeredMethods.includes(l))return;let i=index_es_U("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,r,i),this.logger.error(i)}catch(i){await this.sendError(c,r,i),this.logger.error(i)}},this.onUnknownRpcMethodResponse=r=>{this.registeredMethods.includes(r)||this.logger.error(index_es_U("WC_METHOD_UNSUPPORTED",r))},this.isValidPair=r=>{var i;if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`pair() params: ${r}`);throw Error(i)}if(!function(r){if(h(r,!1))try{return"u">typeof new URL(r)}catch{}return!1}(r.uri)){let{message:i}=N("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw Error(i)}let c=wt(r.uri);if(!(null!=(i=c?.relay)&&i.protocol)){let{message:r}=N("MISSING_OR_INVALID","pair() uri#relay-protocol");throw Error(r)}if(!(null!=c&&c.symKey)){let{message:r}=N("MISSING_OR_INVALID","pair() uri#symKey");throw Error(r)}},this.isValidPing=async r=>{if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`ping() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidPairingTopic(i)},this.isValidDisconnect=async r=>{if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async r=>{if(!h(r,!1)){let{message:i}=N("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw Error(i)}if(!this.pairings.keys.includes(r)){let{message:i}=N("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw Error(i)}if(mt(this.pairings.get(r).expiry)){await this.deletePairing(r);let{message:i}=N("EXPIRED",`pairing topic: ${r}`);throw Error(i)}},this.core=r,this.logger=(0,eL.generateChildLogger)(i,this.name),this.pairings=new Mt(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,eL.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}}registerRelayerEvents(){this.core.relayer.on(tW.message,async r=>{let{topic:i,message:c}=r;if(!this.pairings.keys.includes(i)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(c)))return;let l=await this.core.crypto.decode(i,c);try{isJsonRpcRequest(l)?(this.core.history.set(i,l),this.onRelayEventRequest({topic:i,payload:l})):isJsonRpcResponse(l)&&(await this.core.history.resolve(l),await this.onRelayEventResponse({topic:i,payload:l}),this.core.history.delete(i,l.id))}catch(r){this.logger.error(r)}})}registerExpirerEvents(){this.core.expirer.on(t6.expired,async r=>{let{topic:i}=ft(r.target);i&&this.pairings.keys.includes(i)&&(await this.deletePairing(i,!0),this.events.emit(t1.expire,{topic:i}))})}};let index_es_Kt=class index_es_Kt extends dist_index_es_h{constructor(r,i){super(r,i),this.core=r,this.logger=i,this.records=new Map,this.events=new p.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=t$,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(r,i,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:c}),this.records.has(i.id))return;let l={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:c,expiry:pt(J.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(t5.created,l)},this.resolve=async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;let i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=isJsonRpcError(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.events.emit(t5.updated,i))},this.get=async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i)),this.delete=(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(c=>{c.topic!==r||"u">typeof i&&c.id!==i||(this.records.delete(c.id),this.events.emit(t5.deleted,c))})},this.exists=async(r,i)=>(this.isInitialized(),!!this.records.has(i)&&(await this.getRecord(i)).topic===r),this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.logger=(0,eL.generateChildLogger)(i,this.name)}get context(){return(0,eL.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let r=[];return this.values.forEach(i=>{if("u">typeof i.response)return;let c={topic:i.topic,request:formatJsonRpcRequest(i.request.method,i.request.params,i.id),chainId:i.chainId};return r.push(c)}),r}async setJsonRpcRecords(r){await this.core.storage.setItem(this.storageKey,r)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(r){this.isInitialized();let i=this.records.get(r);if(!i){let{message:i}=N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw Error(i)}return i}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(t5.sync)}async restore(){try{let r=await this.getJsonRpcRecords();if(typeof r>"u"||!r.length)return;if(this.records.size){let{message:r}=N("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),Error(r)}this.cached=r,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}}registerEventListeners(){this.events.on(t5.created,r=>{let i=t5.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:r}),this.persist()}),this.events.on(t5.updated,r=>{let i=t5.updated;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:r}),this.persist()}),this.events.on(t5.deleted,r=>{let i=t5.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:r}),this.persist()}),this.core.heartbeat.on(eT.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(r=>{(0,J.toMiliseconds)(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.delete(r.topic,r.id))})}catch(r){this.logger.warn(r)}}isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}}};let index_es_Bt=class index_es_Bt extends index_es_E{constructor(r,i){super(r,i),this.core=r,this.logger=i,this.expirations=new Map,this.events=new p.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=t$,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=r=>{try{let i=this.formatTarget(r);return"u">typeof this.getExpiration(i)}catch{return!1}},this.set=(r,i)=>{this.isInitialized();let c=this.formatTarget(r),l={target:c,expiry:i};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(t6.created,{target:c,expiration:l})},this.get=r=>{this.isInitialized();let i=this.formatTarget(r);return this.getExpiration(i)},this.del=r=>{if(this.isInitialized(),this.has(r)){let i=this.formatTarget(r),c=this.getExpiration(i);this.expirations.delete(i),this.events.emit(t6.deleted,{target:i,expiration:c})}},this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.logger=(0,eL.generateChildLogger)(i,this.name)}get context(){return(0,eL.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(r){if("string"==typeof r)return re("topic",r);if("number"==typeof r)return re("id",r);let{message:i}=N("UNKNOWN_TYPE",`Target type: ${typeof r}`);throw Error(i)}async setExpirations(r){await this.core.storage.setItem(this.storageKey,r)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(t6.sync)}async restore(){try{let r=await this.getExpirations();if(typeof r>"u"||!r.length)return;if(this.expirations.size){let{message:r}=N("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),Error(r)}this.cached=r,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(r){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(r)}}getExpiration(r){let i=this.expirations.get(r);if(!i){let{message:i}=N("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(i),Error(i)}return i}checkExpiry(r,i){let{expiry:c}=i;(0,J.toMiliseconds)(c)-Date.now()<=0&&this.expire(r,i)}expire(r,i){this.expirations.delete(r),this.events.emit(t6.expired,{target:r,expiration:i})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((r,i)=>this.checkExpiry(i,r))}registerEventListeners(){this.core.heartbeat.on(eT.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(t6.created,r=>{let i=t6.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),this.persist()}),this.events.on(t6.expired,r=>{let i=t6.expired;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),this.persist()}),this.events.on(t6.deleted,r=>{let i=t6.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:r}),this.persist()})}isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}}};let index_es_Vt=class index_es_Vt extends index_es_y{constructor(r,i){super(r,i),this.projectId=r,this.logger=i,this.name=t2,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async r=>{if(this.verifyDisabled||C()||!D())return;let i=this.getVerifyUrl(r?.verifyUrl);this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(r){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(r)}if(!this.initialized){this.removeIframe(),this.verifyUrl=t9;try{await this.createIframe()}catch(r){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(r),this.verifyDisabled=!0}}},this.register=async r=>{this.initialized?this.sendPost(r.attestationId):(this.addToQueue(r.attestationId),await this.init())},this.resolve=async r=>{let i;if(this.isDevEnv)return"";let c=this.getVerifyUrl(r?.verifyUrl);try{i=await this.fetchAttestation(r.attestationId,c)}catch(l){this.logger.info(`failed to resolve attestation: ${r.attestationId} from url: ${c}`),this.logger.info(l),i=await this.fetchAttestation(r.attestationId,t9)}return i},this.fetchAttestation=async(r,i)=>{this.logger.info(`resolving attestation: ${r} from url: ${i}`);let c=this.startAbortTimer(2*J.ONE_SECOND),l=await fetch(`${i}/attestation/${r}`,{signal:this.abortController.signal});return clearTimeout(c),200===l.status?await l.json():void 0},this.addToQueue=r=>{this.queue.push(r)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(r=>this.sendPost(r)),this.queue=[])},this.sendPost=r=>{var i;try{if(!this.iframe)return;null==(i=this.iframe.contentWindow)||i.postMessage(r,"*"),this.logger.info(`postMessage sent: ${r} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let r;let s=i=>{"verify_ready"===i.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),r())};await Promise.race([new Promise(i=>{if(document.getElementById(t2))return i();window.addEventListener("message",s);let c=document.createElement("iframe");c.id=t2,c.src=`${this.verifyUrl}/${this.projectId}`,c.style.display="none",document.body.append(c),this.iframe=c,r=i}),new Promise((r,i)=>setTimeout(()=>{window.removeEventListener("message",s),i("verify iframe load timeout")},(0,J.toMiliseconds)(J.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=r=>{let i=r||t3;return t4.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${t3}`),i=t3),i},this.logger=(0,eL.generateChildLogger)(i,this.name),this.verifyUrl=t3,this.abortController=new AbortController,this.isDevEnv=te()&&eZ.env.IS_VITEST}get context(){return(0,eL.getLoggerContext)(this.logger)}startAbortTimer(r){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,J.toMiliseconds)(r))}};var rb=Object.defineProperty,rw=Object.getOwnPropertySymbols,rE=Object.prototype.hasOwnProperty,rI=Object.prototype.propertyIsEnumerable,index_es_jt=(r,i,c)=>i in r?rb(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_Gt=(r,i)=>{for(var c in i||(i={}))rE.call(i,c)&&index_es_jt(r,c,i[c]);if(rw)for(var c of rw(i))rI.call(i,c)&&index_es_jt(r,c,i[c]);return r};let index_es_te=class index_es_te extends n{constructor(r){super(r),this.protocol="wc",this.version=2,this.name=tU,this.events=new p.EventEmitter,this.initialized=!1,this.on=(r,i)=>this.events.on(r,i),this.once=(r,i)=>this.events.once(r,i),this.off=(r,i)=>this.events.off(r,i),this.removeListener=(r,i)=>this.events.removeListener(r,i),this.projectId=r?.projectId,this.relayUrl=r?.relayUrl||tG,this.customStoragePrefix=null!=r&&r.customStoragePrefix?`:${r.customStoragePrefix}`:"";let i="u">typeof r?.logger&&"string"!=typeof r?.logger?r.logger:(0,eL.pino)((0,eL.getDefaultLoggerOptions)({level:r?.logger||tH.logger}));this.logger=(0,eL.generateChildLogger)(i,this.name),this.heartbeat=new eT.HeartBeat,this.crypto=new index_es_Tt(this,this.logger,r?.keychain),this.history=new index_es_Kt(this,this.logger),this.expirer=new index_es_Bt(this,this.logger),this.storage=null!=r&&r.storage?r.storage:new index_es_h(index_es_Gt(index_es_Gt({},tK),r?.storageOptions)),this.relayer=new index_es_Ut({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new kt(this,this.logger),this.verify=new index_es_Vt(this.projectId||"",this.logger)}static async init(r){let i=new index_es_te(r);await i.initialize();let c=await i.crypto.getClientId();return await i.storage.setItem("WALLETCONNECT_CLIENT_ID",c),i}get context(){return(0,eL.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(r){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,r),this.logger.error(r.message),r}}};let rx="client",rS=`wc@2:${rx}:`,rP={name:rx,logger:"error"},rR="WALLETCONNECT_DEEPLINK_CHOICE",rO="Proposal expired",rN=J.SEVEN_DAYS,rC={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1115}}},rA={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},rj={idle:"IDLE",active:"ACTIVE"},rT=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var rL=Object.defineProperty,rD=Object.defineProperties,rq=Object.getOwnPropertyDescriptors,rk=Object.getOwnPropertySymbols,rz=Object.prototype.hasOwnProperty,rM=Object.prototype.propertyIsEnumerable,index_es_de=(r,i,c)=>i in r?rL(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,dist_index_es_g=(r,i)=>{for(var c in i||(i={}))rz.call(i,c)&&index_es_de(r,c,i[c]);if(rk)for(var c of rk(i))rM.call(i,c)&&index_es_de(r,c,i[c]);return r},dist_index_es_b=(r,i)=>rD(r,rq(i));let index_es_hs=class index_es_hs extends index_es_S{constructor(r){super(r),this.name="engine",this.events=new(v()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.requestQueue={state:rj.idle,queue:[]},this.sessionRequestQueue={state:rj.idle,queue:[]},this.requestQueueDelay=J.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(rC)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,J.toMiliseconds)(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();let i=dist_index_es_b(dist_index_es_g({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);let{pairingTopic:c,requiredNamespaces:l,optionalNamespaces:p,sessionProperties:v,relays:_}=i,E=c,P,q=!1;if(E&&(q=this.client.core.pairing.pairings.get(E).active),!E||!q){let{topic:r,uri:i}=await this.client.core.pairing.create();E=r,P=i}let z=await this.client.core.crypto.generateKeyPair(),M=dist_index_es_g({requiredNamespaces:l,optionalNamespaces:p,relays:_??[{protocol:"irn"}],proposer:{publicKey:z,metadata:this.client.metadata}},v&&{sessionProperties:v}),{reject:U,resolve:Q,done:X}=at(J.FIVE_MINUTES,rO);if(this.events.once(yt("session_connect"),async({error:r,session:i})=>{if(r)U(r);else if(i){i.self.publicKey=z;let r=dist_index_es_b(dist_index_es_g({},i),{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces});await this.client.session.set(i.topic,r),await this.setExpiry(i.topic,i.expiry),E&&await this.client.core.pairing.updateMetadata({topic:E,metadata:i.peer.metadata}),Q(r)}}),!E){let{message:r}=N("NO_MATCHING_KEY",`connect() pairing topic: ${E}`);throw Error(r)}let et=await this.sendRequest({topic:E,method:"wc_sessionPropose",params:M}),es=pt(J.FIVE_MINUTES);return await this.setProposal(et,dist_index_es_g({id:et,expiry:es},M)),{uri:P,approval:X}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);let{id:i,relayProtocol:c,namespaces:l,sessionProperties:p}=r,v=this.client.proposal.get(i),{pairingTopic:_,proposer:E,requiredNamespaces:P,optionalNamespaces:q}=v;_=_||"",B(P)||(P=function(r,i){let c=un(r,i);if(c)throw Error(c.message);let l={};for(let[i,c]of Object.entries(r))l[i]={methods:c.methods,events:c.events,chains:c.accounts.map(r=>`${r.split(":")[0]}:${r.split(":")[1]}`)};return l}(l,"approve()"));let z=await this.client.core.crypto.generateKeyPair(),M=E.publicKey,U=await this.client.core.crypto.generateSharedKey(z,M);_&&i&&(await this.client.core.pairing.updateMetadata({topic:_,metadata:E.metadata}),await this.sendResult({id:i,topic:_,result:{relay:{protocol:c??"irn"},responderPublicKey:z}}),await this.client.proposal.delete(i,index_es_U("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}));let J=dist_index_es_g({relay:{protocol:c??"irn"},namespaces:l,requiredNamespaces:P,optionalNamespaces:q,pairingTopic:_,controller:{publicKey:z,metadata:this.client.metadata},expiry:pt(rN)},p&&{sessionProperties:p});await this.client.core.relayer.subscribe(U),await this.sendRequest({topic:U,method:"wc_sessionSettle",params:J,throwOnFailedPublish:!0});let Q=dist_index_es_b(dist_index_es_g({},J),{topic:U,pairingTopic:_,acknowledged:!1,self:J.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:z});return await this.client.session.set(U,Q),await this.setExpiry(U,pt(rN)),{topic:U,acknowledged:()=>new Promise(r=>setTimeout(()=>r(this.client.session.get(U)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);let{id:i,reason:c}=r,{pairingTopic:l}=this.client.proposal.get(i);l&&(await this.sendError(i,l,c),await this.client.proposal.delete(i,index_es_U("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);let{topic:i,namespaces:c}=r,l=await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:c}}),{done:p,resolve:v,reject:_}=at();return this.events.once(yt("session_update",l),({error:r})=>{r?_(r):v()}),await this.client.session.update(i,{namespaces:c}),{acknowledged:p}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);let{topic:i}=r,c=await this.sendRequest({topic:i,method:"wc_sessionExtend",params:{}}),{done:l,resolve:p,reject:v}=at();return this.events.once(yt("session_extend",c),({error:r})=>{r?v(r):p()}),await this.setExpiry(i,pt(rN)),{acknowledged:l}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);let{chainId:i,request:c,topic:l,expiry:p}=r,v=payloadId(),{done:_,resolve:E,reject:P}=at(p,"Request expired. Please try again.");return this.events.once(yt("session_request",v),({error:r,result:i})=>{r?P(r):E(i)}),await Promise.all([new Promise(async r=>{await this.sendRequest({clientRpcId:v,topic:l,method:"wc_sessionRequest",params:{request:c,chainId:i},expiry:p,throwOnFailedPublish:!0}).catch(r=>P(r)),this.client.events.emit("session_request_sent",{topic:l,request:c,chainId:i,id:v}),r()}),new Promise(async r=>{let i=await gt(this.client.core.storage,rR);ht({id:v,topic:l,wcDeepLink:i}),r()}),_()]).then(r=>r[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);let{topic:i,response:c}=r,{id:l}=c;isJsonRpcResult(c)?await this.sendResult({id:l,topic:i,result:c.result,throwOnFailedPublish:!0}):isJsonRpcError(c)&&await this.sendError(l,i,c.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);let{topic:i}=r;if(this.client.session.keys.includes(i)){let r=await this.sendRequest({topic:i,method:"wc_sessionPing",params:{}}),{done:c,resolve:l,reject:p}=at();this.events.once(yt("session_ping",r),({error:r})=>{r?p(r):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);let{topic:i,event:c,chainId:l}=r;await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:c,chainId:l}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);let{topic:i}=r;this.client.session.keys.includes(i)?(await this.sendRequest({topic:i,method:"wc_sessionDelete",params:index_es_U("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(i)):await this.client.core.pairing.disconnect({topic:i})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>(function(r,i){let{requiredNamespaces:c}=i,l=Object.keys(r.namespaces),p=Object.keys(c),v=!0;return!!O(p,l)&&(l.forEach(i=>{let{accounts:l,methods:p,events:_}=r.namespaces[i],E=A(l),P=c[i];O(L(i,P),E)&&O(P.methods,p)&&O(P.events,_)||(v=!1)}),v)})(i,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{let i=this.client.core.pairing.pairings.get(r.pairingTopic),c=this.client.core.pairing.pairings.getAll().filter(c=>{var l,p;return(null==(l=c.peerMetadata)?void 0:l.url)&&(null==(p=c.peerMetadata)?void 0:p.url)===r.peer.metadata.url&&c.topic&&c.topic!==i.topic});if(0===c.length)return;this.client.logger.info(`Cleaning up ${c.length} duplicate pairing(s)`),await Promise.all(c.map(r=>this.client.core.pairing.disconnect({topic:r.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}},this.deleteSession=async(r,i)=>{let{self:c}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,index_es_U("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(rR).catch(r=>this.client.logger.warn(r))},this.deleteProposal=async(r,i)=>{await Promise.all([this.client.proposal.delete(r,index_es_U("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,i,c=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),c?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),c&&(this.sessionRequestQueue.state=rj.idle)},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:i}),this.client.core.expirer.set(r,i)},this.setProposal=async(r,i)=>{await this.client.proposal.set(r,i),this.client.core.expirer.set(r,i.expiry)},this.setPendingSessionRequest=async r=>{let i=rC.wc_sessionRequest.req.ttl,{id:c,topic:l,params:p,verifyContext:v}=r;await this.client.pendingRequest.set(c,{id:c,topic:l,params:p,verifyContext:v}),i&&this.client.core.expirer.set(c,pt(i))},this.sendRequest=async r=>{let{topic:i,method:c,params:l,expiry:p,relayRpcId:v,clientRpcId:_,throwOnFailedPublish:E}=r,P=formatJsonRpcRequest(c,l,_);if(D()&&rT.includes(c)){let r=Ln(JSON.stringify(P));this.client.core.verify.register({attestationId:r})}let q=await this.client.core.crypto.encode(i,P),z=rC[c].req;return p&&(z.ttl=p),v&&(z.id=v),this.client.core.history.set(i,P),E?(z.internal=dist_index_es_b(dist_index_es_g({},z.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,q,z)):this.client.core.relayer.publish(i,q,z).catch(r=>this.client.logger.error(r)),P.id},this.sendResult=async r=>{let{id:i,topic:c,result:l,throwOnFailedPublish:p}=r,v=formatJsonRpcResult(i,l),_=await this.client.core.crypto.encode(c,v),E=await this.client.core.history.get(c,i),P=rC[E.request.method].res;p?(P.internal=dist_index_es_b(dist_index_es_g({},P.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(c,_,P)):this.client.core.relayer.publish(c,_,P).catch(r=>this.client.logger.error(r)),await this.client.core.history.resolve(v)},this.sendError=async(r,i,c)=>{let l=formatJsonRpcError(r,c),p=await this.client.core.crypto.encode(i,l),v=await this.client.core.history.get(i,r),_=rC[v.request.method].res;this.client.core.relayer.publish(i,p,_),await this.client.core.history.resolve(l)},this.cleanup=async()=>{let r=[],i=[];this.client.session.getAll().forEach(i=>{mt(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(r=>{mt(r.expiry)&&i.push(r.id)}),await Promise.all([...r.map(r=>this.deleteSession(r)),...i.map(r=>this.deleteProposal(r))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===rj.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=rj.active;let r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(r=>setTimeout(r,300))}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=rj.idle},this.processRequest=r=>{let{topic:i,payload:c}=r,l=c.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(i,c);case"wc_sessionSettle":return this.onSessionSettleRequest(i,c);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,c);case"wc_sessionExtend":return this.onSessionExtendRequest(i,c);case"wc_sessionPing":return this.onSessionPingRequest(i,c);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,c);case"wc_sessionRequest":return this.onSessionRequest(i,c);case"wc_sessionEvent":return this.onSessionEventRequest(i,c);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{let{topic:i,payload:c}=r,l=(await this.client.core.history.get(i,c.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(i,c);case"wc_sessionSettle":return this.onSessionSettleResponse(i,c);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,c);case"wc_sessionExtend":return this.onSessionExtendResponse(i,c);case"wc_sessionPing":return this.onSessionPingResponse(i,c);case"wc_sessionRequest":return this.onSessionRequestResponse(i,c);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=r=>{let{topic:i}=r,{message:c}=N("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw Error(c)},this.onSessionProposeRequest=async(r,i)=>{let{params:c,id:l}=i;try{this.isValidConnect(dist_index_es_g({},i.params));let p=pt(J.FIVE_MINUTES),v=dist_index_es_g({id:l,pairingTopic:r,expiry:p},c);await this.setProposal(l,v);let _=Ln(JSON.stringify(i)),E=await this.getVerifyContext(_,v.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:v,verifyContext:E})}catch(i){await this.sendError(l,r,i),this.client.logger.error(i)}},this.onSessionProposeResponse=async(r,i)=>{let{id:c}=i;if(isJsonRpcResult(i)){let{result:l}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});let p=this.client.proposal.get(c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:p});let v=p.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:v});let _=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});let E=await this.client.core.crypto.generateSharedKey(v,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:E});let P=await this.client.core.relayer.subscribe(E);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:P}),await this.client.core.pairing.activate({topic:r})}else isJsonRpcError(i)&&(await this.client.proposal.delete(c,index_es_U("USER_DISCONNECTED")),this.events.emit(yt("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(r,i)=>{let{id:c,params:l}=i;try{this.isValidSessionSettleRequest(l);let{relay:c,controller:p,expiry:v,namespaces:_,requiredNamespaces:E,optionalNamespaces:P,sessionProperties:q,pairingTopic:z}=i.params,M=dist_index_es_g({topic:r,relay:c,expiry:v,namespaces:_,acknowledged:!0,pairingTopic:z,requiredNamespaces:E,optionalNamespaces:P,controller:p.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:p.publicKey,metadata:p.metadata}},q&&{sessionProperties:q});await this.sendResult({id:i.id,topic:r,result:!0}),this.events.emit(yt("session_connect"),{session:M}),this.cleanupDuplicatePairings(M)}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.onSessionSettleResponse=async(r,i)=>{let{id:c}=i;isJsonRpcResult(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(yt("session_approve",c),{})):isJsonRpcError(i)&&(await this.client.session.delete(r,index_es_U("USER_DISCONNECTED")),this.events.emit(yt("session_approve",c),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{let{params:c,id:l}=i;try{let i=`${r}_session_update`,p=tr.get(i);if(p&&this.isRequestOutOfSync(p,l)){this.client.logger.info(`Discarding out of sync request - ${l}`);return}this.isValidUpdate(dist_index_es_g({topic:r},c)),await this.client.session.update(r,{namespaces:c.namespaces}),await this.sendResult({id:l,topic:r,result:!0}),this.client.events.emit("session_update",{id:l,topic:r,params:c}),tr.set(i,l)}catch(i){await this.sendError(l,r,i),this.client.logger.error(i)}},this.isRequestOutOfSync=(r,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,i)=>{let{id:c}=i;isJsonRpcResult(i)?this.events.emit(yt("session_update",c),{}):isJsonRpcError(i)&&this.events.emit(yt("session_update",c),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{let{id:c}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,pt(rN)),await this.sendResult({id:c,topic:r,result:!0}),this.client.events.emit("session_extend",{id:c,topic:r})}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.onSessionExtendResponse=(r,i)=>{let{id:c}=i;isJsonRpcResult(i)?this.events.emit(yt("session_extend",c),{}):isJsonRpcError(i)&&this.events.emit(yt("session_extend",c),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{let{id:c}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:c,topic:r,result:!0}),this.client.events.emit("session_ping",{id:c,topic:r})}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.onSessionPingResponse=(r,i)=>{let{id:c}=i;setTimeout(()=>{isJsonRpcResult(i)?this.events.emit(yt("session_ping",c),{}):isJsonRpcError(i)&&this.events.emit(yt("session_ping",c),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{let{id:c}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),await Promise.all([new Promise(i=>{this.client.core.relayer.once(tW.publish,async()=>{i(await this.deleteSession(r))})}),this.sendResult({id:c,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:c,topic:r})}catch(r){this.client.logger.error(r)}},this.onSessionRequest=async(r,i)=>{let{id:c,params:l}=i;try{this.isValidRequest(dist_index_es_g({topic:r},l));let i=Ln(JSON.stringify(formatJsonRpcRequest("wc_sessionRequest",l,c))),p=this.client.session.get(r),v=await this.getVerifyContext(i,p.peer.metadata),_={id:c,topic:r,params:l,verifyContext:v};await this.setPendingSessionRequest(_),this.addSessionRequestToSessionRequestQueue(_),this.processSessionRequestQueue()}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.onSessionRequestResponse=(r,i)=>{let{id:c}=i;isJsonRpcResult(i)?this.events.emit(yt("session_request",c),{result:i.result}):isJsonRpcError(i)&&this.events.emit(yt("session_request",c),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{let{id:c,params:l}=i;try{let i=`${r}_session_event_${l.event.name}`,p=tr.get(i);if(p&&this.isRequestOutOfSync(p,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidEmit(dist_index_es_g({topic:r},l)),this.client.events.emit("session_event",{id:c,topic:r,params:l}),tr.set(i,c)}catch(i){await this.sendError(c,r,i),this.client.logger.error(i)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=rj.idle,this.processSessionRequestQueue()},(0,J.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===rj.active){this.client.logger.info("session request queue is already active.");return}let r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=rj.active,this.client.events.emit("session_request",r)}catch(r){this.client.logger.error(r)}},this.onPairingCreated=r=>{if(r.active)return;let i=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);i&&this.onSessionProposeRequest(r.topic,formatJsonRpcRequest("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id))},this.isValidConnect=async r=>{let i;if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw Error(i)}let{pairingTopic:c,requiredNamespaces:l,optionalNamespaces:p,sessionProperties:v,relays:_}=r;if(w(c)||await this.isValidPairingTopic(c),i=!1,_?_&&k(_)&&_.length&&_.forEach(r=>{i=ln(r)}):i=!0,!i){let{message:r}=N("MISSING_OR_INVALID",`connect() relays: ${_}`);throw Error(r)}w(l)||0===B(l)||this.validateNamespaces(l,"requiredNamespaces"),w(p)||0===B(p)||this.validateNamespaces(p,"optionalNamespaces"),w(v)||this.validateSessionProps(v,"sessionProperties")},this.validateNamespaces=(r,i)=>{let c=function(r,i,c){let l=null;if(r&&B(r)){let p;let v=ce(r,i);v&&(l=v);let _=(p=null,Object.entries(r).forEach(([r,l])=>{var v,_;let E;if(p)return;let P=(v=L(r,l),_=`${i} ${c}`,E=null,k(v)&&v.length?v.forEach(r=>{E||V(r)||(E=index_es_U("UNSUPPORTED_CHAINS",`${_}, chain ${r} should be a string and conform to "namespace:chainId" format`))}):V(r)||(E=index_es_U("UNSUPPORTED_CHAINS",`${_}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),E);P&&(p=P)}),p);_&&(l=_)}else l=N("MISSING_OR_INVALID",`${i}, ${c} should be an object with data`);return l}(r,"connect()",i);if(c)throw Error(c.message)},this.isValidApprove=async r=>{if(!Ht(r))throw Error(N("MISSING_OR_INVALID",`approve() params: ${r}`).message);let{id:i,namespaces:c,relayProtocol:l,sessionProperties:p}=r;await this.isValidProposalId(i);let v=this.client.proposal.get(i),_=un(c,"approve()");if(_)throw Error(_.message);let E=dn(v.requiredNamespaces,c,"approve()");if(E)throw Error(E.message);if(!h(l,!0)){let{message:r}=N("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw Error(r)}w(p)||this.validateSessionProps(p,"sessionProperties")},this.isValidReject=async r=>{if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`reject() params: ${r}`);throw Error(i)}let{id:i,reason:c}=r;if(await this.isValidProposalId(i),!c||"object"!=typeof c||!c.code||!G(c.code,!1)||!c.message||!h(c.message,!1)){let{message:r}=N("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(c)}`);throw Error(r)}},this.isValidSessionSettleRequest=r=>{let i;if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw Error(i)}let{relay:c,controller:l,namespaces:p,expiry:v}=r;if(!ln(c)){let{message:r}=N("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(r)}let _=(i=null,h(l?.publicKey,!1)||(i=N("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),i);if(_)throw Error(_.message);let E=un(p,"onSessionSettleRequest()");if(E)throw Error(E.message);if(mt(v)){let{message:r}=N("EXPIRED","onSessionSettleRequest()");throw Error(r)}},this.isValidUpdate=async r=>{if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`update() params: ${r}`);throw Error(i)}let{topic:i,namespaces:c}=r;await this.isValidSessionTopic(i);let l=this.client.session.get(i),p=un(c,"update()");if(p)throw Error(p.message);let v=dn(l.requiredNamespaces,c,"update()");if(v)throw Error(v.message)},this.isValidExtend=async r=>{if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`extend() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{var i;if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`request() params: ${r}`);throw Error(i)}let{topic:c,request:l,chainId:p,expiry:v}=r;await this.isValidSessionTopic(c);let{namespaces:_}=this.client.session.get(c);if(!zt(_,p)){let{message:r}=N("MISSING_OR_INVALID",`request() chainId: ${p}`);throw Error(r)}if(w(l)||!h(l.method,!1)){let{message:r}=N("MISSING_OR_INVALID",`request() ${JSON.stringify(l)}`);throw Error(r)}if(!(h(i=l.method,!1)&&(function(r,i){let c=[];return Object.values(r).forEach(r=>{A(r.accounts).includes(i)&&c.push(...r.methods)}),c})(_,p).includes(i))){let{message:r}=N("MISSING_OR_INVALID",`request() method: ${l.method}`);throw Error(r)}if(v&&(!G(v,!1)||!(v<=rA.max)||!(v>=rA.min))){let{message:r}=N("MISSING_OR_INVALID",`request() expiry: ${v}. Expiry must be a number (in seconds) between ${rA.min} and ${rA.max}`);throw Error(r)}},this.isValidRespond=async r=>{if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`respond() params: ${r}`);throw Error(i)}let{topic:i,response:c}=r;if(await this.isValidSessionTopic(i),w(c)||w(c.result)&&w(c.error)||!G(c.id,!1)||!h(c.jsonrpc,!1)){let{message:r}=N("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(c)}`);throw Error(r)}},this.isValidPing=async r=>{if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`ping() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{var i;if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`emit() params: ${r}`);throw Error(i)}let{topic:c,event:l,chainId:p}=r;await this.isValidSessionTopic(c);let{namespaces:v}=this.client.session.get(c);if(!zt(v,p)){let{message:r}=N("MISSING_OR_INVALID",`emit() chainId: ${p}`);throw Error(r)}if(w(l)||!h(l.name,!1)){let{message:r}=N("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(l)}`);throw Error(r)}if(!(h(i=l.name,!1)&&(function(r,i){let c=[];return Object.values(r).forEach(r=>{A(r.accounts).includes(i)&&c.push(...r.events)}),c})(v,p).includes(i))){let{message:r}=N("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(l)}`);throw Error(r)}},this.isValidDisconnect=async r=>{if(!Ht(r)){let{message:i}=N("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw Error(i)}let{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(r,i)=>{let c={verified:{verifyUrl:i.verifyUrl||t3,validation:"UNKNOWN",origin:i.url||""}};try{let l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:i.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(r){this.client.logger.info(r)}return this.client.logger.info(`Verify context: ${JSON.stringify(c)}`),c},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(r=>{if(!h(r,!1)){let{message:c}=N("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(r)}`);throw Error(c)}})}}async isInitialized(){if(!this.initialized){let{message:r}=N("NOT_INITIALIZED",this.name);throw Error(r)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(tW.message,async r=>{let{topic:i,message:c}=r;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(c)))return;let l=await this.client.core.crypto.decode(i,c);try{isJsonRpcRequest(l)?(this.client.core.history.set(i,l),this.onRelayEventRequest({topic:i,payload:l})):isJsonRpcResponse(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:i,payload:l}),this.client.core.history.delete(i,l.id)):this.onRelayEventUnknownPayload({topic:i,payload:l})}catch(r){this.client.logger.error(r)}})}registerExpirerEvents(){this.client.core.expirer.on(t6.expired,async r=>{let{topic:i,id:c}=ft(r.target);if(c&&this.client.pendingRequest.keys.includes(c))return await this.deletePendingSessionRequest(c,N("EXPIRED"),!0);i?this.client.session.keys.includes(i)&&(await this.deleteSession(i,!0),this.client.events.emit("session_expire",{topic:i})):c&&(await this.deleteProposal(c,!0),this.client.events.emit("proposal_expire",{id:c}))})}registerPairingEvents(){this.client.core.pairing.events.on(t1.create,r=>this.onPairingCreated(r))}isValidPairingTopic(r){if(!h(r,!1)){let{message:i}=N("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw Error(i)}if(!this.client.core.pairing.pairings.keys.includes(r)){let{message:i}=N("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw Error(i)}if(mt(this.client.core.pairing.pairings.get(r).expiry)){let{message:i}=N("EXPIRED",`pairing topic: ${r}`);throw Error(i)}}async isValidSessionTopic(r){if(!h(r,!1)){let{message:i}=N("MISSING_OR_INVALID",`session topic should be a string: ${r}`);throw Error(i)}if(!this.client.session.keys.includes(r)){let{message:i}=N("NO_MATCHING_KEY",`session topic doesn't exist: ${r}`);throw Error(i)}if(mt(this.client.session.get(r).expiry)){await this.deleteSession(r);let{message:i}=N("EXPIRED",`session topic: ${r}`);throw Error(i)}}async isValidSessionOrPairingTopic(r){if(this.client.session.keys.includes(r))await this.isValidSessionTopic(r);else if(this.client.core.pairing.pairings.keys.includes(r))this.isValidPairingTopic(r);else if(h(r,!1)){let{message:i}=N("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${r}`);throw Error(i)}else{let{message:i}=N("MISSING_OR_INVALID",`session or pairing topic should be a string: ${r}`);throw Error(i)}}async isValidProposalId(r){if("number"!=typeof r){let{message:i}=N("MISSING_OR_INVALID",`proposal id should be a number: ${r}`);throw Error(i)}if(!this.client.proposal.keys.includes(r)){let{message:i}=N("NO_MATCHING_KEY",`proposal id doesn't exist: ${r}`);throw Error(i)}if(mt(this.client.proposal.get(r).expiry)){await this.deleteProposal(r);let{message:i}=N("EXPIRED",`proposal id: ${r}`);throw Error(i)}}};let index_es_ds=class index_es_ds extends Mt{constructor(r,i){super(r,i,"proposal",rS),this.core=r,this.logger=i}};let index_es_us=class index_es_us extends Mt{constructor(r,i){super(r,i,"session",rS),this.core=r,this.logger=i}};let index_es_gs=class index_es_gs extends Mt{constructor(r,i){super(r,i,"request",rS,r=>r.id),this.core=r,this.logger=i}};let dist_index_es_Q=class dist_index_es_Q extends b{constructor(r){super(r),this.protocol="wc",this.version=2,this.name=rP.name,this.events=new p.EventEmitter,this.on=(r,i)=>this.events.on(r,i),this.once=(r,i)=>this.events.once(r,i),this.off=(r,i)=>this.events.off(r,i),this.removeListener=(r,i)=>this.events.removeListener(r,i),this.removeAllListeners=r=>this.events.removeAllListeners(r),this.connect=async r=>{try{return await this.engine.connect(r)}catch(r){throw this.logger.error(r.message),r}},this.pair=async r=>{try{return await this.engine.pair(r)}catch(r){throw this.logger.error(r.message),r}},this.approve=async r=>{try{return await this.engine.approve(r)}catch(r){throw this.logger.error(r.message),r}},this.reject=async r=>{try{return await this.engine.reject(r)}catch(r){throw this.logger.error(r.message),r}},this.update=async r=>{try{return await this.engine.update(r)}catch(r){throw this.logger.error(r.message),r}},this.extend=async r=>{try{return await this.engine.extend(r)}catch(r){throw this.logger.error(r.message),r}},this.request=async r=>{try{return await this.engine.request(r)}catch(r){throw this.logger.error(r.message),r}},this.respond=async r=>{try{return await this.engine.respond(r)}catch(r){throw this.logger.error(r.message),r}},this.ping=async r=>{try{return await this.engine.ping(r)}catch(r){throw this.logger.error(r.message),r}},this.emit=async r=>{try{return await this.engine.emit(r)}catch(r){throw this.logger.error(r.message),r}},this.disconnect=async r=>{try{return await this.engine.disconnect(r)}catch(r){throw this.logger.error(r.message),r}},this.find=r=>{try{return this.engine.find(r)}catch(r){throw this.logger.error(r.message),r}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}},this.name=r?.name||rP.name,this.metadata=r?.metadata||(0,X.D)()||{name:"",description:"",url:"",icons:[""]};let i="u">typeof r?.logger&&"string"!=typeof r?.logger?r.logger:(0,eL.pino)((0,eL.getDefaultLoggerOptions)({level:r?.logger||rP.logger}));this.core=r?.core||new index_es_te(r),this.logger=(0,eL.generateChildLogger)(i,this.name),this.session=new index_es_us(this.core,this.logger),this.proposal=new index_es_ds(this.core,this.logger),this.pendingRequest=new index_es_gs(this.core,this.logger),this.engine=new index_es_hs(this)}static async init(r){let i=new dist_index_es_Q(r);return await i.initialize(),i}get context(){return(0,eL.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(r){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(r.message),r}}};var rU=c(54098),r$=c.n(rU);let rH={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};let HttpConnection=class HttpConnection{constructor(r,i=!1){if(this.url=r,this.disableProviderPing=i,this.events=new p.EventEmitter,this.isAvailable=!1,this.registering=!1,!isHttpUrl(r))throw Error(`Provided URL is not compatible with HTTP connection: ${r}`);this.url=r,this.disableProviderPing=i}get connected(){return this.isAvailable}get connecting(){return this.registering}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}async open(r=this.url){await this.register(r)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(r,i){this.isAvailable||await this.register();try{let i=safeJsonStringify(r),c=await r$()(this.url,Object.assign(Object.assign({},rH),{body:i})),l=await c.json();this.onPayload({data:l})}catch(i){this.onError(r.id,i)}}async register(r=this.url){if(!isHttpUrl(r))throw Error(`Provided URL is not compatible with HTTP connection: ${r}`);if(this.registering){let r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((r,i)=>{this.events.once("register_error",r=>{this.resetMaxListeners(),i(r)}),this.events.once("open",()=>{if(this.resetMaxListeners(),void 0===this.isAvailable)return i(Error("HTTP connection is missing or invalid"));r()})})}this.url=r,this.registering=!0;try{if(!this.disableProviderPing){let i=safeJsonStringify({id:1,jsonrpc:"2.0",method:"test",params:[]});await r$()(r,Object.assign(Object.assign({},rH),{body:i}))}this.onOpen()}catch(i){let r=this.parseError(i);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(r){if(void 0===r.data)return;let i="string"==typeof r.data?esm_safeJsonParse(r.data):r.data;this.events.emit("payload",i)}onError(r,i){let c=this.parseError(i),l=c.message||c.toString(),p=formatJsonRpcError(r,l);this.events.emit("payload",p)}parseError(r,i=this.url){return parseConnectionError(r,i,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}};let rK="error",rB="wc@2:universal_provider:",rV={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var rF="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof c.g?c.g:"u">typeof self?self:{},rG={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(r,i){(function(){var c,l="Expected a function",p="__lodash_hash_undefined__",v="__lodash_placeholder__",_=1/0,E=0/0,P=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],q="[object Arguments]",z="[object Array]",M="[object Boolean]",U="[object Date]",J="[object Error]",Q="[object Function]",X="[object GeneratorFunction]",et="[object Map]",es="[object Number]",eo="[object Object]",ec="[object Promise]",el="[object RegExp]",eh="[object Set]",ep="[object String]",ed="[object Symbol]",ef="[object WeakMap]",eg="[object ArrayBuffer]",ey="[object DataView]",em="[object Float32Array]",e_="[object Float64Array]",eb="[object Int8Array]",ew="[object Int16Array]",eE="[object Int32Array]",eI="[object Uint8Array]",ex="[object Uint8ClampedArray]",eS="[object Uint16Array]",eP="[object Uint32Array]",eR=/\b__p \+= '';/g,eO=/\b(__p \+=) '' \+/g,eN=/(__e\(.*?\)|\b__t\)) \+\n'';/g,eC=/&(?:amp|lt|gt|quot|#39);/g,eA=/[&<>"']/g,ej=RegExp(eC.source),eT=RegExp(eA.source),eL=/<%-([\s\S]+?)%>/g,eD=/<%([\s\S]+?)%>/g,ek=/<%=([\s\S]+?)%>/g,ez=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eM=/^\w*$/,eU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e$=/[\\^$.*+?()[\]{}|]/g,eH=RegExp(e$.source),eK=/^\s+/,eB=/\s/,eV=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eF=/\{\n\/\* \[wrapped with (.+)\] \*/,eG=/,? & /,eJ=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,eW=/[()=,{}\[\]\/\s]/,eY=/\\(\\)?/g,eZ=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eQ=/\w*$/,eX=/^[-+]0x[0-9a-f]+$/i,e0=/^0b[01]+$/i,e1=/^\[object .+?Constructor\]$/,e5=/^0o[0-7]+$/i,e6=/^(?:0|[1-9]\d*)$/,e2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,e3=/($^)/,e9=/['\n\r\u2028\u2029\\]/g,e4="\ud800-\udfff",e8="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",e7="\\u2700-\\u27bf",tn="a-z\\xdf-\\xf6\\xf8-\\xff",ts="A-Z\\xc0-\\xd6\\xd8-\\xde",ta="\\ufe0e\\ufe0f",to="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tc="['’]",tl="["+to+"]",th="["+e8+"]",tp="["+tn+"]",td="[^"+e4+to+"\\d+"+e7+tn+ts+"]",tf="\ud83c[\udffb-\udfff]",tg="[^"+e4+"]",ty="(?:\ud83c[\udde6-\uddff]){2}",tm="[\ud800-\udbff][\udc00-\udfff]",t_="["+ts+"]",tb="\\u200d",tw="(?:"+tp+"|"+td+")",tE="(?:"+tc+"(?:d|ll|m|re|s|t|ve))?",tI="(?:"+tc+"(?:D|LL|M|RE|S|T|VE))?",tx="(?:"+th+"|"+tf+")?",tS="["+ta+"]?",tP="(?:"+tb+"(?:"+[tg,ty,tm].join("|")+")"+tS+tx+")*",tR=tS+tx+tP,tO="(?:"+["["+e7+"]",ty,tm].join("|")+")"+tR,tN="(?:"+[tg+th+"?",th,ty,tm,"["+e4+"]"].join("|")+")",tC=RegExp(tc,"g"),tA=RegExp(th,"g"),tj=RegExp(tf+"(?="+tf+")|"+tN+tR,"g"),tT=RegExp([t_+"?"+tp+"+"+tE+"(?="+[tl,t_,"$"].join("|")+")","(?:"+t_+"|"+td+")+"+tI+"(?="+[tl,t_+tw,"$"].join("|")+")",t_+"?"+tw+"+"+tE,t_+"+"+tI,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",tO].join("|"),"g"),tL=RegExp("["+tb+e4+e8+ta+"]"),tD=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tq=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tk=-1,tz={};tz[em]=tz[e_]=tz[eb]=tz[ew]=tz[eE]=tz[eI]=tz[ex]=tz[eS]=tz[eP]=!0,tz[q]=tz[z]=tz[eg]=tz[M]=tz[ey]=tz[U]=tz[J]=tz[Q]=tz[et]=tz[es]=tz[eo]=tz[el]=tz[eh]=tz[ep]=tz[ef]=!1;var tM={};tM[q]=tM[z]=tM[eg]=tM[ey]=tM[M]=tM[U]=tM[em]=tM[e_]=tM[eb]=tM[ew]=tM[eE]=tM[et]=tM[es]=tM[eo]=tM[el]=tM[eh]=tM[ep]=tM[ed]=tM[eI]=tM[ex]=tM[eS]=tM[eP]=!0,tM[J]=tM[Q]=tM[ef]=!1;var tU={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},t$=parseFloat,tH=parseInt,tK="object"==typeof rF&&rF&&rF.Object===Object&&rF,tB="object"==typeof self&&self&&self.Object===Object&&self,tV=tK||tB||Function("return this")(),tF=i&&!i.nodeType&&i,tG=tF&&r&&!r.nodeType&&r,tJ=tG&&tG.exports===tF,tW=tJ&&tK.process,tY=function(){try{return tG&&tG.require&&tG.require("util").types||tW&&tW.binding&&tW.binding("util")}catch{}}(),tZ=tY&&tY.isArrayBuffer,tQ=tY&&tY.isDate,tX=tY&&tY.isMap,t0=tY&&tY.isRegExp,t1=tY&&tY.isSet,t5=tY&&tY.isTypedArray;function cn(r,i,c){switch(c.length){case 0:return r.call(i);case 1:return r.call(i,c[0]);case 2:return r.call(i,c[0],c[1]);case 3:return r.call(i,c[0],c[1],c[2])}return r.apply(i,c)}function Vo(r,i,c,l){for(var p=-1,v=null==r?0:r.length;++p<v;){var _=r[p];i(l,_,c(_),r)}return l}function mn(r,i){for(var c=-1,l=null==r?0:r.length;++c<l&&!1!==i(r[c],c,r););return r}function As(r,i){for(var c=-1,l=null==r?0:r.length;++c<l;)if(!i(r[c],c,r))return!1;return!0}function jn(r,i){for(var c=-1,l=null==r?0:r.length,p=0,v=[];++c<l;){var _=r[c];i(_,c,r)&&(v[p++]=_)}return v}function Ee(r,i){return!!(null==r?0:r.length)&&Tt(r,i,0)>-1}function Dr(r,i,c){for(var l=-1,p=null==r?0:r.length;++l<p;)if(c(i,r[l]))return!0;return!1}function G(r,i){for(var c=-1,l=null==r?0:r.length,p=Array(l);++c<l;)p[c]=i(r[c],c,r);return p}function nt(r,i){for(var c=-1,l=i.length,p=r.length;++c<l;)r[p+c]=i[c];return r}function Hr(r,i,c,l){var p=-1,v=null==r?0:r.length;for(l&&v&&(c=r[++p]);++p<v;)c=i(c,r[p],p,r);return c}function jo(r,i,c,l){var p=null==r?0:r.length;for(l&&p&&(c=r[--p]);p--;)c=i(c,r[p],p,r);return c}function Nr(r,i){for(var c=-1,l=null==r?0:r.length;++c<l;)if(i(r[c],c,r))return!0;return!1}var t6=$r("length");function Cs(r,i,c){var l;return c(r,function(r,c,p){if(i(r,c,p))return l=c,!1}),l}function ye(r,i,c,l){for(var p=r.length,v=c+(l?1:-1);l?v--:++v<p;)if(i(r[v],v,r))return v;return -1}function Tt(r,i,c){return i==i?function(r,i,c){for(var l=c-1,p=r.length;++l<p;)if(r[l]===i)return l;return -1}(r,i,c):ye(r,Is,c)}function rf(r,i,c,l){for(var p=c-1,v=r.length;++p<v;)if(l(r[p],i))return p;return -1}function Is(r){return r!=r}function xs(r,i){var c=null==r?0:r.length;return c?Wr(r,i)/c:E}function $r(r){return function(i){return null==i?c:i[r]}}function Ur(r){return function(i){return null==r?c:r[i]}}function Es(r,i,c,l,p){return p(r,function(r,p,v){c=l?(l=!1,r):i(c,r,p,v)}),c}function Wr(r,i){for(var l,p=-1,v=r.length;++p<v;){var _=i(r[p]);_!==c&&(l=l===c?_:l+_)}return l}function Fr(r,i){for(var c=-1,l=Array(r);++c<r;)l[c]=i(c);return l}function ys(r){return r&&r.slice(0,bs(r)+1).replace(eK,"")}function hn(r){return function(i){return r(i)}}function Mr(r,i){return G(i,function(i){return r[i]})}function jt(r,i){return r.has(i)}function Ss(r,i){for(var c=-1,l=r.length;++c<l&&Tt(i,r[c],0)>-1;);return c}function Os(r,i){for(var c=r.length;c--&&Tt(i,r[c],0)>-1;);return c}var t2=Ur({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),t3=Ur({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function cf(r){return"\\"+tU[r]}function Lt(r){return tL.test(r)}function qr(r){var i=-1,c=Array(r.size);return r.forEach(function(r,l){c[++i]=[l,r]}),c}function Rs(r,i){return function(c){return r(i(c))}}function tt(r,i){for(var c=-1,l=r.length,p=0,_=[];++c<l;){var E=r[c];(E===i||E===v)&&(r[c]=v,_[p++]=c)}return _}function Se(r){var i=-1,c=Array(r.size);return r.forEach(function(r){c[++i]=r}),c}function Dt(r){return Lt(r)?function(r){for(var i=tj.lastIndex=0;tj.test(r);)++i;return i}(r):t6(r)}function On(r){return Lt(r)?r.match(tj)||[]:r.split("")}function bs(r){for(var i=r.length;i--&&eB.test(r.charAt(i)););return i}var t9=Ur({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),t4=function h(r){var i,eB,e4,e8,e7=(r=null==r?tV:t4.defaults(tV.Object(),r,t4.pick(tV,tq))).Array,tn=r.Date,ts=r.Error,ta=r.Function,to=r.Math,tc=r.Object,tl=r.RegExp,th=r.String,tp=r.TypeError,td=e7.prototype,tf=ta.prototype,tg=tc.prototype,ty=r["__core-js_shared__"],tm=tf.toString,t_=tg.hasOwnProperty,tb=0,tw=(i=/[^.]+$/.exec(ty&&ty.keys&&ty.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",tE=tg.toString,tI=tm.call(tc),tx=tV._,tS=tl("^"+tm.call(t_).replace(e$,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tP=tJ?r.Buffer:c,tR=r.Symbol,tO=r.Uint8Array,tN=tP?tP.allocUnsafe:c,tj=Rs(tc.getPrototypeOf,tc),tL=tc.create,tU=tg.propertyIsEnumerable,tK=td.splice,tB=tR?tR.isConcatSpreadable:c,tF=tR?tR.iterator:c,tG=tR?tR.toStringTag:c,tW=function(){try{var r=mt(tc,"defineProperty");return r({},"",{}),r}catch{}}(),tY=r.clearTimeout!==tV.clearTimeout&&r.clearTimeout,t6=tn&&tn.now!==tV.Date.now&&tn.now,t8=r.setTimeout!==tV.setTimeout&&r.setTimeout,t7=to.ceil,rs=to.floor,ra=tc.getOwnPropertySymbols,ro=tP?tP.isBuffer:c,rc=r.isFinite,rl=td.join,rh=Rs(tc.keys,tc),rp=to.max,rd=to.min,rg=tn.now,ry=r.parseInt,rm=to.random,r_=td.reverse,rb=mt(r,"DataView"),rw=mt(r,"Map"),rE=mt(r,"Promise"),rI=mt(r,"Set"),rx=mt(r,"WeakMap"),rS=mt(tc,"create"),rP=rx&&new rx,rR={},rO=wt(rb),rN=wt(rw),rC=wt(rE),rA=wt(rI),rj=wt(rx),rT=tR?tR.prototype:c,rL=rT?rT.valueOf:c,rD=rT?rT.toString:c;function a(r){if(Y(r)&&!iq(r)&&!(r instanceof H)){if(r instanceof Pn)return r;if(t_.call(r,"__wrapped__"))return Fu(r)}return new Pn(r)}var rq=function(){function n(){}return function(r){if(!K(r))return{};if(tL)return tL(r);n.prototype=r;var i=new n;return n.prototype=c,i}}();function qe(){}function Pn(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=c}function H(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function dt(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var l=r[i];this.set(l[0],l[1])}}function Bn(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var l=r[i];this.set(l[0],l[1])}}function Gn(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var l=r[i];this.set(l[0],l[1])}}function gt(r){var i=-1,c=null==r?0:r.length;for(this.__data__=new Gn;++i<c;)this.add(r[i])}function Rn(r){var i=this.__data__=new Bn(r);this.size=i.size}function Fs(r,i){var c=iq(r),l=!c&&iD(r),p=!c&&!l&&iz(r),v=!c&&!l&&!p&&iK(r),_=c||l||p||v,E=_?Fr(r.length,th):[],P=E.length;for(var q in r)(i||t_.call(r,q))&&!(_&&("length"==q||p&&("offset"==q||"parent"==q)||v&&("buffer"==q||"byteLength"==q||"byteOffset"==q)||Zn(q,P)))&&E.push(q);return E}function Ms(r){var i=r.length;return i?r[ei(0,i-1)]:c}function Yr(r,i,l){(l===c||bn(r[i],l))&&(l!==c||i in r)||zn(r,i,l)}function se(r,i,l){var p=r[i];t_.call(r,i)&&bn(p,l)&&(l!==c||i in r)||zn(r,i,l)}function Be(r,i){for(var c=r.length;c--;)if(bn(r[c][0],i))return c;return -1}function gc(r,i,c,l){return rk(r,function(r,p,v){i(l,r,c(r),v)}),l}function qs(r,i){return r&&Un(i,V(i),r)}function zn(r,i,c){"__proto__"==i&&tW?tW(r,i,{configurable:!0,enumerable:!0,value:c,writable:!0}):r[i]=c}function Zr(r,i){for(var l=-1,p=i.length,v=e7(p),_=null==r;++l<p;)v[l]=_?c:Si(r,i[l]);return v}function vt(r,i,l){return r==r&&(l!==c&&(r=r<=l?r:l),i!==c&&(r=r>=i?r:i)),r}function An(r,i,l,p,v,_){var E,P=1&i,z=2&i,J=4&i;if(l&&(E=v?l(r,p,v,_):l(r)),E!==c)return E;if(!K(r))return r;var ec=iq(r);if(ec){if(ef=r.length,eR=new r.constructor(ef),ef&&"string"==typeof r[0]&&t_.call(r,"index")&&(eR.index=r.index,eR.input=r.input),E=eR,!P)return un(r,E)}else{var ef,eR,eO,eN,eC,eA=rJ(r),ej=eA==Q||eA==X;if(iz(r))return hu(r,P);if(eA==eo||eA==q||ej&&!v){if(E=z||ej?{}:bu(r),!P)return z?(eO=(eC=E)&&Un(r,on(r),eC),Un(r,rG(r),eO)):(eN=qs(E,r),Un(r,rF(r),eN))}else{if(!tM[eA])return v?r:{};E=function(r,i,c){var l,p,v=r.constructor;switch(i){case eg:return fi(r);case M:case U:return new v(+r);case ey:return l=c?fi(r.buffer):r.buffer,new r.constructor(l,r.byteOffset,r.byteLength);case em:case e_:case eb:case ew:case eE:case eI:case ex:case eS:case eP:return lu(r,c);case et:return new v;case es:case ep:return new v(r);case el:return(p=new r.constructor(r.source,eQ.exec(r))).lastIndex=r.lastIndex,p;case eh:return new v;case ed:return rL?tc(rL.call(r)):{}}}(r,eA,P)}}_||(_=new Rn);var eT=_.get(r);if(eT)return eT;_.set(r,E),iH(r)?r.forEach(function(c){E.add(An(c,i,l,c,r,_))}):iU(r)&&r.forEach(function(c,p){E.set(p,An(c,i,l,p,r,_))});var eL=J?z?pi:li:z?on:V,eD=ec?c:eL(r);return mn(eD||r,function(c,p){eD&&(c=r[p=c]),se(E,p,An(c,i,l,p,r,_))}),E}function Bs(r,i,l){var p=l.length;if(null==r)return!p;for(r=tc(r);p--;){var v=l[p],_=i[v],E=r[v];if(E===c&&!(v in r)||!_(E))return!1}return!0}function Gs(r,i,p){if("function"!=typeof r)throw new tp(l);return rZ(function(){r.apply(c,p)},i)}function ue(r,i,c,l){var p=-1,v=Ee,_=!0,E=r.length,P=[],q=i.length;if(!E)return P;c&&(i=G(i,hn(c))),l?(v=Dr,_=!1):i.length>=200&&(v=jt,_=!1,i=new gt(i));e:for(;++p<E;){var z=r[p],M=null==c?z:c(z);if(z=l||0!==z?z:0,_&&M==M){for(var U=q;U--;)if(i[U]===M)continue e;P.push(z)}else v(i,M,l)||P.push(z)}return P}a.templateSettings={escape:eL,evaluate:eD,interpolate:ek,variable:"",imports:{_:a}},a.prototype=qe.prototype,a.prototype.constructor=a,Pn.prototype=rq(qe.prototype),Pn.prototype.constructor=Pn,H.prototype=rq(qe.prototype),H.prototype.constructor=H,dt.prototype.clear=function(){this.__data__=rS?rS(null):{},this.size=0},dt.prototype.delete=function(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i},dt.prototype.get=function(r){var i=this.__data__;if(rS){var l=i[r];return l===p?c:l}return t_.call(i,r)?i[r]:c},dt.prototype.has=function(r){var i=this.__data__;return rS?i[r]!==c:t_.call(i,r)},dt.prototype.set=function(r,i){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=rS&&i===c?p:i,this},Bn.prototype.clear=function(){this.__data__=[],this.size=0},Bn.prototype.delete=function(r){var i=this.__data__,c=Be(i,r);return!(c<0)&&(c==i.length-1?i.pop():tK.call(i,c,1),--this.size,!0)},Bn.prototype.get=function(r){var i=this.__data__,l=Be(i,r);return l<0?c:i[l][1]},Bn.prototype.has=function(r){return Be(this.__data__,r)>-1},Bn.prototype.set=function(r,i){var c=this.__data__,l=Be(c,r);return l<0?(++this.size,c.push([r,i])):c[l][1]=i,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new dt,map:new(rw||Bn),string:new dt}},Gn.prototype.delete=function(r){var i=nr(this,r).delete(r);return this.size-=i?1:0,i},Gn.prototype.get=function(r){return nr(this,r).get(r)},Gn.prototype.has=function(r){return nr(this,r).has(r)},Gn.prototype.set=function(r,i){var c=nr(this,r),l=c.size;return c.set(r,i),this.size+=c.size==l?0:1,this},gt.prototype.add=gt.prototype.push=function(r){return this.__data__.set(r,p),this},gt.prototype.has=function(r){return this.__data__.has(r)},Rn.prototype.clear=function(){this.__data__=new Bn,this.size=0},Rn.prototype.delete=function(r){var i=this.__data__,c=i.delete(r);return this.size=i.size,c},Rn.prototype.get=function(r){return this.__data__.get(r)},Rn.prototype.has=function(r){return this.__data__.has(r)},Rn.prototype.set=function(r,i){var c=this.__data__;if(c instanceof Bn){var l=c.__data__;if(!rw||l.length<199)return l.push([r,i]),this.size=++c.size,this;c=this.__data__=new Gn(l)}return c.set(r,i),this.size=c.size,this};var rk=vu($n),rz=vu(Xr,!0);function mc(r,i){var c=!0;return rk(r,function(r,l,p){return c=!!i(r,l,p)}),c}function Ge(r,i,l){for(var p=-1,v=r.length;++p<v;){var _=r[p],E=i(_);if(null!=E&&(P===c?E==E&&!pn(E):l(E,P)))var P=E,q=_}return q}function Ks(r,i){var c=[];return rk(r,function(r,l,p){i(r,l,p)&&c.push(r)}),c}function j(r,i,c,l,p){var v=-1,_=r.length;for(c||(c=ah),p||(p=[]);++v<_;){var E=r[v];i>0&&c(E)?i>1?j(E,i-1,c,l,p):nt(p,E):l||(p[p.length]=E)}return p}var rM=_u(),rU=_u(!0);function $n(r,i){return r&&rM(r,i,V)}function Xr(r,i){return r&&rU(r,i,V)}function ze(r,i){return jn(i,function(i){return Jn(r[i])})}function _t(r,i){i=st(i,r);for(var l=0,p=i.length;null!=r&&l<p;)r=r[Wn(i[l++])];return l&&l==p?r:c}function Zs(r,i,c){var l=i(r);return iq(r)?l:nt(l,c(r))}function en(r){return null==r?r===c?"[object Undefined]":"[object Null]":tG&&tG in tc(r)?function(r){var i=t_.call(r,tG),l=r[tG];try{r[tG]=c;var p=!0}catch{}var v=tE.call(r);return p&&(i?r[tG]=l:delete r[tG]),v}(r):tE.call(r)}function Qr(r,i){return r>i}function Pc(r,i){return null!=r&&t_.call(r,i)}function Ac(r,i){return null!=r&&i in tc(r)}function Vr(r,i,l){for(var p=l?Dr:Ee,v=r[0].length,_=r.length,E=_,P=e7(_),q=1/0,z=[];E--;){var M=r[E];E&&i&&(M=G(M,hn(i))),q=rd(M.length,q),P[E]=!l&&(i||v>=120&&M.length>=120)?new gt(E&&M):c}M=r[0];var U=-1,J=P[0];e:for(;++U<v&&z.length<q;){var Q=M[U],X=i?i(Q):Q;if(Q=l||0!==Q?Q:0,!(J?jt(J,X):p(z,X,l))){for(E=_;--E;){var et=P[E];if(!(et?jt(et,X):p(r[E],X,l)))continue e}J&&J.push(X),z.push(Q)}}return z}function ae(r,i,l){i=st(i,r);var p=null==(r=Hu(r,i))?r:r[Wn(In(i))];return null==p?c:cn(p,r,l)}function Js(r){return Y(r)&&en(r)==q}function oe(r,i,l,p,v){return r===i||(null!=r&&null!=i&&(Y(r)||Y(i))?function(r,i,l,p,v,_){var E=iq(r),P=iq(i),Q=E?z:rJ(r),X=P?z:rJ(i);Q=Q==q?eo:Q,X=X==q?eo:X;var ec=Q==eo,ef=X==eo,em=Q==X;if(em&&iz(r)){if(!iz(i))return!1;E=!0,ec=!1}if(em&&!ec)return _||(_=new Rn),E||iK(r)?Su(r,i,l,p,v,_):function(r,i,c,l,p,v,_){switch(c){case ey:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)break;r=r.buffer,i=i.buffer;case eg:return!(r.byteLength!=i.byteLength||!v(new tO(r),new tO(i)));case M:case U:case es:return bn(+r,+i);case J:return r.name==i.name&&r.message==i.message;case el:case ep:return r==i+"";case et:var E=qr;case eh:var P=1&l;if(E||(E=Se),r.size!=i.size&&!P)break;var q=_.get(r);if(q)return q==i;l|=2,_.set(r,i);var z=Su(E(r),E(i),l,p,v,_);return _.delete(r),z;case ed:if(rL)return rL.call(r)==rL.call(i)}return!1}(r,i,Q,l,p,v,_);if(!(1&l)){var e_=ec&&t_.call(r,"__wrapped__"),eb=ef&&t_.call(i,"__wrapped__");if(e_||eb){var ew=e_?r.value():r,eE=eb?i.value():i;return _||(_=new Rn),v(ew,eE,l,p,_)}}return!!em&&(_||(_=new Rn),function(r,i,l,p,v,_){var E=1&l,P=li(r),q=P.length;if(q!=li(i).length&&!E)return!1;for(var z=q;z--;){var M=P[z];if(!(E?M in i:t_.call(i,M)))return!1}var U=_.get(r),J=_.get(i);if(U&&J)return U==i&&J==r;var Q=!0;_.set(r,i),_.set(i,r);for(var X=E;++z<q;){var et=r[M=P[z]],es=i[M];if(p)var eo=E?p(es,et,M,i,r,_):p(et,es,M,r,i,_);if(!(eo===c?et===es||v(et,es,l,p,_):eo)){Q=!1;break}X||(X="constructor"==M)}if(Q&&!X){var ec=r.constructor,el=i.constructor;ec!=el&&"constructor"in r&&"constructor"in i&&!("function"==typeof ec&&ec instanceof ec&&"function"==typeof el&&el instanceof el)&&(Q=!1)}return _.delete(r),_.delete(i),Q}(r,i,l,p,v,_))}(r,i,l,p,oe,v):r!=r&&i!=i)}function kr(r,i,l,p){var v=l.length,_=v,E=!p;if(null==r)return!_;for(r=tc(r);v--;){var P=l[v];if(E&&P[2]?P[1]!==r[P[0]]:!(P[0]in r))return!1}for(;++v<_;){var q=(P=l[v])[0],z=r[q],M=P[1];if(E&&P[2]){if(z===c&&!(q in r))return!1}else{var U=new Rn;if(p)var J=p(z,M,q,r,i,U);if(!(J===c?oe(M,z,3,p,U):J))return!1}}return!0}function Xs(r){return!(!K(r)||tw&&tw in r)&&(Jn(r)?tS:e1).test(wt(r))}function Qs(r){return"function"==typeof r?r:null==r?fn:"object"==typeof r?iq(r)?js(r[0],r[1]):ks(r):ma(r)}function jr(r){if(!he(r))return rh(r);var i=[];for(var c in tc(r))t_.call(r,c)&&"constructor"!=c&&i.push(c);return i}function ni(r,i){return r<i}function Vs(r,i){var c=-1,l=an(r)?e7(r.length):[];return rk(r,function(r,p,v){l[++c]=i(r,p,v)}),l}function ks(r){var i=gi(r);return 1==i.length&&i[0][2]?Lu(i[0][0],i[0][1]):function(c){return c===r||kr(c,r,i)}}function js(r,i){var l;return _i(r)&&(l=i)==l&&!K(l)?Lu(Wn(r),i):function(l){var p=Si(l,r);return p===c&&p===i?Oi(l,r):oe(i,p,3)}}function Ke(r,i,l,p,v){r!==i&&rM(i,function(_,E){if(v||(v=new Rn),K(_))!function(r,i,l,p,v,_,E){var P=wi(r,l),q=wi(i,l),z=E.get(q);if(z){Yr(r,l,z);return}var M=_?_(P,q,l+"",r,i,E):c,U=M===c;if(U){var J=iq(q),Q=!J&&iz(q),X=!J&&!Q&&iK(q);M=q,J||Q||X?iq(P)?M=P:Z(P)?M=un(P):Q?(U=!1,M=hu(q,!0)):X?(U=!1,M=lu(q,!0)):M=[]:pe(q)||iD(q)?(M=P,iD(P)?M=oa(P):(!K(P)||Jn(P))&&(M=bu(q))):U=!1}U&&(E.set(q,M),v(M,q,p,_,E),E.delete(q)),Yr(r,l,M)}(r,i,E,l,Ke,p,v);else{var P=p?p(wi(r,E),_,E+"",r,i,v):c;P===c&&(P=_),Yr(r,E,P)}},on)}function nu(r,i){var l=r.length;if(l)return Zn(i+=i<0?l:0,l)?r[i]:c}function tu(r,i,c){i=i.length?G(i,function(r){return iq(r)?function(i){return _t(i,1===r.length?r[0]:r)}:r}):[fn];var l=-1;return i=G(i,hn(x())),function(r,i){var c=r.length;for(r.sort(i);c--;)r[c]=r[c].value;return r}(Vs(r,function(r,c,p){return{criteria:G(i,function(i){return i(r)}),index:++l,value:r}}),function(r,i){return function(r,i,c){for(var l=-1,p=r.criteria,v=i.criteria,_=p.length,E=c.length;++l<_;){var P=pu(p[l],v[l]);if(P){if(l>=E)return P;return P*("desc"==c[l]?-1:1)}}return r.index-i.index}(r,i,c)})}function eu(r,i,c){for(var l=-1,p=i.length,v={};++l<p;){var _=i[l],E=_t(r,_);c(E,_)&&fe(v,st(_,r),E)}return v}function ti(r,i,c,l){var p=l?rf:Tt,v=-1,_=i.length,E=r;for(r===i&&(i=un(i)),c&&(E=G(r,hn(c)));++v<_;)for(var P=0,q=i[v],z=c?c(q):q;(P=p(E,z,P,l))>-1;)E!==r&&tK.call(E,P,1),tK.call(r,P,1);return r}function ru(r,i){for(var c=r?i.length:0,l=c-1;c--;){var p=i[c];if(c==l||p!==v){var v=p;Zn(p)?tK.call(r,p,1):si(r,p)}}return r}function ei(r,i){return r+rs(rm()*(i-r+1))}function ri(r,i){var c="";if(!r||i<1||i>9007199254740991)return c;do i%2&&(c+=r),(i=rs(i/2))&&(r+=r);while(i);return c}function L(r,i){return rQ(Du(r,i,fn),r+"")}function fe(r,i,l,p){if(!K(r))return r;i=st(i,r);for(var v=-1,_=i.length,E=_-1,P=r;null!=P&&++v<_;){var q=Wn(i[v]),z=l;if("__proto__"===q||"constructor"===q||"prototype"===q)break;if(v!=E){var M=P[q];(z=p?p(M,q,P):c)===c&&(z=K(M)?M:Zn(i[v+1])?[]:{})}se(P,q,z),P=P[q]}return r}var r$=rP?function(r,i){return rP.set(r,i),r}:fn,rH=tW?function(r,i){return tW(r,"toString",{configurable:!0,enumerable:!1,value:bi(i),writable:!0})}:fn;function Cn(r,i,c){var l=-1,p=r.length;i<0&&(i=-i>p?0:p+i),(c=c>p?p:c)<0&&(c+=p),p=i>c?0:c-i>>>0,i>>>=0;for(var v=e7(p);++l<p;)v[l]=r[l+i];return v}function Mc(r,i){var c;return rk(r,function(r,l,p){return!(c=i(r,l,p))}),!!c}function Ye(r,i,c){var l=0,p=null==r?l:r.length;if("number"==typeof i&&i==i&&p<=2147483647){for(;l<p;){var v=l+p>>>1,_=r[v];null!==_&&!pn(_)&&(c?_<=i:_<i)?l=v+1:p=v}return p}return ii(r,i,fn,c)}function ii(r,i,l,p){var v=0,_=null==r?0:r.length;if(0===_)return 0;i=l(i);for(var E=i!=i,P=null===i,q=pn(i),z=i===c;v<_;){var M=rs((v+_)/2),U=l(r[M]),J=U!==c,Q=null===U,X=U==U,et=pn(U);if(E)var es=p||X;else es=z?X&&(p||J):P?X&&J&&(p||!Q):q?X&&J&&!Q&&(p||!et):!Q&&!et&&(p?U<=i:U<i);es?v=M+1:_=M}return rd(_,4294967294)}function su(r,i){for(var c=-1,l=r.length,p=0,v=[];++c<l;){var _=r[c],E=i?i(_):_;if(!c||!bn(E,P)){var P=E;v[p++]=0===_?0:_}}return v}function uu(r){return"number"==typeof r?r:pn(r)?E:+r}function ln(r){if("string"==typeof r)return r;if(iq(r))return G(r,ln)+"";if(pn(r))return rD?rD.call(r):"";var i=r+"";return"0"==i&&1/r==-_?"-0":i}function it(r,i,c){var l=-1,p=Ee,v=r.length,_=!0,E=[],P=E;if(c)_=!1,p=Dr;else if(v>=200){var q=i?null:rB(r);if(q)return Se(q);_=!1,p=jt,P=new gt}else P=i?[]:E;e:for(;++l<v;){var z=r[l],M=i?i(z):z;if(z=c||0!==z?z:0,_&&M==M){for(var U=P.length;U--;)if(P[U]===M)continue e;i&&P.push(M),E.push(z)}else p(P,M,c)||(P!==E&&P.push(M),E.push(z))}return E}function si(r,i){return i=st(i,r),null==(r=Hu(r,i))||delete r[Wn(In(i))]}function au(r,i,c,l){return fe(r,i,c(_t(r,i)),l)}function Ze(r,i,c,l){for(var p=r.length,v=l?p:-1;(l?v--:++v<p)&&i(r[v],v,r););return c?Cn(r,l?0:v,l?v+1:p):Cn(r,l?v+1:0,l?p:v)}function ou(r,i){var c=r;return c instanceof H&&(c=c.value()),Hr(i,function(r,i){return i.func.apply(i.thisArg,nt([r],i.args))},c)}function ui(r,i,c){var l=r.length;if(l<2)return l?it(r[0]):[];for(var p=-1,v=e7(l);++p<l;)for(var _=r[p],E=-1;++E<l;)E!=p&&(v[p]=ue(v[p]||_,r[E],i,c));return it(j(v,1),i,c)}function fu(r,i,l){for(var p=-1,v=r.length,_=i.length,E={};++p<v;){var P=p<_?i[p]:c;l(E,r[p],P)}return E}function ai(r){return Z(r)?r:[]}function oi(r){return"function"==typeof r?r:fn}function st(r,i){return iq(r)?r:_i(r,i)?[r]:rX(W(r))}function ut(r,i,l){var p=r.length;return l=l===c?p:l,!i&&l>=p?r:Cn(r,i,l)}var rK=tY||function(r){return tV.clearTimeout(r)};function hu(r,i){if(i)return r.slice();var c=r.length,l=tN?tN(c):new r.constructor(c);return r.copy(l),l}function fi(r){var i=new r.constructor(r.byteLength);return new tO(i).set(new tO(r)),i}function lu(r,i){var c=i?fi(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}function pu(r,i){if(r!==i){var l=r!==c,p=null===r,v=r==r,_=pn(r),E=i!==c,P=null===i,q=i==i,z=pn(i);if(!P&&!z&&!_&&r>i||_&&E&&q&&!P&&!z||p&&E&&q||!l&&q||!v)return 1;if(!p&&!_&&!z&&r<i||z&&l&&v&&!p&&!_||P&&l&&v||!E&&v||!q)return -1}return 0}function du(r,i,c,l){for(var p=-1,v=r.length,_=c.length,E=-1,P=i.length,q=rp(v-_,0),z=e7(P+q),M=!l;++E<P;)z[E]=i[E];for(;++p<_;)(M||p<v)&&(z[c[p]]=r[p]);for(;q--;)z[E++]=r[p++];return z}function gu(r,i,c,l){for(var p=-1,v=r.length,_=-1,E=c.length,P=-1,q=i.length,z=rp(v-E,0),M=e7(z+q),U=!l;++p<z;)M[p]=r[p];for(var J=p;++P<q;)M[J+P]=i[P];for(;++_<E;)(U||p<v)&&(M[J+c[_]]=r[p++]);return M}function un(r,i){var c=-1,l=r.length;for(i||(i=e7(l));++c<l;)i[c]=r[c];return i}function Un(r,i,l,p){var v=!l;l||(l={});for(var _=-1,E=i.length;++_<E;){var P=i[_],q=p?p(l[P],r[P],P,l,r):c;q===c&&(q=r[P]),v?zn(l,P,q):se(l,P,q)}return l}function Je(r,i){return function(c,l){var p=iq(c)?Vo:gc,v=i?i():{};return p(c,r,x(l,2),v)}}function Ft(r){return L(function(i,l){var p=-1,v=l.length,_=v>1?l[v-1]:c,E=v>2?l[2]:c;for(_=r.length>3&&"function"==typeof _?(v--,_):c,E&&rn(l[0],l[1],E)&&(_=v<3?c:_,v=1),i=tc(i);++p<v;){var P=l[p];P&&r(i,P,p,_)}return i})}function vu(r,i){return function(c,l){if(null==c)return c;if(!an(c))return r(c,l);for(var p=c.length,v=i?p:-1,_=tc(c);(i?v--:++v<p)&&!1!==l(_[v],v,_););return c}}function _u(r){return function(i,c,l){for(var p=-1,v=tc(i),_=l(i),E=_.length;E--;){var P=_[r?E:++p];if(!1===c(v[P],P,v))break}return i}}function mu(r){return function(i){var l=Lt(i=W(i))?On(i):c,p=l?l[0]:i.charAt(0),v=l?ut(l,1).join(""):i.slice(1);return p[r]()+v}}function Mt(r){return function(i){return Hr(va(ga(i).replace(tC,"")),r,"")}}function ce(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var c=rq(r.prototype),l=r.apply(c,i);return K(l)?l:c}}function wu(r){return function(i,l,p){var v=tc(i);if(!an(i)){var _=x(l,3);i=V(i),l=function(r){return _(v[r],r,v)}}var E=r(i,l,p);return E>-1?v[_?i[E]:E]:c}}function Pu(r){return Yn(function(i){var p=i.length,v=p,_=Pn.prototype.thru;for(r&&i.reverse();v--;){var E=i[v];if("function"!=typeof E)throw new tp(l);if(_&&!P&&"wrapper"==je(E))var P=new Pn([],!0)}for(v=P?v:p;++v<p;){var q=je(E=i[v]),z="wrapper"==q?rV(E):c;P=z&&mi(z[0])&&424==z[1]&&!z[4].length&&1==z[9]?P[je(z[0])].apply(P,z[3]):1==E.length&&mi(E)?P[q]():P.thru(E)}return function(){var r=arguments,c=r[0];if(P&&1==r.length&&iq(c))return P.plant(c).value();for(var l=0,v=p?i[l].apply(this,r):c;++l<p;)v=i[l].call(this,v);return v}})}function Xe(r,i,l,p,v,_,E,P,q,z){var M=128&i,U=1&i,J=2&i,Q=24&i,X=512&i,et=J?c:ce(r);return function y(){for(var es=arguments.length,eo=e7(es),ec=es;ec--;)eo[ec]=arguments[ec];if(Q)var el=qt(y),eh=function(r,i){for(var c=r.length,l=0;c--;)r[c]===i&&++l;return l}(eo,el);if(p&&(eo=du(eo,p,v,Q)),_&&(eo=gu(eo,_,E,Q)),es-=eh,Q&&es<z){var ep=tt(eo,el);return Iu(r,i,Xe,y.placeholder,l,eo,ep,P,q,z-es)}var ed=U?l:this,ef=J?ed[r]:r;return es=eo.length,P?eo=function(r,i){for(var l=r.length,p=rd(i.length,l),v=un(r);p--;){var _=i[p];r[p]=Zn(_,l)?v[_]:c}return r}(eo,P):X&&es>1&&eo.reverse(),M&&q<es&&(eo.length=q),this&&this!==tV&&this instanceof y&&(ef=et||ce(ef)),ef.apply(ed,eo)}}function Au(r,i){return function(c,l){var p,v;return p=i(l),v={},$n(c,function(i,c,l){r(v,p(i),c,l)}),v}}function Qe(r,i){return function(l,p){var v;if(l===c&&p===c)return i;if(l!==c&&(v=l),p!==c){if(v===c)return p;"string"==typeof l||"string"==typeof p?(l=ln(l),p=ln(p)):(l=uu(l),p=uu(p)),v=r(l,p)}return v}}function ci(r){return Yn(function(i){return i=G(i,hn(x())),L(function(c){var l=this;return r(i,function(r){return cn(r,l,c)})})})}function Ve(r,i){var l=(i=i===c?" ":ln(i)).length;if(l<2)return l?ri(i,r):i;var p=ri(i,t7(r/Dt(i)));return Lt(i)?ut(On(p),0,r).join(""):p.slice(0,r)}function Cu(r){return function(i,l,p){return p&&"number"!=typeof p&&rn(i,l,p)&&(l=p=c),i=Xn(i),l===c?(l=i,i=0):l=Xn(l),p=p===c?i<l?1:-1:Xn(p),function(r,i,c,l){for(var p=-1,v=rp(t7((i-r)/(c||1)),0),_=e7(v);v--;)_[l?v:++p]=r,r+=c;return _}(i,l,p,r)}}function ke(r){return function(i,c){return"string"==typeof i&&"string"==typeof c||(i=xn(i),c=xn(c)),r(i,c)}}function Iu(r,i,l,p,v,_,E,P,q,z){var M=8&i,U=M?E:c,J=M?c:E,Q=M?_:c,X=M?c:_;i|=M?32:64,4&(i&=~(M?64:32))||(i&=-4);var et=[r,i,v,Q,U,X,J,P,q,z],es=l.apply(c,et);return mi(r)&&rY(es,et),es.placeholder=p,$u(es,r,i)}function hi(r){var i=to[r];return function(r,c){if(r=xn(r),(c=null==c?0:rd(R(c),292))&&rc(r)){var l=(W(r)+"e").split("e");return+((l=(W(i(l[0]+"e"+(+l[1]+c)))+"e").split("e"))[0]+"e"+(+l[1]-c))}return i(r)}}var rB=rI&&1/Se(new rI([,-0]))[1]==_?function(r){return new rI(r)}:Di;function xu(r){return function(i){var c,l,p=rJ(i);return p==et?qr(i):p==eh?(c=-1,l=Array(i.size),i.forEach(function(r){l[++c]=[r,r]}),l):G(r(i),function(r){return[r,i[r]]})}}function Kn(r,i,p,_,E,P,q,z){var M=2&i;if(!M&&"function"!=typeof r)throw new tp(l);var U=_?_.length:0;if(U||(i&=-97,_=E=c),q=q===c?q:rp(R(q),0),z=z===c?z:R(z),U-=E?E.length:0,64&i){var J=_,Q=E;_=E=c}var X=M?c:rV(r),et=[r,i,p,_,E,J,Q,P,q,z];if(X&&function(r,i){var c=r[1],l=i[1],p=c|l,_=p<131,E=128==l&&8==c||128==l&&256==c&&r[7].length<=i[8]||384==l&&i[7].length<=i[8]&&8==c;if(_||E){1&l&&(r[2]=i[2],p|=1&c?0:4);var P=i[3];if(P){var q=r[3];r[3]=q?du(q,P,i[4]):P,r[4]=q?tt(r[3],v):i[4]}(P=i[5])&&(q=r[5],r[5]=q?gu(q,P,i[6]):P,r[6]=q?tt(r[5],v):i[6]),(P=i[7])&&(r[7]=P),128&l&&(r[8]=null==r[8]?i[8]:rd(r[8],i[8])),null==r[9]&&(r[9]=i[9]),r[0]=i[0],r[1]=p}}(et,X),r=et[0],i=et[1],p=et[2],_=et[3],E=et[4],(z=et[9]=et[9]===c?M?0:r.length:rp(et[9]-U,0))||!(24&i)||(i&=-25),i&&1!=i)8==i||16==i?(es=r,eo=i,ec=z,el=ce(es),eI=function s(){for(var r=arguments.length,i=e7(r),l=r,p=qt(s);l--;)i[l]=arguments[l];var v=r<3&&i[0]!==p&&i[r-1]!==p?[]:tt(i,p);return(r-=v.length)<ec?Iu(es,eo,Xe,s.placeholder,c,i,v,c,c,ec-r):cn(this&&this!==tV&&this instanceof s?el:es,this,i)}):32!=i&&33!=i||E.length?eI=Xe.apply(c,et):(eh=r,ep=i,ed=p,ef=_,eg=1&ep,ey=ce(eh),eI=function f(){for(var r=-1,i=arguments.length,c=-1,l=ef.length,p=e7(l+i),v=this&&this!==tV&&this instanceof f?ey:eh;++c<l;)p[c]=ef[c];for(;i--;)p[c++]=arguments[++r];return cn(v,eg?ed:this,p)});else var es,eo,ec,el,eh,ep,ed,ef,eg,ey,em,e_,eb,ew,eE,eI=(em=r,e_=i,eb=p,ew=1&e_,eE=ce(em),function o(){return(this&&this!==tV&&this instanceof o?eE:em).apply(ew?eb:this,arguments)});return $u((X?r$:rY)(eI,et),r,i)}function Eu(r,i,l,p){return r===c||bn(r,tg[l])&&!t_.call(p,l)?i:r}function yu(r,i,l,p,v,_){return K(r)&&K(i)&&(_.set(i,r),Ke(r,i,c,yu,_),_.delete(i)),r}function kc(r){return pe(r)?c:r}function Su(r,i,l,p,v,_){var E=1&l,P=r.length,q=i.length;if(P!=q&&!(E&&q>P))return!1;var z=_.get(r),M=_.get(i);if(z&&M)return z==i&&M==r;var U=-1,J=!0,Q=2&l?new gt:c;for(_.set(r,i),_.set(i,r);++U<P;){var X=r[U],et=i[U];if(p)var es=E?p(et,X,U,i,r,_):p(X,et,U,r,i,_);if(es!==c){if(es)continue;J=!1;break}if(Q){if(!Nr(i,function(r,i){if(!jt(Q,i)&&(X===r||v(X,r,l,p,_)))return Q.push(i)})){J=!1;break}}else if(!(X===et||v(X,et,l,p,_))){J=!1;break}}return _.delete(r),_.delete(i),J}function Yn(r){return rQ(Du(r,c,Bu),r+"")}function li(r){return Zs(r,V,rF)}function pi(r){return Zs(r,on,rG)}var rV=rP?function(r){return rP.get(r)}:Di;function je(r){for(var i=r.name+"",c=rR[i],l=t_.call(rR,i)?c.length:0;l--;){var p=c[l],v=p.func;if(null==v||v==r)return p.name}return i}function qt(r){return(t_.call(a,"placeholder")?a:r).placeholder}function x(){var r=a.iteratee||Ti;return r=r===Ti?Qs:r,arguments.length?r(arguments[0],arguments[1]):r}function nr(r,i){var c,l=r.__data__;return("string"==(c=typeof i)||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==i:null===i)?l["string"==typeof i?"string":"hash"]:l.map}function gi(r){for(var i=V(r),c=i.length;c--;){var l=i[c],p=r[l];i[c]=[l,p,p==p&&!K(p)]}return i}function mt(r,i){var l=null==r?c:r[i];return Xs(l)?l:c}var rF=ra?function(r){return null==r?[]:jn(ra(r=tc(r)),function(i){return tU.call(r,i)})}:Hi,rG=ra?function(r){for(var i=[];r;)nt(i,rF(r)),r=tj(r);return i}:Hi,rJ=en;function Ru(r,i,c){i=st(i,r);for(var l=-1,p=i.length,v=!1;++l<p;){var _=Wn(i[l]);if(!(v=null!=r&&c(r,_)))break;r=r[_]}return v||++l!=p?v:!!(p=null==r?0:r.length)&&ar(p)&&Zn(_,p)&&(iq(r)||iD(r))}function bu(r){return"function"!=typeof r.constructor||he(r)?{}:rq(tj(r))}function ah(r){return iq(r)||iD(r)||!!(tB&&r&&r[tB])}function Zn(r,i){var c=typeof r;return!!(i=i??9007199254740991)&&("number"==c||"symbol"!=c&&e6.test(r))&&r>-1&&r%1==0&&r<i}function rn(r,i,c){if(!K(c))return!1;var l=typeof i;return("number"==l?!!(an(c)&&Zn(i,c.length)):"string"==l&&i in c)&&bn(c[i],r)}function _i(r,i){if(iq(r))return!1;var c=typeof r;return!!("number"==c||"symbol"==c||"boolean"==c||null==r||pn(r))||eM.test(r)||!ez.test(r)||null!=i&&r in tc(i)}function mi(r){var i=je(r),c=a[i];if("function"!=typeof c||!(i in H.prototype))return!1;if(r===c)return!0;var l=rV(c);return!!l&&r===l[0]}(rb&&rJ(new rb(new ArrayBuffer(1)))!=ey||rw&&rJ(new rw)!=et||rE&&rJ(rE.resolve())!=ec||rI&&rJ(new rI)!=eh||rx&&rJ(new rx)!=ef)&&(rJ=function(r){var i=en(r),l=i==eo?r.constructor:c,p=l?wt(l):"";if(p)switch(p){case rO:return ey;case rN:return et;case rC:return ec;case rA:return eh;case rj:return ef}return i});var rW=ty?Jn:Ni;function he(r){var i=r&&r.constructor;return r===("function"==typeof i&&i.prototype||tg)}function Lu(r,i){return function(l){return null!=l&&l[r]===i&&(i!==c||r in tc(l))}}function Du(r,i,l){return i=rp(i===c?r.length-1:i,0),function(){for(var c=arguments,p=-1,v=rp(c.length-i,0),_=e7(v);++p<v;)_[p]=c[i+p];p=-1;for(var E=e7(i+1);++p<i;)E[p]=c[p];return E[i]=l(_),cn(r,this,E)}}function Hu(r,i){return i.length<2?r:_t(r,Cn(i,0,-1))}function wi(r,i){if(!("constructor"===i&&"function"==typeof r[i])&&"__proto__"!=i)return r[i]}var rY=Uu(r$),rZ=t8||function(r,i){return tV.setTimeout(r,i)},rQ=Uu(rH);function $u(r,i,c){var l,p,v=i+"";return rQ(r,function(r,i){var c=i.length;if(!c)return r;var l=c-1;return i[l]=(c>1?"& ":"")+i[l],i=i.join(c>2?", ":" "),r.replace(eV,`{
/* [wrapped with `+i+`] */
`)}(v,(l=(p=v.match(eF))?p[1].split(eG):[],mn(P,function(r){var i="_."+r[0];c&r[1]&&!Ee(l,i)&&l.push(i)}),l.sort())))}function Uu(r){var i=0,l=0;return function(){var p=rg(),v=16-(p-l);if(l=p,v>0){if(++i>=800)return arguments[0]}else i=0;return r.apply(c,arguments)}}function tr(r,i){var l=-1,p=r.length,v=p-1;for(i=i===c?p:i;++l<i;){var _=ei(l,v),E=r[_];r[_]=r[l],r[l]=E}return r.length=i,r}var rX=(e4=(eB=sr(function(r){var i=[];return 46===r.charCodeAt(0)&&i.push(""),r.replace(eU,function(r,c,l,p){i.push(l?p.replace(eY,"$1"):c||r)}),i},function(r){return 500===e4.size&&e4.clear(),r})).cache,eB);function Wn(r){if("string"==typeof r||pn(r))return r;var i=r+"";return"0"==i&&1/r==-_?"-0":i}function wt(r){if(null!=r){try{return tm.call(r)}catch{}try{return r+""}catch{}}return""}function Fu(r){if(r instanceof H)return r.clone();var i=new Pn(r.__wrapped__,r.__chain__);return i.__actions__=un(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}var r0=L(function(r,i){return Z(r)?ue(r,j(i,1,Z,!0)):[]}),r1=L(function(r,i){var l=In(i);return Z(l)&&(l=c),Z(r)?ue(r,j(i,1,Z,!0),x(l,2)):[]}),r5=L(function(r,i){var l=In(i);return Z(l)&&(l=c),Z(r)?ue(r,j(i,1,Z,!0),c,l):[]});function Mu(r,i,c){var l=null==r?0:r.length;if(!l)return -1;var p=null==c?0:R(c);return p<0&&(p=rp(l+p,0)),ye(r,x(i,3),p)}function qu(r,i,l){var p=null==r?0:r.length;if(!p)return -1;var v=p-1;return l!==c&&(v=R(l),v=l<0?rp(p+v,0):rd(v,p-1)),ye(r,x(i,3),v,!0)}function Bu(r){return(null==r?0:r.length)?j(r,1):[]}function Gu(r){return r&&r.length?r[0]:c}var r6=L(function(r){var i=G(r,ai);return i.length&&i[0]===r[0]?Vr(i):[]}),r2=L(function(r){var i=In(r),l=G(r,ai);return i===In(l)?i=c:l.pop(),l.length&&l[0]===r[0]?Vr(l,x(i,2)):[]}),r3=L(function(r){var i=In(r),l=G(r,ai);return(i="function"==typeof i?i:c)&&l.pop(),l.length&&l[0]===r[0]?Vr(l,c,i):[]});function In(r){var i=null==r?0:r.length;return i?r[i-1]:c}var r9=L(zu);function zu(r,i){return r&&r.length&&i&&i.length?ti(r,i):r}var r4=Yn(function(r,i){var c=null==r?0:r.length,l=Zr(r,i);return ru(r,G(i,function(r){return Zn(r,c)?+r:r}).sort(pu)),l});function Ai(r){return null==r?r:r_.call(r)}var r8=L(function(r){return it(j(r,1,Z,!0))}),r7=L(function(r){var i=In(r);return Z(i)&&(i=c),it(j(r,1,Z,!0),x(i,2))}),is=L(function(r){var i=In(r);return i="function"==typeof i?i:c,it(j(r,1,Z,!0),c,i)});function Ci(r){if(!(r&&r.length))return[];var i=0;return r=jn(r,function(r){if(Z(r))return i=rp(r.length,i),!0}),Fr(i,function(i){return G(r,$r(i))})}function Ku(r,i){if(!(r&&r.length))return[];var l=Ci(r);return null==i?l:G(l,function(r){return cn(i,c,r)})}var io=L(function(r,i){return Z(r)?ue(r,i):[]}),ic=L(function(r){return ui(jn(r,Z))}),il=L(function(r){var i=In(r);return Z(i)&&(i=c),ui(jn(r,Z),x(i,2))}),iu=L(function(r){var i=In(r);return i="function"==typeof i?i:c,ui(jn(r,Z),c,i)}),ih=L(Ci),ip=L(function(r){var i=r.length,l=i>1?r[i-1]:c;return l="function"==typeof l?(r.pop(),l):c,Ku(r,l)});function Yu(r){var i=a(r);return i.__chain__=!0,i}function er(r,i){return i(r)}var id=Yn(function(r){var i=r.length,l=i?r[0]:0,p=this.__wrapped__,s=function(i){return Zr(i,r)};return!(i>1)&&!this.__actions__.length&&p instanceof H&&Zn(l)?((p=p.slice(l,+l+(i?1:0))).__actions__.push({func:er,args:[s],thisArg:c}),new Pn(p,this.__chain__).thru(function(r){return i&&!r.length&&r.push(c),r})):this.thru(s)}),ig=Je(function(r,i,c){t_.call(r,c)?++r[c]:zn(r,c,1)}),iy=wu(Mu),im=wu(qu);function Zu(r,i){return(iq(r)?mn:rk)(r,x(i,3))}function Ju(r,i){return(iq(r)?function(r,i){for(var c=null==r?0:r.length;c--&&!1!==i(r[c],c,r););return r}:rz)(r,x(i,3))}var i_=Je(function(r,i,c){t_.call(r,c)?r[c].push(i):zn(r,c,[i])}),ib=L(function(r,i,c){var l=-1,p="function"==typeof i,v=an(r)?e7(r.length):[];return rk(r,function(r){v[++l]=p?cn(i,r,c):ae(r,i,c)}),v}),iw=Je(function(r,i,c){zn(r,c,i)});function rr(r,i){return(iq(r)?G:Vs)(r,x(i,3))}var iE=Je(function(r,i,c){r[c?0:1].push(i)},function(){return[[],[]]}),iI=L(function(r,i){if(null==r)return[];var c=i.length;return c>1&&rn(r,i[0],i[1])?i=[]:c>2&&rn(i[0],i[1],i[2])&&(i=[i[0]]),tu(r,j(i,1),[])}),ix=t6||function(){return tV.Date.now()};function Xu(r,i,l){return i=l?c:i,i=r&&null==i?r.length:i,Kn(r,128,c,c,c,c,i)}function Qu(r,i){var p;if("function"!=typeof i)throw new tp(l);return r=R(r),function(){return--r>0&&(p=i.apply(this,arguments)),r<=1&&(i=c),p}}var iS=L(function(r,i,c){var l=1;if(c.length){var p=tt(c,qt(iS));l|=32}return Kn(r,l,i,c,p)}),iP=L(function(r,i,c){var l=3;if(c.length){var p=tt(c,qt(iP));l|=32}return Kn(i,l,r,c,p)});function na(r,i,p){var v,_,E,P,q,z,M=0,U=!1,J=!1,Q=!0;if("function"!=typeof r)throw new tp(l);function I(i){var l=v,p=_;return v=_=c,M=i,P=r.apply(p,l)}function y(r){var l=r-z,p=r-M;return z===c||l>=i||l<0||J&&p>=E}function D(){var r,c,l,p=ix();if(y(p))return N(p);q=rZ(D,(r=p-z,c=p-M,l=i-r,J?rd(l,E-c):l))}function N(r){return q=c,Q&&v?I(r):(v=_=c,P)}function gn(){var r,l=ix(),p=y(l);if(v=arguments,_=this,z=l,p){if(q===c)return M=r=z,q=rZ(D,i),U?I(r):P;if(J)return rK(q),q=rZ(D,i),I(z)}return q===c&&(q=rZ(D,i)),P}return i=xn(i)||0,K(p)&&(U=!!p.leading,E=(J="maxWait"in p)?rp(xn(p.maxWait)||0,i):E,Q="trailing"in p?!!p.trailing:Q),gn.cancel=function(){q!==c&&rK(q),M=0,v=z=_=q=c},gn.flush=function(){return q===c?P:N(ix())},gn}var iR=L(function(r,i){return Gs(r,1,i)}),iO=L(function(r,i,c){return Gs(r,xn(i)||0,c)});function sr(r,i){if("function"!=typeof r||null!=i&&"function"!=typeof i)throw new tp(l);var e=function(){var c=arguments,l=i?i.apply(this,c):c[0],p=e.cache;if(p.has(l))return p.get(l);var v=r.apply(this,c);return e.cache=p.set(l,v)||p,v};return e.cache=new(sr.Cache||Gn),e}function ur(r){if("function"!=typeof r)throw new tp(l);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}sr.Cache=Gn;var iN=L(function(r,i){var c=(i=1==i.length&&iq(i[0])?G(i[0],hn(x())):G(j(i,1),hn(x()))).length;return L(function(l){for(var p=-1,v=rd(l.length,c);++p<v;)l[p]=i[p].call(this,l[p]);return cn(r,this,l)})}),iC=L(function(r,i){var l=tt(i,qt(iC));return Kn(r,32,c,i,l)}),iA=L(function(r,i){var l=tt(i,qt(iA));return Kn(r,64,c,i,l)}),ij=Yn(function(r,i){return Kn(r,256,c,c,c,i)});function bn(r,i){return r===i||r!=r&&i!=i}var iT=ke(Qr),iL=ke(function(r,i){return r>=i}),iD=Js(function(){return arguments}())?Js:function(r){return Y(r)&&t_.call(r,"callee")&&!tU.call(r,"callee")},iq=e7.isArray,ik=tZ?hn(tZ):function(r){return Y(r)&&en(r)==eg};function an(r){return null!=r&&ar(r.length)&&!Jn(r)}function Z(r){return Y(r)&&an(r)}var iz=ro||Ni,iM=tQ?hn(tQ):function(r){return Y(r)&&en(r)==U};function Ei(r){if(!Y(r))return!1;var i=en(r);return i==J||"[object DOMException]"==i||"string"==typeof r.message&&"string"==typeof r.name&&!pe(r)}function Jn(r){if(!K(r))return!1;var i=en(r);return i==Q||i==X||"[object AsyncFunction]"==i||"[object Proxy]"==i}function ea(r){return"number"==typeof r&&r==R(r)}function ar(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991}function K(r){var i=typeof r;return null!=r&&("object"==i||"function"==i)}function Y(r){return null!=r&&"object"==typeof r}var iU=tX?hn(tX):function(r){return Y(r)&&rJ(r)==et};function ia(r){return"number"==typeof r||Y(r)&&en(r)==es}function pe(r){if(!Y(r)||en(r)!=eo)return!1;var i=tj(r);if(null===i)return!0;var c=t_.call(i,"constructor")&&i.constructor;return"function"==typeof c&&c instanceof c&&tm.call(c)==tI}var i$=t0?hn(t0):function(r){return Y(r)&&en(r)==el},iH=t1?hn(t1):function(r){return Y(r)&&rJ(r)==eh};function or(r){return"string"==typeof r||!iq(r)&&Y(r)&&en(r)==ep}function pn(r){return"symbol"==typeof r||Y(r)&&en(r)==ed}var iK=t5?hn(t5):function(r){return Y(r)&&ar(r.length)&&!!tz[en(r)]},iB=ke(ni),iV=ke(function(r,i){return r<=i});function ua(r){if(!r)return[];if(an(r))return or(r)?On(r):un(r);if(tF&&r[tF])return function(r){for(var i,c=[];!(i=r.next()).done;)c.push(i.value);return c}(r[tF]());var i=rJ(r);return(i==et?qr:i==eh?Se:Gt)(r)}function Xn(r){return r?(r=xn(r))===_||r===-_?(r<0?-1:1)*17976931348623157e292:r==r?r:0:0===r?r:0}function R(r){var i=Xn(r),c=i%1;return i==i?c?i-c:i:0}function aa(r){return r?vt(R(r),0,4294967295):0}function xn(r){if("number"==typeof r)return r;if(pn(r))return E;if(K(r)){var i="function"==typeof r.valueOf?r.valueOf():r;r=K(i)?i+"":i}if("string"!=typeof r)return 0===r?r:+r;r=ys(r);var c=e0.test(r);return c||e5.test(r)?tH(r.slice(2),c?2:8):eX.test(r)?E:+r}function oa(r){return Un(r,on(r))}function W(r){return null==r?"":ln(r)}var iF=Ft(function(r,i){if(he(i)||an(i)){Un(i,V(i),r);return}for(var c in i)t_.call(i,c)&&se(r,c,i[c])}),iG=Ft(function(r,i){Un(i,on(i),r)}),iJ=Ft(function(r,i,c,l){Un(i,on(i),r,l)}),iW=Ft(function(r,i,c,l){Un(i,V(i),r,l)}),iY=Yn(Zr),iZ=L(function(r,i){r=tc(r);var l=-1,p=i.length,v=p>2?i[2]:c;for(v&&rn(i[0],i[1],v)&&(p=1);++l<p;)for(var _=i[l],E=on(_),P=-1,q=E.length;++P<q;){var z=E[P],M=r[z];(M===c||bn(M,tg[z])&&!t_.call(r,z))&&(r[z]=_[z])}return r}),iQ=L(function(r){return r.push(c,yu),cn(i6,c,r)});function Si(r,i,l){var p=null==r?c:_t(r,i);return p===c?l:p}function Oi(r,i){return null!=r&&Ru(r,i,Ac)}var iX=Au(function(r,i,c){null!=i&&"function"!=typeof i.toString&&(i=tE.call(i)),r[i]=c},bi(fn)),i0=Au(function(r,i,c){null!=i&&"function"!=typeof i.toString&&(i=tE.call(i)),t_.call(r,i)?r[i].push(c):r[i]=[c]},x),i1=L(ae);function V(r){return an(r)?Fs(r):jr(r)}function on(r){return an(r)?Fs(r,!0):function(r){if(!K(r))return function(r){var i=[];if(null!=r)for(var c in tc(r))i.push(c);return i}(r);var i=he(r),c=[];for(var l in r)"constructor"==l&&(i||!t_.call(r,l))||c.push(l);return c}(r)}var i5=Ft(function(r,i,c){Ke(r,i,c)}),i6=Ft(function(r,i,c,l){Ke(r,i,c,l)}),i2=Yn(function(r,i){var c={};if(null==r)return c;var l=!1;i=G(i,function(i){return i=st(i,r),l||(l=i.length>1),i}),Un(r,pi(r),c),l&&(c=An(c,7,kc));for(var p=i.length;p--;)si(c,i[p]);return c}),i3=Yn(function(r,i){return null==r?{}:eu(r,i,function(i,c){return Oi(r,c)})});function ha(r,i){if(null==r)return{};var c=G(pi(r),function(r){return[r]});return i=x(i),eu(r,c,function(r,c){return i(r,c[0])})}var i9=xu(V),i4=xu(on);function Gt(r){return null==r?[]:Mr(r,V(r))}var i8=Mt(function(r,i,c){return i=i.toLowerCase(),r+(c?da(i):i)});function da(r){return nl(W(r).toLowerCase())}function ga(r){return(r=W(r))&&r.replace(e2,t2).replace(tA,"")}var i7=Mt(function(r,i,c){return r+(c?"-":"")+i.toLowerCase()}),ne=Mt(function(r,i,c){return r+(c?" ":"")+i.toLowerCase()}),nn=mu("toLowerCase"),ns=Mt(function(r,i,c){return r+(c?"_":"")+i.toLowerCase()}),no=Mt(function(r,i,c){return r+(c?" ":"")+nl(i)}),nc=Mt(function(r,i,c){return r+(c?" ":"")+i.toUpperCase()}),nl=mu("toUpperCase");function va(r,i,l){var p;return r=W(r),(i=l?c:i)===c?(p=r,tD.test(p))?r.match(tT)||[]:r.match(eJ)||[]:r.match(i)||[]}var nh=L(function(r,i){try{return cn(r,c,i)}catch(r){return Ei(r)?r:new ts(r)}}),np=Yn(function(r,i){return mn(i,function(i){zn(r,i=Wn(i),iS(r[i],r))}),r});function bi(r){return function(){return r}}var nd=Pu(),nf=Pu(!0);function fn(r){return r}function Ti(r){return Qs("function"==typeof r?r:An(r,1))}var ng=L(function(r,i){return function(c){return ae(c,r,i)}}),ny=L(function(r,i){return function(c){return ae(r,c,i)}});function Li(r,i,c){var l=V(i),p=ze(i,l);null!=c||K(i)&&(p.length||!l.length)||(c=i,i=r,r=this,p=ze(i,V(i)));var v=!(K(c)&&"chain"in c)||!!c.chain,_=Jn(r);return mn(p,function(c){var l=i[c];r[c]=l,_&&(r.prototype[c]=function(){var i=this.__chain__;if(v||i){var c=r(this.__wrapped__);return(c.__actions__=un(this.__actions__)).push({func:l,args:arguments,thisArg:r}),c.__chain__=i,c}return l.apply(r,nt([this.value()],arguments))})}),r}function Di(){}var nm=ci(G),n_=ci(As),nb=ci(Nr);function ma(r){return _i(r)?$r(Wn(r)):function(i){return _t(i,r)}}var nw=Cu(),nE=Cu(!0);function Hi(){return[]}function Ni(){return!1}var nI=Qe(function(r,i){return r+i},0),nx=hi("ceil"),nS=Qe(function(r,i){return r/i},1),nP=hi("floor"),nR=Qe(function(r,i){return r*i},1),nO=hi("round"),nN=Qe(function(r,i){return r-i},0);return a.after=function(r,i){if("function"!=typeof i)throw new tp(l);return r=R(r),function(){if(--r<1)return i.apply(this,arguments)}},a.ary=Xu,a.assign=iF,a.assignIn=iG,a.assignInWith=iJ,a.assignWith=iW,a.at=iY,a.before=Qu,a.bind=iS,a.bindAll=np,a.bindKey=iP,a.castArray=function(){if(!arguments.length)return[];var r=arguments[0];return iq(r)?r:[r]},a.chain=Yu,a.chunk=function(r,i,l){i=(l?rn(r,i,l):i===c)?1:rp(R(i),0);var p=null==r?0:r.length;if(!p||i<1)return[];for(var v=0,_=0,E=e7(t7(p/i));v<p;)E[_++]=Cn(r,v,v+=i);return E},a.compact=function(r){for(var i=-1,c=null==r?0:r.length,l=0,p=[];++i<c;){var v=r[i];v&&(p[l++]=v)}return p},a.concat=function(){var r=arguments.length;if(!r)return[];for(var i=e7(r-1),c=arguments[0],l=r;l--;)i[l-1]=arguments[l];return nt(iq(c)?un(c):[c],j(i,1))},a.cond=function(r){var i=null==r?0:r.length,c=x();return r=i?G(r,function(r){if("function"!=typeof r[1])throw new tp(l);return[c(r[0]),r[1]]}):[],L(function(c){for(var l=-1;++l<i;){var p=r[l];if(cn(p[0],this,c))return cn(p[1],this,c)}})},a.conforms=function(r){var i,c;return c=V(i=An(r,1)),function(r){return Bs(r,i,c)}},a.constant=bi,a.countBy=ig,a.create=function(r,i){var c=rq(r);return null==i?c:qs(c,i)},a.curry=function ku(r,i,l){i=l?c:i;var p=Kn(r,8,c,c,c,c,c,i);return p.placeholder=ku.placeholder,p},a.curryRight=function ju(r,i,l){i=l?c:i;var p=Kn(r,16,c,c,c,c,c,i);return p.placeholder=ju.placeholder,p},a.debounce=na,a.defaults=iZ,a.defaultsDeep=iQ,a.defer=iR,a.delay=iO,a.difference=r0,a.differenceBy=r1,a.differenceWith=r5,a.drop=function(r,i,l){var p=null==r?0:r.length;return p?Cn(r,(i=l||i===c?1:R(i))<0?0:i,p):[]},a.dropRight=function(r,i,l){var p=null==r?0:r.length;return p?Cn(r,0,(i=p-(i=l||i===c?1:R(i)))<0?0:i):[]},a.dropRightWhile=function(r,i){return r&&r.length?Ze(r,x(i,3),!0,!0):[]},a.dropWhile=function(r,i){return r&&r.length?Ze(r,x(i,3),!0):[]},a.fill=function(r,i,l,p){var v=null==r?0:r.length;return v?(l&&"number"!=typeof l&&rn(r,i,l)&&(l=0,p=v),function(r,i,l,p){var v=r.length;for((l=R(l))<0&&(l=-l>v?0:v+l),(p=p===c||p>v?v:R(p))<0&&(p+=v),p=l>p?0:aa(p);l<p;)r[l++]=i;return r}(r,i,l,p)):[]},a.filter=function(r,i){return(iq(r)?jn:Ks)(r,x(i,3))},a.flatMap=function(r,i){return j(rr(r,i),1)},a.flatMapDeep=function(r,i){return j(rr(r,i),_)},a.flatMapDepth=function(r,i,l){return l=l===c?1:R(l),j(rr(r,i),l)},a.flatten=Bu,a.flattenDeep=function(r){return(null==r?0:r.length)?j(r,_):[]},a.flattenDepth=function(r,i){return(null==r?0:r.length)?j(r,i=i===c?1:R(i)):[]},a.flip=function(r){return Kn(r,512)},a.flow=nd,a.flowRight=nf,a.fromPairs=function(r){for(var i=-1,c=null==r?0:r.length,l={};++i<c;){var p=r[i];l[p[0]]=p[1]}return l},a.functions=function(r){return null==r?[]:ze(r,V(r))},a.functionsIn=function(r){return null==r?[]:ze(r,on(r))},a.groupBy=i_,a.initial=function(r){return(null==r?0:r.length)?Cn(r,0,-1):[]},a.intersection=r6,a.intersectionBy=r2,a.intersectionWith=r3,a.invert=iX,a.invertBy=i0,a.invokeMap=ib,a.iteratee=Ti,a.keyBy=iw,a.keys=V,a.keysIn=on,a.map=rr,a.mapKeys=function(r,i){var c={};return i=x(i,3),$n(r,function(r,l,p){zn(c,i(r,l,p),r)}),c},a.mapValues=function(r,i){var c={};return i=x(i,3),$n(r,function(r,l,p){zn(c,l,i(r,l,p))}),c},a.matches=function(r){return ks(An(r,1))},a.matchesProperty=function(r,i){return js(r,An(i,1))},a.memoize=sr,a.merge=i5,a.mergeWith=i6,a.method=ng,a.methodOf=ny,a.mixin=Li,a.negate=ur,a.nthArg=function(r){return r=R(r),L(function(i){return nu(i,r)})},a.omit=i2,a.omitBy=function(r,i){return ha(r,ur(x(i)))},a.once=function(r){return Qu(2,r)},a.orderBy=function(r,i,l,p){return null==r?[]:(iq(i)||(i=null==i?[]:[i]),iq(l=p?c:l)||(l=null==l?[]:[l]),tu(r,i,l))},a.over=nm,a.overArgs=iN,a.overEvery=n_,a.overSome=nb,a.partial=iC,a.partialRight=iA,a.partition=iE,a.pick=i3,a.pickBy=ha,a.property=ma,a.propertyOf=function(r){return function(i){return null==r?c:_t(r,i)}},a.pull=r9,a.pullAll=zu,a.pullAllBy=function(r,i,c){return r&&r.length&&i&&i.length?ti(r,i,x(c,2)):r},a.pullAllWith=function(r,i,l){return r&&r.length&&i&&i.length?ti(r,i,c,l):r},a.pullAt=r4,a.range=nw,a.rangeRight=nE,a.rearg=ij,a.reject=function(r,i){return(iq(r)?jn:Ks)(r,ur(x(i,3)))},a.remove=function(r,i){var c=[];if(!(r&&r.length))return c;var l=-1,p=[],v=r.length;for(i=x(i,3);++l<v;){var _=r[l];i(_,l,r)&&(c.push(_),p.push(l))}return ru(r,p),c},a.rest=function(r,i){if("function"!=typeof r)throw new tp(l);return L(r,i=i===c?i:R(i))},a.reverse=Ai,a.sampleSize=function(r,i,l){return i=(l?rn(r,i,l):i===c)?1:R(i),(iq(r)?function(r,i){return tr(un(r),vt(i,0,r.length))}:function(r,i){var c=Gt(r);return tr(c,vt(i,0,c.length))})(r,i)},a.set=function(r,i,c){return null==r?r:fe(r,i,c)},a.setWith=function(r,i,l,p){return p="function"==typeof p?p:c,null==r?r:fe(r,i,l,p)},a.shuffle=function(r){return(iq(r)?function(r){return tr(un(r))}:function(r){return tr(Gt(r))})(r)},a.slice=function(r,i,l){var p=null==r?0:r.length;return p?(l&&"number"!=typeof l&&rn(r,i,l)?(i=0,l=p):(i=null==i?0:R(i),l=l===c?p:R(l)),Cn(r,i,l)):[]},a.sortBy=iI,a.sortedUniq=function(r){return r&&r.length?su(r):[]},a.sortedUniqBy=function(r,i){return r&&r.length?su(r,x(i,2)):[]},a.split=function(r,i,l){return l&&"number"!=typeof l&&rn(r,i,l)&&(i=l=c),(l=l===c?4294967295:l>>>0)?(r=W(r))&&("string"==typeof i||null!=i&&!i$(i))&&!(i=ln(i))&&Lt(r)?ut(On(r),0,l):r.split(i,l):[]},a.spread=function(r,i){if("function"!=typeof r)throw new tp(l);return i=null==i?0:rp(R(i),0),L(function(c){var l=c[i],p=ut(c,0,i);return l&&nt(p,l),cn(r,this,p)})},a.tail=function(r){var i=null==r?0:r.length;return i?Cn(r,1,i):[]},a.take=function(r,i,l){return r&&r.length?Cn(r,0,(i=l||i===c?1:R(i))<0?0:i):[]},a.takeRight=function(r,i,l){var p=null==r?0:r.length;return p?Cn(r,(i=p-(i=l||i===c?1:R(i)))<0?0:i,p):[]},a.takeRightWhile=function(r,i){return r&&r.length?Ze(r,x(i,3),!1,!0):[]},a.takeWhile=function(r,i){return r&&r.length?Ze(r,x(i,3)):[]},a.tap=function(r,i){return i(r),r},a.throttle=function(r,i,c){var p=!0,v=!0;if("function"!=typeof r)throw new tp(l);return K(c)&&(p="leading"in c?!!c.leading:p,v="trailing"in c?!!c.trailing:v),na(r,i,{leading:p,maxWait:i,trailing:v})},a.thru=er,a.toArray=ua,a.toPairs=i9,a.toPairsIn=i4,a.toPath=function(r){return iq(r)?G(r,Wn):pn(r)?[r]:un(rX(W(r)))},a.toPlainObject=oa,a.transform=function(r,i,c){var l=iq(r),p=l||iz(r)||iK(r);if(i=x(i,4),null==c){var v=r&&r.constructor;c=p?l?new v:[]:K(r)&&Jn(v)?rq(tj(r)):{}}return(p?mn:$n)(r,function(r,l,p){return i(c,r,l,p)}),c},a.unary=function(r){return Xu(r,1)},a.union=r8,a.unionBy=r7,a.unionWith=is,a.uniq=function(r){return r&&r.length?it(r):[]},a.uniqBy=function(r,i){return r&&r.length?it(r,x(i,2)):[]},a.uniqWith=function(r,i){return i="function"==typeof i?i:c,r&&r.length?it(r,c,i):[]},a.unset=function(r,i){return null==r||si(r,i)},a.unzip=Ci,a.unzipWith=Ku,a.update=function(r,i,c){return null==r?r:au(r,i,oi(c))},a.updateWith=function(r,i,l,p){return p="function"==typeof p?p:c,null==r?r:au(r,i,oi(l),p)},a.values=Gt,a.valuesIn=function(r){return null==r?[]:Mr(r,on(r))},a.without=io,a.words=va,a.wrap=function(r,i){return iC(oi(i),r)},a.xor=ic,a.xorBy=il,a.xorWith=iu,a.zip=ih,a.zipObject=function(r,i){return fu(r||[],i||[],se)},a.zipObjectDeep=function(r,i){return fu(r||[],i||[],fe)},a.zipWith=ip,a.entries=i9,a.entriesIn=i4,a.extend=iG,a.extendWith=iJ,Li(a,a),a.add=nI,a.attempt=nh,a.camelCase=i8,a.capitalize=da,a.ceil=nx,a.clamp=function(r,i,l){return l===c&&(l=i,i=c),l!==c&&(l=(l=xn(l))==l?l:0),i!==c&&(i=(i=xn(i))==i?i:0),vt(xn(r),i,l)},a.clone=function(r){return An(r,4)},a.cloneDeep=function(r){return An(r,5)},a.cloneDeepWith=function(r,i){return An(r,5,i="function"==typeof i?i:c)},a.cloneWith=function(r,i){return An(r,4,i="function"==typeof i?i:c)},a.conformsTo=function(r,i){return null==i||Bs(r,i,V(i))},a.deburr=ga,a.defaultTo=function(r,i){return null==r||r!=r?i:r},a.divide=nS,a.endsWith=function(r,i,l){r=W(r),i=ln(i);var p=r.length,v=l=l===c?p:vt(R(l),0,p);return(l-=i.length)>=0&&r.slice(l,v)==i},a.eq=bn,a.escape=function(r){return(r=W(r))&&eT.test(r)?r.replace(eA,t3):r},a.escapeRegExp=function(r){return(r=W(r))&&eH.test(r)?r.replace(e$,"\\$&"):r},a.every=function(r,i,l){var p=iq(r)?As:mc;return l&&rn(r,i,l)&&(i=c),p(r,x(i,3))},a.find=iy,a.findIndex=Mu,a.findKey=function(r,i){return Cs(r,x(i,3),$n)},a.findLast=im,a.findLastIndex=qu,a.findLastKey=function(r,i){return Cs(r,x(i,3),Xr)},a.floor=nP,a.forEach=Zu,a.forEachRight=Ju,a.forIn=function(r,i){return null==r?r:rM(r,x(i,3),on)},a.forInRight=function(r,i){return null==r?r:rU(r,x(i,3),on)},a.forOwn=function(r,i){return r&&$n(r,x(i,3))},a.forOwnRight=function(r,i){return r&&Xr(r,x(i,3))},a.get=Si,a.gt=iT,a.gte=iL,a.has=function(r,i){return null!=r&&Ru(r,i,Pc)},a.hasIn=Oi,a.head=Gu,a.identity=fn,a.includes=function(r,i,c,l){r=an(r)?r:Gt(r),c=c&&!l?R(c):0;var p=r.length;return c<0&&(c=rp(p+c,0)),or(r)?c<=p&&r.indexOf(i,c)>-1:!!p&&Tt(r,i,c)>-1},a.indexOf=function(r,i,c){var l=null==r?0:r.length;if(!l)return -1;var p=null==c?0:R(c);return p<0&&(p=rp(l+p,0)),Tt(r,i,p)},a.inRange=function(r,i,l){var p,v,_;return i=Xn(i),l===c?(l=i,i=0):l=Xn(l),(p=r=xn(r))>=rd(v=i,_=l)&&p<rp(v,_)},a.invoke=i1,a.isArguments=iD,a.isArray=iq,a.isArrayBuffer=ik,a.isArrayLike=an,a.isArrayLikeObject=Z,a.isBoolean=function(r){return!0===r||!1===r||Y(r)&&en(r)==M},a.isBuffer=iz,a.isDate=iM,a.isElement=function(r){return Y(r)&&1===r.nodeType&&!pe(r)},a.isEmpty=function(r){if(null==r)return!0;if(an(r)&&(iq(r)||"string"==typeof r||"function"==typeof r.splice||iz(r)||iK(r)||iD(r)))return!r.length;var i=rJ(r);if(i==et||i==eh)return!r.size;if(he(r))return!jr(r).length;for(var c in r)if(t_.call(r,c))return!1;return!0},a.isEqual=function(r,i){return oe(r,i)},a.isEqualWith=function(r,i,l){var p=(l="function"==typeof l?l:c)?l(r,i):c;return p===c?oe(r,i,c,l):!!p},a.isError=Ei,a.isFinite=function(r){return"number"==typeof r&&rc(r)},a.isFunction=Jn,a.isInteger=ea,a.isLength=ar,a.isMap=iU,a.isMatch=function(r,i){return r===i||kr(r,i,gi(i))},a.isMatchWith=function(r,i,l){return l="function"==typeof l?l:c,kr(r,i,gi(i),l)},a.isNaN=function(r){return ia(r)&&r!=+r},a.isNative=function(r){if(rW(r))throw new ts("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Xs(r)},a.isNil=function(r){return null==r},a.isNull=function(r){return null===r},a.isNumber=ia,a.isObject=K,a.isObjectLike=Y,a.isPlainObject=pe,a.isRegExp=i$,a.isSafeInteger=function(r){return ea(r)&&r>=-9007199254740991&&r<=9007199254740991},a.isSet=iH,a.isString=or,a.isSymbol=pn,a.isTypedArray=iK,a.isUndefined=function(r){return r===c},a.isWeakMap=function(r){return Y(r)&&rJ(r)==ef},a.isWeakSet=function(r){return Y(r)&&"[object WeakSet]"==en(r)},a.join=function(r,i){return null==r?"":rl.call(r,i)},a.kebabCase=i7,a.last=In,a.lastIndexOf=function(r,i,l){var p=null==r?0:r.length;if(!p)return -1;var v=p;return l!==c&&(v=(v=R(l))<0?rp(p+v,0):rd(v,p-1)),i==i?function(r,i,c){for(var l=c+1;l--&&r[l]!==i;);return l}(r,i,v):ye(r,Is,v,!0)},a.lowerCase=ne,a.lowerFirst=nn,a.lt=iB,a.lte=iV,a.max=function(r){return r&&r.length?Ge(r,fn,Qr):c},a.maxBy=function(r,i){return r&&r.length?Ge(r,x(i,2),Qr):c},a.mean=function(r){return xs(r,fn)},a.meanBy=function(r,i){return xs(r,x(i,2))},a.min=function(r){return r&&r.length?Ge(r,fn,ni):c},a.minBy=function(r,i){return r&&r.length?Ge(r,x(i,2),ni):c},a.stubArray=Hi,a.stubFalse=Ni,a.stubObject=function(){return{}},a.stubString=function(){return""},a.stubTrue=function(){return!0},a.multiply=nR,a.nth=function(r,i){return r&&r.length?nu(r,R(i)):c},a.noConflict=function(){return tV._===this&&(tV._=tx),this},a.noop=Di,a.now=ix,a.pad=function(r,i,c){r=W(r);var l=(i=R(i))?Dt(r):0;if(!i||l>=i)return r;var p=(i-l)/2;return Ve(rs(p),c)+r+Ve(t7(p),c)},a.padEnd=function(r,i,c){r=W(r);var l=(i=R(i))?Dt(r):0;return i&&l<i?r+Ve(i-l,c):r},a.padStart=function(r,i,c){r=W(r);var l=(i=R(i))?Dt(r):0;return i&&l<i?Ve(i-l,c)+r:r},a.parseInt=function(r,i,c){return c||null==i?i=0:i&&(i=+i),ry(W(r).replace(eK,""),i||0)},a.random=function(r,i,l){if(l&&"boolean"!=typeof l&&rn(r,i,l)&&(i=l=c),l===c&&("boolean"==typeof i?(l=i,i=c):"boolean"==typeof r&&(l=r,r=c)),r===c&&i===c?(r=0,i=1):(r=Xn(r),i===c?(i=r,r=0):i=Xn(i)),r>i){var p=r;r=i,i=p}if(l||r%1||i%1){var v=rm();return rd(r+v*(i-r+t$("1e-"+((v+"").length-1))),i)}return ei(r,i)},a.reduce=function(r,i,c){var l=iq(r)?Hr:Es,p=arguments.length<3;return l(r,x(i,4),c,p,rk)},a.reduceRight=function(r,i,c){var l=iq(r)?jo:Es,p=arguments.length<3;return l(r,x(i,4),c,p,rz)},a.repeat=function(r,i,l){return i=(l?rn(r,i,l):i===c)?1:R(i),ri(W(r),i)},a.replace=function(){var r=arguments,i=W(r[0]);return r.length<3?i:i.replace(r[1],r[2])},a.result=function(r,i,l){i=st(i,r);var p=-1,v=i.length;for(v||(v=1,r=c);++p<v;){var _=null==r?c:r[Wn(i[p])];_===c&&(p=v,_=l),r=Jn(_)?_.call(r):_}return r},a.round=nO,a.runInContext=h,a.sample=function(r){return(iq(r)?Ms:function(r){return Ms(Gt(r))})(r)},a.size=function(r){if(null==r)return 0;if(an(r))return or(r)?Dt(r):r.length;var i=rJ(r);return i==et||i==eh?r.size:jr(r).length},a.snakeCase=ns,a.some=function(r,i,l){var p=iq(r)?Nr:Mc;return l&&rn(r,i,l)&&(i=c),p(r,x(i,3))},a.sortedIndex=function(r,i){return Ye(r,i)},a.sortedIndexBy=function(r,i,c){return ii(r,i,x(c,2))},a.sortedIndexOf=function(r,i){var c=null==r?0:r.length;if(c){var l=Ye(r,i);if(l<c&&bn(r[l],i))return l}return -1},a.sortedLastIndex=function(r,i){return Ye(r,i,!0)},a.sortedLastIndexBy=function(r,i,c){return ii(r,i,x(c,2),!0)},a.sortedLastIndexOf=function(r,i){if(null==r?0:r.length){var c=Ye(r,i,!0)-1;if(bn(r[c],i))return c}return -1},a.startCase=no,a.startsWith=function(r,i,c){return r=W(r),c=null==c?0:vt(R(c),0,r.length),i=ln(i),r.slice(c,c+i.length)==i},a.subtract=nN,a.sum=function(r){return r&&r.length?Wr(r,fn):0},a.sumBy=function(r,i){return r&&r.length?Wr(r,x(i,2)):0},a.template=function(r,i,l){var p=a.templateSettings;l&&rn(r,i,l)&&(i=c),r=W(r),i=iJ({},i,p,Eu);var v,_,E=iJ({},i.imports,p.imports,Eu),P=V(E),q=Mr(E,P),z=0,M=i.interpolate||e3,U="__p += '",J=tl((i.escape||e3).source+"|"+M.source+"|"+(M===ek?eZ:e3).source+"|"+(i.evaluate||e3).source+"|$","g"),Q="//# sourceURL="+(t_.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tk+"]")+`
`;r.replace(J,function(i,c,l,p,E,P){return l||(l=p),U+=r.slice(z,P).replace(e9,cf),c&&(v=!0,U+=`' +
__e(`+c+`) +
'`),E&&(_=!0,U+=`';
`+E+`;
__p += '`),l&&(U+=`' +
((__t = (`+l+`)) == null ? '' : __t) +
'`),z=P+i.length,i}),U+=`';
`;var X=t_.call(i,"variable")&&i.variable;if(X){if(eW.test(X))throw new ts("Invalid `variable` option passed into `_.template`")}else U=`with (obj) {
`+U+`
}
`;U=(_?U.replace(eR,""):U).replace(eO,"$1").replace(eN,"$1;"),U="function("+(X||"obj")+`) {
`+(X?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(_?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+U+`return __p
}`;var et=nh(function(){return ta(P,Q+"return "+U).apply(c,q)});if(et.source=U,Ei(et))throw et;return et},a.times=function(r,i){if((r=R(r))<1||r>9007199254740991)return[];var c=4294967295,l=rd(r,4294967295);i=x(i),r-=4294967295;for(var p=Fr(l,i);++c<r;)i(c);return p},a.toFinite=Xn,a.toInteger=R,a.toLength=aa,a.toLower=function(r){return W(r).toLowerCase()},a.toNumber=xn,a.toSafeInteger=function(r){return r?vt(R(r),-9007199254740991,9007199254740991):0===r?r:0},a.toString=W,a.toUpper=function(r){return W(r).toUpperCase()},a.trim=function(r,i,l){if((r=W(r))&&(l||i===c))return ys(r);if(!r||!(i=ln(i)))return r;var p=On(r),v=On(i),_=Ss(p,v),E=Os(p,v)+1;return ut(p,_,E).join("")},a.trimEnd=function(r,i,l){if((r=W(r))&&(l||i===c))return r.slice(0,bs(r)+1);if(!r||!(i=ln(i)))return r;var p=On(r),v=Os(p,On(i))+1;return ut(p,0,v).join("")},a.trimStart=function(r,i,l){if((r=W(r))&&(l||i===c))return r.replace(eK,"");if(!r||!(i=ln(i)))return r;var p=On(r),v=Ss(p,On(i));return ut(p,v).join("")},a.truncate=function(r,i){var l=30,p="...";if(K(i)){var v="separator"in i?i.separator:v;l="length"in i?R(i.length):l,p="omission"in i?ln(i.omission):p}var _=(r=W(r)).length;if(Lt(r)){var E=On(r);_=E.length}if(l>=_)return r;var P=l-Dt(p);if(P<1)return p;var q=E?ut(E,0,P).join(""):r.slice(0,P);if(v===c)return q+p;if(E&&(P+=q.length-P),i$(v)){if(r.slice(P).search(v)){var z,M=q;for(v.global||(v=tl(v.source,W(eQ.exec(v))+"g")),v.lastIndex=0;z=v.exec(M);)var U=z.index;q=q.slice(0,U===c?P:U)}}else if(r.indexOf(ln(v),P)!=P){var J=q.lastIndexOf(v);J>-1&&(q=q.slice(0,J))}return q+p},a.unescape=function(r){return(r=W(r))&&ej.test(r)?r.replace(eC,t9):r},a.uniqueId=function(r){var i=++tb;return W(r)+i},a.upperCase=nc,a.upperFirst=nl,a.each=Zu,a.eachRight=Ju,a.first=Gu,Li(a,(e8={},$n(a,function(r,i){t_.call(a.prototype,i)||(e8[i]=r)}),e8),{chain:!1}),a.VERSION="4.17.21",mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){a[r].placeholder=a}),mn(["drop","take"],function(r,i){H.prototype[r]=function(l){l=l===c?1:rp(R(l),0);var p=this.__filtered__&&!i?new H(this):this.clone();return p.__filtered__?p.__takeCount__=rd(l,p.__takeCount__):p.__views__.push({size:rd(l,4294967295),type:r+(p.__dir__<0?"Right":"")}),p},H.prototype[r+"Right"]=function(i){return this.reverse()[r](i).reverse()}}),mn(["filter","map","takeWhile"],function(r,i){var c=i+1,l=1==c||3==c;H.prototype[r]=function(r){var i=this.clone();return i.__iteratees__.push({iteratee:x(r,3),type:c}),i.__filtered__=i.__filtered__||l,i}}),mn(["head","last"],function(r,i){var c="take"+(i?"Right":"");H.prototype[r]=function(){return this[c](1).value()[0]}}),mn(["initial","tail"],function(r,i){var c="drop"+(i?"":"Right");H.prototype[r]=function(){return this.__filtered__?new H(this):this[c](1)}}),H.prototype.compact=function(){return this.filter(fn)},H.prototype.find=function(r){return this.filter(r).head()},H.prototype.findLast=function(r){return this.reverse().find(r)},H.prototype.invokeMap=L(function(r,i){return"function"==typeof r?new H(this):this.map(function(c){return ae(c,r,i)})}),H.prototype.reject=function(r){return this.filter(ur(x(r)))},H.prototype.slice=function(r,i){r=R(r);var l=this;return l.__filtered__&&(r>0||i<0)?new H(l):(r<0?l=l.takeRight(-r):r&&(l=l.drop(r)),i!==c&&(l=(i=R(i))<0?l.dropRight(-i):l.take(i-r)),l)},H.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},H.prototype.toArray=function(){return this.take(4294967295)},$n(H.prototype,function(r,i){var l=/^(?:filter|find|map|reject)|While$/.test(i),p=/^(?:head|last)$/.test(i),v=a[p?"take"+("last"==i?"Right":""):i],_=p||/^find/.test(i);v&&(a.prototype[i]=function(){var i=this.__wrapped__,E=p?[1]:arguments,P=i instanceof H,q=E[0],z=P||iq(i),m=function(r){var i=v.apply(a,nt([r],E));return p&&M?i[0]:i};z&&l&&"function"==typeof q&&1!=q.length&&(P=z=!1);var M=this.__chain__,U=!!this.__actions__.length,J=_&&!M,Q=P&&!U;if(!_&&z){i=Q?i:new H(this);var X=r.apply(i,E);return X.__actions__.push({func:er,args:[m],thisArg:c}),new Pn(X,M)}return J&&Q?r.apply(this,E):(X=this.thru(m),J?p?X.value()[0]:X.value():X)})}),mn(["pop","push","shift","sort","splice","unshift"],function(r){var i=td[r],c=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",l=/^(?:pop|shift)$/.test(r);a.prototype[r]=function(){var r=arguments;if(l&&!this.__chain__){var p=this.value();return i.apply(iq(p)?p:[],r)}return this[c](function(c){return i.apply(iq(c)?c:[],r)})}}),$n(H.prototype,function(r,i){var c=a[i];if(c){var l=c.name+"";t_.call(rR,l)||(rR[l]=[]),rR[l].push({name:i,func:c})}}),rR[Xe(c,2).name]=[{name:"wrapper",func:c}],H.prototype.clone=function(){var r=new H(this.__wrapped__);return r.__actions__=un(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=un(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=un(this.__views__),r},H.prototype.reverse=function(){if(this.__filtered__){var r=new H(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r},H.prototype.value=function(){var r=this.__wrapped__.value(),i=this.__dir__,c=iq(r),l=i<0,p=c?r.length:0,v=function(r,i,c){for(var l=-1,p=c.length;++l<p;){var v=c[l],_=v.size;switch(v.type){case"drop":r+=_;break;case"dropRight":i-=_;break;case"take":i=rd(i,r+_);break;case"takeRight":r=rp(r,i-_)}}return{start:r,end:i}}(0,p,this.__views__),_=v.start,E=v.end,P=E-_,q=l?E:_-1,z=this.__iteratees__,M=z.length,U=0,J=rd(P,this.__takeCount__);if(!c||!l&&p==P&&J==P)return ou(r,this.__actions__);var Q=[];e:for(;P--&&U<J;){q+=i;for(var X=-1,et=r[q];++X<M;){var es=z[X],eo=es.iteratee,ec=es.type,el=eo(et);if(2==ec)et=el;else if(!el){if(1==ec)continue e;break e}}Q[U++]=et}return Q},a.prototype.at=id,a.prototype.chain=function(){return Yu(this)},a.prototype.commit=function(){return new Pn(this.value(),this.__chain__)},a.prototype.next=function(){this.__values__===c&&(this.__values__=ua(this.value()));var r=this.__index__>=this.__values__.length,i=r?c:this.__values__[this.__index__++];return{done:r,value:i}},a.prototype.plant=function(r){for(var i,l=this;l instanceof qe;){var p=Fu(l);p.__index__=0,p.__values__=c,i?v.__wrapped__=p:i=p;var v=p;l=l.__wrapped__}return v.__wrapped__=r,i},a.prototype.reverse=function(){var r=this.__wrapped__;if(r instanceof H){var i=r;return this.__actions__.length&&(i=new H(this)),(i=i.reverse()).__actions__.push({func:er,args:[Ai],thisArg:c}),new Pn(i,this.__chain__)}return this.thru(Ai)},a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=function(){return ou(this.__wrapped__,this.__actions__)},a.prototype.first=a.prototype.head,tF&&(a.prototype[tF]=function(){return this}),a}();tG?((tG.exports=t4)._=t4,tF._=t4):tV._=t4}).call(rF)}(rG,rG.exports);var rJ=Object.defineProperty,rW=Object.defineProperties,rY=Object.getOwnPropertyDescriptors,rZ=Object.getOwnPropertySymbols,rQ=Object.prototype.hasOwnProperty,rX=Object.prototype.propertyIsEnumerable,ya=(r,i,c)=>i in r?rJ(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_cr=(r,i)=>{for(var c in i||(i={}))rQ.call(i,c)&&ya(r,c,i[c]);if(rZ)for(var c of rZ(i))rX.call(i,c)&&ya(r,c,i[c]);return r},Yg=(r,i)=>rW(r,rY(i));function dist_index_es_ft(r,i,c){var l;let p=function(r){let[i,c]=r.split(":");return{namespace:i,reference:c}}(r);return(null==(l=i.rpcMap)?void 0:l[p.reference])||`https://rpc.walletconnect.com/v1/?chainId=${p.namespace}:${p.reference}&projectId=${c}`}function dist_index_es_Ct(r){return r.includes(":")?r.split(":")[1]:r}function Sa(r){return r.map(r=>`${r.split(":")[0]}:${r.split(":")[1]}`)}function Oa(r){var i,c,l,p;let v={};if(!B(r))return v;for(let[_,E]of Object.entries(r)){let r=oe(_)?[_]:E.chains,P=E.methods||[],q=E.events||[],z=E.rpcMap||{},M=Xe(_);v[M]=Yg(index_es_cr(index_es_cr({},v[M]),E),{chains:S(r,null==(i=v[M])?void 0:i.chains),methods:S(P,null==(c=v[M])?void 0:c.methods),events:S(q,null==(l=v[M])?void 0:l.events),rpcMap:index_es_cr(index_es_cr({},z),null==(p=v[M])?void 0:p.rpcMap)})}return v}function Xg(r){return r.includes(":")?r.split(":")[2]:r}function index_es_Wi(r){return"number"==typeof r?r:r.includes("0x")?parseInt(r,16):r.includes(":")?Number(r.split(":")[1]):Number(r)}let r0={},dist_index_es_z=r=>r0[r],Fi=(r,i)=>{r0[r]=i};let Vg=class Vg{constructor(r){this.name="polkadot",this.namespace=r.namespace,this.events=dist_index_es_z("events"),this.client=dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(rV.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getAccounts(){let r=this.namespace.accounts;return r&&r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let l=dist_index_es_Ct(i);r[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,dist_index_es_z("disableProviderPing")))}};let kg=class kg{constructor(r){this.name="eip155",this.namespace=r.namespace,this.events=dist_index_es_z("events"),this.client=dist_index_es_z("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(r){switch(r.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(r);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(r.request.method)?await this.client.request(r):this.getHttpProvider().request(r.request)}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(parseInt(r),i),this.chainId=parseInt(r),this.events.emit(rV.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}createHttpProvider(r,i){let c=i||dist_index_es_ft(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,dist_index_es_z("disableProviderPing")))}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let l=parseInt(dist_index_es_Ct(i));r[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){let r=this.chainId,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}async handleSwitchChain(r){var i,c;let l=r.request.params?null==(i=r.request.params[0])?void 0:i.chainId:"0x0";l=l.startsWith("0x")?l:`0x${l}`;let p=parseInt(l,16);if(this.isChainApproved(p))this.setDefaultChain(`${p}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:r.topic,request:{method:r.request.method,params:[{chainId:l}]},chainId:null==(c=this.namespace.chains)?void 0:c[0]}),this.setDefaultChain(`${p}`);else throw Error(`Failed to switch to chain 'eip155:${p}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(r){return this.namespace.chains.includes(`${this.name}:${r}`)}};let jg=class jg{constructor(r){this.name="solana",this.namespace=r.namespace,this.events=dist_index_es_z("events"),this.client=dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(rV.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let l=dist_index_es_Ct(i);r[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,dist_index_es_z("disableProviderPing")))}};let nv=class nv{constructor(r){this.name="cosmos",this.namespace=r.namespace,this.events=dist_index_es_z("events"),this.client=dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(rV.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let l=dist_index_es_Ct(i);r[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,dist_index_es_z("disableProviderPing")))}};let tv=class tv{constructor(r){this.name="cip34",this.namespace=r.namespace,this.events=dist_index_es_z("events"),this.client=dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(rV.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{let c=this.getCardanoRPCUrl(i),l=dist_index_es_Ct(i);r[l]=this.createHttpProvider(l,c)}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}getCardanoRPCUrl(r){let i=this.namespace.rpcMap;if(i)return i[r]}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||this.getCardanoRPCUrl(r);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,dist_index_es_z("disableProviderPing")))}};let ev=class ev{constructor(r){this.name="elrond",this.namespace=r.namespace,this.events=dist_index_es_z("events"),this.client=dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(rV.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let l=dist_index_es_Ct(i);r[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,dist_index_es_z("disableProviderPing")))}};let rv=class rv{constructor(r){this.name="multiversx",this.namespace=r.namespace,this.events=dist_index_es_z("events"),this.client=dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){this.httpProviders[r]||this.setHttpProvider(r,i),this.chainId=r,this.events.emit(rV.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}getAccounts(){let r=this.namespace.accounts;return r?[...new Set(r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;let l=dist_index_es_Ct(i);r[l]=this.createHttpProvider(l,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace,this.client.core.projectId);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);return new JsonRpcProvider(new HttpConnection(c,dist_index_es_z("disableProviderPing")))}};let iv=class iv{constructor(r){this.name="near",this.namespace=r.namespace,this.events=dist_index_es_z("events"),this.client=dist_index_es_z("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let r=this.namespace.chains[0];if(!r)throw Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,i){if(this.chainId=r,!this.httpProviders[r]){let c=i||dist_index_es_ft(`${this.name}:${r}`,this.namespace);if(!c)throw Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,c)}this.events.emit(rV.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let r=this.namespace.accounts;return r&&r.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]}createHttpProviders(){let r={};return this.namespace.chains.forEach(i=>{var c;r[i]=this.createHttpProvider(i,null==(c=this.namespace.rpcMap)?void 0:c[i])}),r}getHttpProvider(){let r=`${this.name}:${this.chainId}`,i=this.httpProviders[r];if(typeof i>"u")throw Error(`JSON-RPC provider for ${r} not found`);return i}setHttpProvider(r,i){let c=this.createHttpProvider(r,i);c&&(this.httpProviders[r]=c)}createHttpProvider(r,i){let c=i||dist_index_es_ft(r,this.namespace);return typeof c>"u"?void 0:new JsonRpcProvider(new HttpConnection(c,dist_index_es_z("disableProviderPing")))}};var r1=Object.defineProperty,r5=Object.defineProperties,r6=Object.getOwnPropertyDescriptors,r2=Object.getOwnPropertySymbols,r3=Object.prototype.hasOwnProperty,r9=Object.prototype.propertyIsEnumerable,Ta=(r,i,c)=>i in r?r1(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,index_es_hr=(r,i)=>{for(var c in i||(i={}))r3.call(i,c)&&Ta(r,c,i[c]);if(r2)for(var c of r2(i))r9.call(i,c)&&Ta(r,c,i[c]);return r},Mi=(r,i)=>r5(r,r6(i));let index_es_lr=class index_es_lr{constructor(r){this.events=new(v()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=r,this.logger="u">typeof r?.logger&&"string"!=typeof r?.logger?r.logger:(0,eL.pino)((0,eL.getDefaultLoggerOptions)({level:r?.logger||rK})),this.disableProviderPing=r?.disableProviderPing||!1}static async init(r){let i=new index_es_lr(r);return await i.initialize(),i}async request(r,i){let[c,l]=this.validateChain(i);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(c).request({request:index_es_hr({},r),chainId:`${c}:${l}`,topic:this.session.topic})}sendAsync(r,i,c){this.request(r,c).then(r=>i(null,r)).catch(r=>i(r,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var r;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(r=this.session)?void 0:r.topic,reason:index_es_U("USER_DISCONNECTED")}),await this.cleanup()}async connect(r){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(r),await this.cleanupPendingPairings(),!r.skipPairing)return await this.pair(r.pairingTopic)}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}removeListener(r,i){this.events.removeListener(r,i)}off(r,i){this.events.off(r,i)}get isWalletConnect(){return!0}async pair(r){this.shouldAbortPairingAttempt=!1;let i=0;do{if(this.shouldAbortPairingAttempt)throw Error("Pairing aborted");if(i>=this.maxPairingAttempts)throw Error("Max auto pairing attempts reached");let{uri:c,approval:l}=await this.client.connect({pairingTopic:r,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});c&&(this.uri=c,this.events.emit("display_uri",c)),await l().then(r=>{this.session=r,this.namespaces||(this.namespaces=function(r){let i={};for(let[c,l]of Object.entries(r)){let r=l.methods||[],p=l.events||[],v=l.accounts||[],_=oe(c)?[c]:l.chains?l.chains:Sa(l.accounts);i[c]={chains:_,methods:r,events:p,accounts:v}}return i}(r.namespaces),this.persist("namespaces",this.namespaces))}).catch(r=>{if(r.message!==rO)throw r;i++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(r,i){try{if(!this.session)return;let[c,l]=this.validateChain(r);this.getProvider(c).setDefaultChain(l,i)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(r={}){this.logger.info("Cleaning up inactive pairings...");let i=this.client.pairing.getAll();if(k(i)){for(let c of i)r.deletePairings?this.client.core.expirer.set(c.topic,0):await this.client.core.relayer.subscriber.unsubscribe(c.topic);this.logger.info(`Inactive pairings cleared: ${i.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let r=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[r]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await dist_index_es_Q.init({logger:this.providerOpts.logger||rK,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let r=[...new Set(Object.keys(this.session.namespaces).map(r=>Xe(r)))];Fi("client",this.client),Fi("events",this.events),Fi("disableProviderPing",this.disableProviderPing),r.forEach(r=>{if(!this.session)return;let i=function(r,i){let c=Object.keys(i.namespaces).filter(i=>i.includes(r));if(!c.length)return[];let l=[];return c.forEach(r=>{let c=i.namespaces[r].accounts;l.push(...c)}),l}(r,this.session),c=Sa(i),l=function(r={},i={}){let c=Oa(r),l=Oa(i);return rG.exports.merge(c,l)}(this.namespaces,this.optionalNamespaces),p=Mi(index_es_hr({},l[r]),{accounts:i,chains:c});switch(r){case"eip155":this.rpcProviders[r]=new kg({namespace:p});break;case"solana":this.rpcProviders[r]=new jg({namespace:p});break;case"cosmos":this.rpcProviders[r]=new nv({namespace:p});break;case"polkadot":this.rpcProviders[r]=new Vg({namespace:p});break;case"cip34":this.rpcProviders[r]=new tv({namespace:p});break;case"elrond":this.rpcProviders[r]=new ev({namespace:p});break;case"multiversx":this.rpcProviders[r]=new rv({namespace:p});break;case"near":this.rpcProviders[r]=new iv({namespace:p})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",r=>{this.events.emit("session_ping",r)}),this.client.on("session_event",r=>{let{params:i}=r,{event:c}=i;if("accountsChanged"===c.name){let r=c.data;r&&k(r)&&this.events.emit("accountsChanged",r.map(Xg))}else if("chainChanged"===c.name){let r=i.chainId,c=i.event.data,l=Xe(r),p=index_es_Wi(r)!==index_es_Wi(c)?`${l}:${index_es_Wi(c)}`:r;this.onChainChanged(p)}else this.events.emit(c.name,c.data);this.events.emit("session_event",r)}),this.client.on("session_update",({topic:r,params:i})=>{var c;let{namespaces:l}=i,p=null==(c=this.client)?void 0:c.session.get(r);this.session=Mi(index_es_hr({},p),{namespaces:l}),this.onSessionUpdate(),this.events.emit("session_update",{topic:r,params:i})}),this.client.on("session_delete",async r=>{await this.cleanup(),this.events.emit("session_delete",r),this.events.emit("disconnect",Mi(index_es_hr({},index_es_U("USER_DISCONNECTED")),{data:r.topic}))}),this.on(rV.DEFAULT_CHAIN_CHANGED,r=>{this.onChainChanged(r,!0)})}getProvider(r){if(!this.rpcProviders[r])throw Error(`Provider not found: ${r}`);return this.rpcProviders[r]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(r=>{var i;this.getProvider(r).updateNamespace(null==(i=this.session)?void 0:i.namespaces[r])})}setNamespaces(r){let{namespaces:i,optionalNamespaces:c,sessionProperties:l}=r;i&&Object.keys(i).length&&(this.namespaces=i),c&&Object.keys(c).length&&(this.optionalNamespaces=c),this.sessionProperties=l,this.persist("namespaces",i),this.persist("optionalNamespaces",c)}validateChain(r){let[i,c]=r?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[i,c];if(i&&!Object.keys(this.namespaces||{}).map(r=>Xe(r)).includes(i))throw Error(`Namespace '${i}' is not configured. Please call connect() first with namespace config.`);if(i&&c)return[i,c];let l=Xe(Object.keys(this.namespaces)[0]),p=this.rpcProviders[l].getDefaultChain();return[l,p]}async requestAccounts(){let[r]=this.validateChain();return await this.getProvider(r).requestAccounts()}onChainChanged(r,i=!1){var c;if(!this.namespaces)return;let[l,p]=this.validateChain(r);i||this.getProvider(l).setDefaultChain(p),(null!=(c=this.namespaces[l])?c:this.namespaces[`${l}:${p}`]).defaultChain=p,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",p)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(r,i){this.client.core.storage.setItem(`${rB}/${r}`,i)}async getFromStore(r){return await this.client.core.storage.getItem(`${rB}/${r}`)}};let r4=["eth_sendTransaction","personal_sign"],r8=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],r7=["chainChanged","accountsChanged"],is=["chainChanged","accountsChanged","message","disconnect","connect"];var io=Object.defineProperty,ic=Object.defineProperties,il=Object.getOwnPropertyDescriptors,iu=Object.getOwnPropertySymbols,ih=Object.prototype.hasOwnProperty,ip=Object.prototype.propertyIsEnumerable,ethereum_provider_dist_index_es_O=(r,i,c)=>i in r?io(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,dist_index_es_p=(r,i)=>{for(var c in i||(i={}))ih.call(i,c)&&ethereum_provider_dist_index_es_O(r,c,i[c]);if(iu)for(var c of iu(i))ip.call(i,c)&&ethereum_provider_dist_index_es_O(r,c,i[c]);return r},index_es_M=(r,i)=>ic(r,il(i));function ethereum_provider_dist_index_es_g(r){return Number(r[0].split(":")[1])}function index_es_f(r){return`0x${r.toString(16)}`}let dist_index_es_v=class dist_index_es_v{constructor(){this.events=new p.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(r,i)=>(this.events.on(r,i),this),this.once=(r,i)=>(this.events.once(r,i),this),this.removeListener=(r,i)=>(this.events.removeListener(r,i),this),this.off=(r,i)=>(this.events.off(r,i),this),this.parseAccount=r=>this.isCompatibleChainId(r)?this.parseAccountId(r).address:r,this.signer={},this.rpc={}}static async init(r){let i=new dist_index_es_v;return await i.initialize(r),i}async request(r){return await this.signer.request(r,this.formatChainId(this.chainId))}sendAsync(r,i){this.signer.sendAsync(r,i,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(r){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(r);let{required:i,optional:c}=function(r){let{chains:i,optionalChains:c,methods:l,optionalMethods:p,events:v,optionalEvents:_,rpcMap:E}=r;if(!k(i))throw Error("Invalid chains");let P={chains:i,methods:l||r4,events:v||r7,rpcMap:dist_index_es_p({},i.length?{[ethereum_provider_dist_index_es_g(i)]:E[ethereum_provider_dist_index_es_g(i)]}:{})},q=v?.filter(r=>!r7.includes(r)),z=l?.filter(r=>!r4.includes(r));if(!c&&!_&&!p&&!(null!=q&&q.length)&&!(null!=z&&z.length))return{required:i.length?P:void 0};let M=q?.length&&z?.length||!c,U={chains:[...new Set(M?P.chains.concat(c||[]):c)],methods:[...new Set(P.methods.concat(null!=p&&p.length?p:r8))],events:[...new Set(P.events.concat(null!=_&&_.length?_:is))],rpcMap:E};return{required:i.length?P:void 0,optional:c.length?U:void 0}}(this.rpc);try{let l=await new Promise(async(l,p)=>{var v;this.rpc.showQrModal&&(null==(v=this.modal)||v.subscribeModal(r=>{r.open||this.signer.session||(this.signer.abortPairingAttempt(),p(Error("Connection request reset. Please try again.")))})),await this.signer.connect(index_es_M(dist_index_es_p({namespaces:dist_index_es_p({},i&&{[this.namespace]:i})},c&&{optionalNamespaces:{[this.namespace]:c}}),{pairingTopic:r?.pairingTopic})).then(r=>{l(r)}).catch(r=>{p(Error(r.message))})});if(!l)return;let p=function(r,i=[]){let c=[];return Object.keys(r).forEach(l=>{if(i.length&&!i.includes(l))return;let p=r[l];c.push(...p.accounts)}),c}(l.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:p),this.setAccounts(p),this.events.emit("connect",{chainId:index_es_f(this.chainId)})}catch(r){throw this.signer.logger.error(r),r}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",r=>{let{params:i}=r,{event:c}=i;"accountsChanged"===c.name?(this.accounts=this.parseAccounts(c.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===c.name?this.setChainId(this.formatChainId(c.data)):this.events.emit(c.name,c.data),this.events.emit("session_event",r)}),this.signer.on("chainChanged",r=>{let i=parseInt(r);this.chainId=i,this.events.emit("chainChanged",index_es_f(this.chainId)),this.persist()}),this.signer.on("session_update",r=>{this.events.emit("session_update",r)}),this.signer.on("session_delete",r=>{this.reset(),this.events.emit("session_delete",r),this.events.emit("disconnect",index_es_M(dist_index_es_p({},index_es_U("USER_DISCONNECTED")),{data:r.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",r=>{var i,c;this.rpc.showQrModal&&(null==(i=this.modal)||i.closeModal(),null==(c=this.modal)||c.openModal({uri:r})),this.events.emit("display_uri",r)})}switchEthereumChain(r){this.request({method:"wallet_switchEthereumChain",params:[{chainId:r.toString(16)}]})}isCompatibleChainId(r){return"string"==typeof r&&r.startsWith(`${this.namespace}:`)}formatChainId(r){return`${this.namespace}:${r}`}parseChainId(r){return Number(r.split(":")[1])}setChainIds(r){let i=r.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));i.length&&(this.chainId=i[0],this.events.emit("chainChanged",index_es_f(this.chainId)),this.persist())}setChainId(r){if(this.isCompatibleChainId(r)){let i=this.parseChainId(r);this.chainId=i,this.switchEthereumChain(i)}}parseAccountId(r){let[i,c,l]=r.split(":");return{chainId:`${i}:${c}`,address:l}}setAccounts(r){this.accounts=r.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(r){var i,c;let l=null!=(i=r?.chains)?i:[],p=null!=(c=r?.optionalChains)?c:[],v=l.concat(p);if(!v.length)throw Error("No chains specified in either `chains` or `optionalChains`");let _=l.length?r?.methods||r4:[],E=l.length?r?.events||r7:[],P=r?.optionalMethods||[],q=r?.optionalEvents||[],z=r?.rpcMap||this.buildRpcMap(v,r.projectId),M=r?.qrModalOptions||void 0;return{chains:l?.map(r=>this.formatChainId(r)),optionalChains:p.map(r=>this.formatChainId(r)),methods:_,events:E,optionalMethods:P,optionalEvents:q,rpcMap:z,showQrModal:!!(null!=r&&r.showQrModal),qrModalOptions:M,projectId:r.projectId,metadata:r.metadata}}buildRpcMap(r,i){let c={};return r.forEach(r=>{c[r]=this.getRpcUrl(r,i)}),c}async initialize(r){if(this.rpc=this.getRpcConfig(r),this.chainId=this.rpc.chains.length?ethereum_provider_dist_index_es_g(this.rpc.chains):ethereum_provider_dist_index_es_g(this.rpc.optionalChains),this.signer=await index_es_lr.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:r.disableProviderPing,relayUrl:r.relayUrl,storageOptions:r.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{let{WalletConnectModal:i}=await c.e(9343).then(c.bind(c,59343));r=i}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(dist_index_es_p({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(r){throw this.signer.logger.error(r),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(r){if(!r)return;let{chains:i,optionalChains:c,rpcMap:l}=r;i&&k(i)&&(this.rpc.chains=i.map(r=>this.formatChainId(r)),i.forEach(r=>{this.rpc.rpcMap[r]=l?.[r]||this.getRpcUrl(r)})),c&&k(c)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=c?.map(r=>this.formatChainId(r)),c.forEach(r=>{this.rpc.rpcMap[r]=l?.[r]||this.getRpcUrl(r)}))}getRpcUrl(r,i){var c;return(null==(c=this.rpc.rpcMap)?void 0:c[r])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${r}&projectId=${i||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;let r=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),i=this.session.namespaces[`${this.namespace}:${r}`]?this.session.namespaces[`${this.namespace}:${r}`]:this.session.namespaces[this.namespace];this.setChainIds(r?[this.formatChainId(r)]:i?.accounts),this.setAccounts(i?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(r){return"string"==typeof r||r instanceof String?[this.parseAccount(r)]:r.map(r=>this.parseAccount(r))}};let id=dist_index_es_v},38200:function(r,i,c){"use strict";c.d(i,{q:function(){return IEvents}});let IEvents=class IEvents{}},30997:function(r,i,c){"use strict";c.r(i),c.d(i,{IEvents:function(){return l.q}});var l=c(38200)},32568:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HEARTBEAT_EVENTS=i.HEARTBEAT_INTERVAL=void 0;let l=c(66736);i.HEARTBEAT_INTERVAL=l.FIVE_SECONDS,i.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},53401:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let l=c(70655);l.__exportStar(c(32568),i)},38969:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HeartBeat=void 0;let l=c(70655),p=c(17187),v=c(66736),_=c(1614),E=c(53401);let HeartBeat=class HeartBeat extends _.IHeartBeat{constructor(r){super(r),this.events=new p.EventEmitter,this.interval=E.HEARTBEAT_INTERVAL,this.interval=(null==r?void 0:r.interval)||E.HEARTBEAT_INTERVAL}static init(r){return l.__awaiter(this,void 0,void 0,function*(){let i=new HeartBeat(r);return yield i.init(),i})}init(){return l.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(r,i){this.events.on(r,i)}once(r,i){this.events.once(r,i)}off(r,i){this.events.off(r,i)}removeListener(r,i){this.events.removeListener(r,i)}initialize(){return l.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),v.toMiliseconds(this.interval))})}pulse(){this.events.emit(E.HEARTBEAT_EVENTS.pulse)}};i.HeartBeat=HeartBeat},90772:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let l=c(70655);l.__exportStar(c(38969),i),l.__exportStar(c(1614),i),l.__exportStar(c(53401),i)},44174:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.IHeartBeat=void 0;let l=c(30997);let IHeartBeat=class IHeartBeat extends l.IEvents{constructor(r){super()}};i.IHeartBeat=IHeartBeat},1614:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0});let l=c(70655);l.__exportStar(c(44174),i)},72030:function(r){"use strict";r.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},65727:function(r,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PINO_CUSTOM_CONTEXT_KEY=i.PINO_LOGGER_DEFAULTS=void 0,i.PINO_LOGGER_DEFAULTS={level:"info"},i.PINO_CUSTOM_CONTEXT_KEY="custom_context"},9107:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;let l=c(70655),p=l.__importDefault(c(67686));Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return p.default}}),l.__exportStar(c(65727),i),l.__exportStar(c(58048),i)},58048:function(r,i,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.generateChildLogger=i.formatChildLoggerContext=i.getLoggerContext=i.setBrowserLoggerContext=i.getBrowserLoggerContext=i.getDefaultLoggerOptions=void 0;let l=c(65727);function getBrowserLoggerContext(r,i=l.PINO_CUSTOM_CONTEXT_KEY){return r[i]||""}function setBrowserLoggerContext(r,i,c=l.PINO_CUSTOM_CONTEXT_KEY){return r[c]=i,r}function getLoggerContext(r,i=l.PINO_CUSTOM_CONTEXT_KEY){return void 0===r.bindings?getBrowserLoggerContext(r,i):r.bindings().context||""}function formatChildLoggerContext(r,i,c=l.PINO_CUSTOM_CONTEXT_KEY){let p=getLoggerContext(r,c),v=p.trim()?`${p}/${i}`:i;return v}i.getDefaultLoggerOptions=function(r){return Object.assign(Object.assign({},r),{level:(null==r?void 0:r.level)||l.PINO_LOGGER_DEFAULTS.level})},i.getBrowserLoggerContext=getBrowserLoggerContext,i.setBrowserLoggerContext=setBrowserLoggerContext,i.getLoggerContext=getLoggerContext,i.formatChildLoggerContext=formatChildLoggerContext,i.generateChildLogger=function(r,i,c=l.PINO_CUSTOM_CONTEXT_KEY){let p=formatChildLoggerContext(r,i,c),v=r.child({context:p});return setBrowserLoggerContext(v,p,c)}},43014:function(){},66151:function(r,i,c){"use strict";let l=c(70610),p=c(44020),v=c(80500),_=c(92806),isNullOrUndefined=r=>null==r,E=Symbol("encodeFragmentIdentifier");function validateArrayFormatSeparator(r){if("string"!=typeof r||1!==r.length)throw TypeError("arrayFormatSeparator must be single character string")}function encode(r,i){return i.encode?i.strict?l(r):encodeURIComponent(r):r}function decode(r,i){return i.decode?p(r):r}function removeHash(r){let i=r.indexOf("#");return -1!==i&&(r=r.slice(0,i)),r}function extract(r){r=removeHash(r);let i=r.indexOf("?");return -1===i?"":r.slice(i+1)}function parseValue(r,i){return i.parseNumbers&&!Number.isNaN(Number(r))&&"string"==typeof r&&""!==r.trim()?r=Number(r):i.parseBooleans&&null!==r&&("true"===r.toLowerCase()||"false"===r.toLowerCase())&&(r="true"===r.toLowerCase()),r}function parse(r,i){validateArrayFormatSeparator((i=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},i)).arrayFormatSeparator);let c=function(r){let i;switch(r.arrayFormat){case"index":return(r,c,l)=>{if(i=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!i){l[r]=c;return}void 0===l[r]&&(l[r]={}),l[r][i[1]]=c};case"bracket":return(r,c,l)=>{if(i=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!i){l[r]=c;return}if(void 0===l[r]){l[r]=[c];return}l[r]=[].concat(l[r],c)};case"colon-list-separator":return(r,c,l)=>{if(i=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!i){l[r]=c;return}if(void 0===l[r]){l[r]=[c];return}l[r]=[].concat(l[r],c)};case"comma":case"separator":return(i,c,l)=>{let p="string"==typeof c&&c.includes(r.arrayFormatSeparator),v="string"==typeof c&&!p&&decode(c,r).includes(r.arrayFormatSeparator);c=v?decode(c,r):c;let _=p||v?c.split(r.arrayFormatSeparator).map(i=>decode(i,r)):null===c?c:decode(c,r);l[i]=_};case"bracket-separator":return(i,c,l)=>{let p=/(\[\])$/.test(i);if(i=i.replace(/\[\]$/,""),!p){l[i]=c?decode(c,r):c;return}let v=null===c?[]:c.split(r.arrayFormatSeparator).map(i=>decode(i,r));if(void 0===l[i]){l[i]=v;return}l[i]=[].concat(l[i],v)};default:return(r,i,c)=>{if(void 0===c[r]){c[r]=i;return}c[r]=[].concat(c[r],i)}}}(i),l=Object.create(null);if("string"!=typeof r||!(r=r.trim().replace(/^[?#&]/,"")))return l;for(let p of r.split("&")){if(""===p)continue;let[r,_]=v(i.decode?p.replace(/\+/g," "):p,"=");_=void 0===_?null:["comma","separator","bracket-separator"].includes(i.arrayFormat)?_:decode(_,i),c(decode(r,i),_,l)}for(let r of Object.keys(l)){let c=l[r];if("object"==typeof c&&null!==c)for(let r of Object.keys(c))c[r]=parseValue(c[r],i);else l[r]=parseValue(c,i)}return!1===i.sort?l:(!0===i.sort?Object.keys(l).sort():Object.keys(l).sort(i.sort)).reduce((r,i)=>{let c=l[i];return c&&"object"==typeof c&&!Array.isArray(c)?r[i]=function keysSorter(r){return Array.isArray(r)?r.sort():"object"==typeof r?keysSorter(Object.keys(r)).sort((r,i)=>Number(r)-Number(i)).map(i=>r[i]):r}(c):r[i]=c,r},Object.create(null))}i.extract=extract,i.parse=parse,i.stringify=(r,i)=>{if(!r)return"";validateArrayFormatSeparator((i=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},i)).arrayFormatSeparator);let shouldFilter=c=>i.skipNull&&isNullOrUndefined(r[c])||i.skipEmptyString&&""===r[c],c=function(r){switch(r.arrayFormat){case"index":return i=>(c,l)=>{let p=c.length;return void 0===l||r.skipNull&&null===l||r.skipEmptyString&&""===l?c:null===l?[...c,[encode(i,r),"[",p,"]"].join("")]:[...c,[encode(i,r),"[",encode(p,r),"]=",encode(l,r)].join("")]};case"bracket":return i=>(c,l)=>void 0===l||r.skipNull&&null===l||r.skipEmptyString&&""===l?c:null===l?[...c,[encode(i,r),"[]"].join("")]:[...c,[encode(i,r),"[]=",encode(l,r)].join("")];case"colon-list-separator":return i=>(c,l)=>void 0===l||r.skipNull&&null===l||r.skipEmptyString&&""===l?c:null===l?[...c,[encode(i,r),":list="].join("")]:[...c,[encode(i,r),":list=",encode(l,r)].join("")];case"comma":case"separator":case"bracket-separator":{let i="bracket-separator"===r.arrayFormat?"[]=":"=";return c=>(l,p)=>void 0===p||r.skipNull&&null===p||r.skipEmptyString&&""===p?l:(p=null===p?"":p,0===l.length)?[[encode(c,r),i,encode(p,r)].join("")]:[[l,encode(p,r)].join(r.arrayFormatSeparator)]}default:return i=>(c,l)=>void 0===l||r.skipNull&&null===l||r.skipEmptyString&&""===l?c:null===l?[...c,encode(i,r)]:[...c,[encode(i,r),"=",encode(l,r)].join("")]}}(i),l={};for(let i of Object.keys(r))shouldFilter(i)||(l[i]=r[i]);let p=Object.keys(l);return!1!==i.sort&&p.sort(i.sort),p.map(l=>{let p=r[l];return void 0===p?"":null===p?encode(l,i):Array.isArray(p)?0===p.length&&"bracket-separator"===i.arrayFormat?encode(l,i)+"[]":p.reduce(c(l),[]).join("&"):encode(l,i)+"="+encode(p,i)}).filter(r=>r.length>0).join("&")},i.parseUrl=(r,i)=>{i=Object.assign({decode:!0},i);let[c,l]=v(r,"#");return Object.assign({url:c.split("?")[0]||"",query:parse(extract(r),i)},i&&i.parseFragmentIdentifier&&l?{fragmentIdentifier:decode(l,i)}:{})},i.stringifyUrl=(r,c)=>{c=Object.assign({encode:!0,strict:!0,[E]:!0},c);let l=removeHash(r.url).split("?")[0]||"",p=i.extract(r.url),v=i.parse(p,{sort:!1}),_=Object.assign(v,r.query),P=i.stringify(_,c);P&&(P=`?${P}`);let q=function(r){let i="",c=r.indexOf("#");return -1!==c&&(i=r.slice(c)),i}(r.url);return r.fragmentIdentifier&&(q=`#${c[E]?encode(r.fragmentIdentifier,c):r.fragmentIdentifier}`),`${l}${P}${q}`},i.pick=(r,c,l)=>{l=Object.assign({parseFragmentIdentifier:!0,[E]:!1},l);let{url:p,query:v,fragmentIdentifier:P}=i.parseUrl(r,l);return i.stringifyUrl({url:p,query:_(v,c),fragmentIdentifier:P},l)},i.exclude=(r,c,l)=>{let p=Array.isArray(c)?r=>!c.includes(r):(r,i)=>!c(r,i);return i.pick(r,p,l)}},54098:function(r,i){var c="undefined"!=typeof self?self:this,l=function(){function F(){this.fetch=!1,this.DOMException=c.DOMException}return F.prototype=c,new F}();(function(r){var i={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch(r){return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};if(i.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(r){return r&&c.indexOf(Object.prototype.toString.call(r))>-1};function normalizeName(r){if("string"!=typeof r&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(r))throw TypeError("Invalid character in header field name");return r.toLowerCase()}function normalizeValue(r){return"string"!=typeof r&&(r=String(r)),r}function iteratorFor(r){var c={next:function(){var i=r.shift();return{done:void 0===i,value:i}}};return i.iterable&&(c[Symbol.iterator]=function(){return c}),c}function Headers(r){this.map={},r instanceof Headers?r.forEach(function(r,i){this.append(i,r)},this):Array.isArray(r)?r.forEach(function(r){this.append(r[0],r[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(i){this.append(i,r[i])},this)}function consumed(r){if(r.bodyUsed)return Promise.reject(TypeError("Already read"));r.bodyUsed=!0}function fileReaderReady(r){return new Promise(function(i,c){r.onload=function(){i(r.result)},r.onerror=function(){c(r.error)}})}function readBlobAsArrayBuffer(r){var i=new FileReader,c=fileReaderReady(i);return i.readAsArrayBuffer(r),c}function bufferClone(r){if(r.slice)return r.slice(0);var i=new Uint8Array(r.byteLength);return i.set(new Uint8Array(r)),i.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(r){if(this._bodyInit=r,r){if("string"==typeof r)this._bodyText=r;else if(i.blob&&Blob.prototype.isPrototypeOf(r))this._bodyBlob=r;else if(i.formData&&FormData.prototype.isPrototypeOf(r))this._bodyFormData=r;else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(r))this._bodyText=r.toString();else{var c;i.arrayBuffer&&i.blob&&(c=r)&&DataView.prototype.isPrototypeOf(c)?(this._bodyArrayBuffer=bufferClone(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||p(r))?this._bodyArrayBuffer=bufferClone(r):this._bodyText=r=Object.prototype.toString.call(r)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof r?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var r=consumed(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var r,i,c,l=consumed(this);if(l)return l;if(this._bodyBlob)return r=this._bodyBlob,c=fileReaderReady(i=new FileReader),i.readAsText(r),c;if(this._bodyArrayBuffer)return Promise.resolve(function(r){for(var i=new Uint8Array(r),c=Array(i.length),l=0;l<i.length;l++)c[l]=String.fromCharCode(i[l]);return c.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},i.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}Headers.prototype.append=function(r,i){r=normalizeName(r),i=normalizeValue(i);var c=this.map[r];this.map[r]=c?c+", "+i:i},Headers.prototype.delete=function(r){delete this.map[normalizeName(r)]},Headers.prototype.get=function(r){return r=normalizeName(r),this.has(r)?this.map[r]:null},Headers.prototype.has=function(r){return this.map.hasOwnProperty(normalizeName(r))},Headers.prototype.set=function(r,i){this.map[normalizeName(r)]=normalizeValue(i)},Headers.prototype.forEach=function(r,i){for(var c in this.map)this.map.hasOwnProperty(c)&&r.call(i,this.map[c],c,this)},Headers.prototype.keys=function(){var r=[];return this.forEach(function(i,c){r.push(c)}),iteratorFor(r)},Headers.prototype.values=function(){var r=[];return this.forEach(function(i){r.push(i)}),iteratorFor(r)},Headers.prototype.entries=function(){var r=[];return this.forEach(function(i,c){r.push([c,i])}),iteratorFor(r)},i.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Request(r,i){var c,l,p=(i=i||{}).body;if(r instanceof Request){if(r.bodyUsed)throw TypeError("Already read");this.url=r.url,this.credentials=r.credentials,i.headers||(this.headers=new Headers(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,p||null==r._bodyInit||(p=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=i.credentials||this.credentials||"same-origin",(i.headers||!this.headers)&&(this.headers=new Headers(i.headers)),this.method=(l=(c=i.method||this.method||"GET").toUpperCase(),v.indexOf(l)>-1?l:c),this.mode=i.mode||this.mode||null,this.signal=i.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&p)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(p)}function decode(r){var i=new FormData;return r.trim().split("&").forEach(function(r){if(r){var c=r.split("="),l=c.shift().replace(/\+/g," "),p=c.join("=").replace(/\+/g," ");i.append(decodeURIComponent(l),decodeURIComponent(p))}}),i}function Response(r,i){i||(i={}),this.type="default",this.status=void 0===i.status?200:i.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in i?i.statusText:"OK",this.headers=new Headers(i.headers),this.url=i.url||"",this._initBody(r)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var r=new Response(null,{status:0,statusText:""});return r.type="error",r};var _=[301,302,303,307,308];Response.redirect=function(r,i){if(-1===_.indexOf(i))throw RangeError("Invalid status code");return new Response(null,{status:i,headers:{location:r}})},r.DOMException=l.DOMException;try{new r.DOMException}catch(i){r.DOMException=function(r,i){this.message=r,this.name=i;var c=Error(r);this.stack=c.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function fetch(c,l){return new Promise(function(p,v){var _=new Request(c,l);if(_.signal&&_.signal.aborted)return v(new r.DOMException("Aborted","AbortError"));var E=new XMLHttpRequest;function abortXhr(){E.abort()}E.onload=function(){var r,i,c={status:E.status,statusText:E.statusText,headers:(r=E.getAllResponseHeaders()||"",i=new Headers,r.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(r){var c=r.split(":"),l=c.shift().trim();if(l){var p=c.join(":").trim();i.append(l,p)}}),i)};c.url="responseURL"in E?E.responseURL:c.headers.get("X-Request-URL");var l="response"in E?E.response:E.responseText;p(new Response(l,c))},E.onerror=function(){v(TypeError("Network request failed"))},E.ontimeout=function(){v(TypeError("Network request failed"))},E.onabort=function(){v(new r.DOMException("Aborted","AbortError"))},E.open(_.method,_.url,!0),"include"===_.credentials?E.withCredentials=!0:"omit"===_.credentials&&(E.withCredentials=!1),"responseType"in E&&i.blob&&(E.responseType="blob"),_.headers.forEach(function(r,i){E.setRequestHeader(i,r)}),_.signal&&(_.signal.addEventListener("abort",abortXhr),E.onreadystatechange=function(){4===E.readyState&&_.signal.removeEventListener("abort",abortXhr)}),E.send(void 0===_._bodyInit?null:_._bodyInit)})}fetch.polyfill=!0,l.fetch||(l.fetch=fetch,l.Headers=Headers,l.Request=Request,l.Response=Response),r.Headers=Headers,r.Request=Request,r.Response=Response,r.fetch=fetch,Object.defineProperty(r,"__esModule",{value:!0})})({}),l.fetch.ponyfill=!0,delete l.fetch.polyfill,(i=l.fetch).default=l.fetch,i.fetch=l.fetch,i.Headers=l.Headers,i.Request=l.Request,i.Response=l.Response,r.exports=i},72307:function(r,i,c){r=c.nmd(r);var l,p,v,_="__lodash_hash_undefined__",E="[object Arguments]",P="[object Array]",q="[object Boolean]",z="[object Date]",M="[object Error]",U="[object Function]",J="[object Map]",Q="[object Number]",X="[object Object]",et="[object Promise]",es="[object RegExp]",eo="[object Set]",ec="[object String]",el="[object WeakMap]",eh="[object ArrayBuffer]",ep="[object DataView]",ed=/^\[object .+?Constructor\]$/,ef=/^(?:0|[1-9]\d*)$/,eg={};eg["[object Float32Array]"]=eg["[object Float64Array]"]=eg["[object Int8Array]"]=eg["[object Int16Array]"]=eg["[object Int32Array]"]=eg["[object Uint8Array]"]=eg["[object Uint8ClampedArray]"]=eg["[object Uint16Array]"]=eg["[object Uint32Array]"]=!0,eg[E]=eg[P]=eg[eh]=eg[q]=eg[ep]=eg[z]=eg[M]=eg[U]=eg[J]=eg[Q]=eg[X]=eg[es]=eg[eo]=eg[ec]=eg[el]=!1;var ey="object"==typeof c.g&&c.g&&c.g.Object===Object&&c.g,em="object"==typeof self&&self&&self.Object===Object&&self,e_=ey||em||Function("return this")(),eb=i&&!i.nodeType&&i,ew=eb&&r&&!r.nodeType&&r,eE=ew&&ew.exports===eb,eI=eE&&ey.process,ex=function(){try{return eI&&eI.binding&&eI.binding("util")}catch(r){}}(),eS=ex&&ex.isTypedArray;function mapToArray(r){var i=-1,c=Array(r.size);return r.forEach(function(r,l){c[++i]=[l,r]}),c}function setToArray(r){var i=-1,c=Array(r.size);return r.forEach(function(r){c[++i]=r}),c}var eP=Array.prototype,eR=Function.prototype,eO=Object.prototype,eN=e_["__core-js_shared__"],eC=eR.toString,eA=eO.hasOwnProperty,ej=(l=/[^.]+$/.exec(eN&&eN.keys&&eN.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",eT=eO.toString,eL=RegExp("^"+eC.call(eA).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eD=eE?e_.Buffer:void 0,ek=e_.Symbol,ez=e_.Uint8Array,eM=eO.propertyIsEnumerable,eU=eP.splice,e$=ek?ek.toStringTag:void 0,eH=Object.getOwnPropertySymbols,eK=eD?eD.isBuffer:void 0,eB=(p=Object.keys,v=Object,function(r){return p(v(r))}),eV=getNative(e_,"DataView"),eF=getNative(e_,"Map"),eG=getNative(e_,"Promise"),eJ=getNative(e_,"Set"),eW=getNative(e_,"WeakMap"),eY=getNative(Object,"create"),eZ=toSource(eV),eQ=toSource(eF),eX=toSource(eG),e0=toSource(eJ),e1=toSource(eW),e5=ek?ek.prototype:void 0,e6=e5?e5.valueOf:void 0;function Hash(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var l=r[i];this.set(l[0],l[1])}}function ListCache(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var l=r[i];this.set(l[0],l[1])}}function MapCache(r){var i=-1,c=null==r?0:r.length;for(this.clear();++i<c;){var l=r[i];this.set(l[0],l[1])}}function SetCache(r){var i=-1,c=null==r?0:r.length;for(this.__data__=new MapCache;++i<c;)this.add(r[i])}function Stack(r){var i=this.__data__=new ListCache(r);this.size=i.size}function assocIndexOf(r,i){for(var c=r.length;c--;)if(eq(r[c][0],i))return c;return -1}function baseGetTag(r){return null==r?void 0===r?"[object Undefined]":"[object Null]":e$&&e$ in Object(r)?function(r){var i=eA.call(r,e$),c=r[e$];try{r[e$]=void 0;var l=!0}catch(r){}var p=eT.call(r);return l&&(i?r[e$]=c:delete r[e$]),p}(r):eT.call(r)}function baseIsArguments(r){return isObjectLike(r)&&baseGetTag(r)==E}function equalArrays(r,i,c,l,p,v){var _=1&c,E=r.length,P=i.length;if(E!=P&&!(_&&P>E))return!1;var q=v.get(r);if(q&&v.get(i))return q==i;var z=-1,M=!0,U=2&c?new SetCache:void 0;for(v.set(r,i),v.set(i,r);++z<E;){var J=r[z],Q=i[z];if(l)var X=_?l(Q,J,z,i,r,v):l(J,Q,z,r,i,v);if(void 0!==X){if(X)continue;M=!1;break}if(U){if(!function(r,i){for(var c=-1,l=null==r?0:r.length;++c<l;)if(i(r[c],c,r))return!0;return!1}(i,function(r,i){if(!U.has(i)&&(J===r||p(J,r,c,l,v)))return U.push(i)})){M=!1;break}}else if(!(J===Q||p(J,Q,c,l,v))){M=!1;break}}return v.delete(r),v.delete(i),M}function getAllKeys(r){var i;return i=function(r){return null!=r&&isLength(r.length)&&!isFunction(r)?function(r,i){var c,l=e4(r),p=!l&&e9(r),v=!l&&!p&&e8(r),_=!l&&!p&&!v&&e7(r),E=l||p||v||_,P=E?function(r,i){for(var c=-1,l=Array(r);++c<r;)l[c]=i(c);return l}(r.length,String):[],q=P.length;for(var z in r)eA.call(r,z)&&!(E&&("length"==z||v&&("offset"==z||"parent"==z)||_&&("buffer"==z||"byteLength"==z||"byteOffset"==z)||(c=null==(c=q)?9007199254740991:c)&&("number"==typeof z||ef.test(z))&&z>-1&&z%1==0&&z<c))&&P.push(z);return P}(r):function(r){if(i=r&&r.constructor,r!==("function"==typeof i&&i.prototype||eO))return eB(r);var i,c=[];for(var l in Object(r))eA.call(r,l)&&"constructor"!=l&&c.push(l);return c}(r)}(r),e4(r)?i:function(r,i){for(var c=-1,l=i.length,p=r.length;++c<l;)r[p+c]=i[c];return r}(i,e2(r))}function getMapData(r,i){var c,l=r.__data__;return("string"==(c=typeof i)||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==i:null===i)?l["string"==typeof i?"string":"hash"]:l.map}function getNative(r,i){var c=null==r?void 0:r[i];return!(!isObject(c)||ej&&ej in c)&&(isFunction(c)?eL:ed).test(toSource(c))?c:void 0}Hash.prototype.clear=function(){this.__data__=eY?eY(null):{},this.size=0},Hash.prototype.delete=function(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i},Hash.prototype.get=function(r){var i=this.__data__;if(eY){var c=i[r];return c===_?void 0:c}return eA.call(i,r)?i[r]:void 0},Hash.prototype.has=function(r){var i=this.__data__;return eY?void 0!==i[r]:eA.call(i,r)},Hash.prototype.set=function(r,i){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=eY&&void 0===i?_:i,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(r){var i=this.__data__,c=assocIndexOf(i,r);return!(c<0)&&(c==i.length-1?i.pop():eU.call(i,c,1),--this.size,!0)},ListCache.prototype.get=function(r){var i=this.__data__,c=assocIndexOf(i,r);return c<0?void 0:i[c][1]},ListCache.prototype.has=function(r){return assocIndexOf(this.__data__,r)>-1},ListCache.prototype.set=function(r,i){var c=this.__data__,l=assocIndexOf(c,r);return l<0?(++this.size,c.push([r,i])):c[l][1]=i,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(eF||ListCache),string:new Hash}},MapCache.prototype.delete=function(r){var i=getMapData(this,r).delete(r);return this.size-=i?1:0,i},MapCache.prototype.get=function(r){return getMapData(this,r).get(r)},MapCache.prototype.has=function(r){return getMapData(this,r).has(r)},MapCache.prototype.set=function(r,i){var c=getMapData(this,r),l=c.size;return c.set(r,i),this.size+=c.size==l?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(r){return this.__data__.set(r,_),this},SetCache.prototype.has=function(r){return this.__data__.has(r)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(r){var i=this.__data__,c=i.delete(r);return this.size=i.size,c},Stack.prototype.get=function(r){return this.__data__.get(r)},Stack.prototype.has=function(r){return this.__data__.has(r)},Stack.prototype.set=function(r,i){var c=this.__data__;if(c instanceof ListCache){var l=c.__data__;if(!eF||l.length<199)return l.push([r,i]),this.size=++c.size,this;c=this.__data__=new MapCache(l)}return c.set(r,i),this.size=c.size,this};var e2=eH?function(r){return null==r?[]:function(r,i){for(var c=-1,l=null==r?0:r.length,p=0,v=[];++c<l;){var _=r[c];i(_,c,r)&&(v[p++]=_)}return v}(eH(r=Object(r)),function(i){return eM.call(r,i)})}:function(){return[]},e3=baseGetTag;function toSource(r){if(null!=r){try{return eC.call(r)}catch(r){}try{return r+""}catch(r){}}return""}function eq(r,i){return r===i||r!=r&&i!=i}(eV&&e3(new eV(new ArrayBuffer(1)))!=ep||eF&&e3(new eF)!=J||eG&&e3(eG.resolve())!=et||eJ&&e3(new eJ)!=eo||eW&&e3(new eW)!=el)&&(e3=function(r){var i=baseGetTag(r),c=i==X?r.constructor:void 0,l=c?toSource(c):"";if(l)switch(l){case eZ:return ep;case eQ:return J;case eX:return et;case e0:return eo;case e1:return el}return i});var e9=baseIsArguments(function(){return arguments}())?baseIsArguments:function(r){return isObjectLike(r)&&eA.call(r,"callee")&&!eM.call(r,"callee")},e4=Array.isArray,e8=eK||function(){return!1};function isFunction(r){if(!isObject(r))return!1;var i=baseGetTag(r);return i==U||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i}function isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991}function isObject(r){var i=typeof r;return null!=r&&("object"==i||"function"==i)}function isObjectLike(r){return null!=r&&"object"==typeof r}var e7=eS?function(r){return eS(r)}:function(r){return isObjectLike(r)&&isLength(r.length)&&!!eg[baseGetTag(r)]};r.exports=function(r,i){return function baseIsEqual(r,i,c,l,p){return r===i||(null!=r&&null!=i&&(isObjectLike(r)||isObjectLike(i))?function(r,i,c,l,p,v){var _=e4(r),U=e4(i),et=_?P:e3(r),el=U?P:e3(i);et=et==E?X:et,el=el==E?X:el;var ed=et==X,ef=el==X,eg=et==el;if(eg&&e8(r)){if(!e8(i))return!1;_=!0,ed=!1}if(eg&&!ed)return v||(v=new Stack),_||e7(r)?equalArrays(r,i,c,l,p,v):function(r,i,c,l,p,v,_){switch(c){case ep:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)break;r=r.buffer,i=i.buffer;case eh:if(r.byteLength!=i.byteLength||!v(new ez(r),new ez(i)))break;return!0;case q:case z:case Q:return eq(+r,+i);case M:return r.name==i.name&&r.message==i.message;case es:case ec:return r==i+"";case J:var E=mapToArray;case eo:var P=1&l;if(E||(E=setToArray),r.size!=i.size&&!P)break;var U=_.get(r);if(U)return U==i;l|=2,_.set(r,i);var X=equalArrays(E(r),E(i),l,p,v,_);return _.delete(r),X;case"[object Symbol]":if(e6)return e6.call(r)==e6.call(i)}return!1}(r,i,et,c,l,p,v);if(!(1&c)){var ey=ed&&eA.call(r,"__wrapped__"),em=ef&&eA.call(i,"__wrapped__");if(ey||em){var e_=ey?r.value():r,eb=em?i.value():i;return v||(v=new Stack),p(e_,eb,c,l,v)}}return!!eg&&(v||(v=new Stack),function(r,i,c,l,p,v){var _=1&c,E=getAllKeys(r),P=E.length;if(P!=getAllKeys(i).length&&!_)return!1;for(var q=P;q--;){var z=E[q];if(!(_?z in i:eA.call(i,z)))return!1}var M=v.get(r);if(M&&v.get(i))return M==i;var U=!0;v.set(r,i),v.set(i,r);for(var J=_;++q<P;){var Q=r[z=E[q]],X=i[z];if(l)var et=_?l(X,Q,z,i,r,v):l(Q,X,z,r,i,v);if(!(void 0===et?Q===X||p(Q,X,c,l,v):et)){U=!1;break}J||(J="constructor"==z)}if(U&&!J){var es=r.constructor,eo=i.constructor;es!=eo&&"constructor"in r&&"constructor"in i&&!("function"==typeof es&&es instanceof es&&"function"==typeof eo&&eo instanceof eo)&&(U=!1)}return v.delete(r),v.delete(i),U}(r,i,c,l,p,v))}(r,i,c,l,baseIsEqual,p):r!=r&&i!=i)}(r,i)}},85346:function(r){"use strict";function tryStringify(r){try{return JSON.stringify(r)}catch(r){return'"[Circular]"'}}r.exports=function(r,i,c){var l=c&&c.stringify||tryStringify;if("object"==typeof r&&null!==r){var p=i.length+1;if(1===p)return r;var v=Array(p);v[0]=l(r);for(var _=1;_<p;_++)v[_]=l(i[_]);return v.join(" ")}if("string"!=typeof r)return r;var E=i.length;if(0===E)return r;for(var P="",q=0,z=-1,M=r&&r.length||0,U=0;U<M;){if(37===r.charCodeAt(U)&&U+1<M){switch(z=z>-1?z:0,r.charCodeAt(U+1)){case 100:case 102:if(q>=E||null==i[q])break;z<U&&(P+=r.slice(z,U)),P+=Number(i[q]),z=U+2,U++;break;case 105:if(q>=E||null==i[q])break;z<U&&(P+=r.slice(z,U)),P+=Math.floor(Number(i[q])),z=U+2,U++;break;case 79:case 111:case 106:if(q>=E||void 0===i[q])break;z<U&&(P+=r.slice(z,U));var J=typeof i[q];if("string"===J){P+="'"+i[q]+"'",z=U+2,U++;break}if("function"===J){P+=i[q].name||"<anonymous>",z=U+2,U++;break}P+=l(i[q]),z=U+2,U++;break;case 115:if(q>=E)break;z<U&&(P+=r.slice(z,U)),P+=String(i[q]),z=U+2,U++;break;case 37:z<U&&(P+=r.slice(z,U)),P+="%",z=U+2,U++,q--}++q}++U}return -1===z?r:(z<M&&(P+=r.slice(z)),P)}},67686:function(r,i,c){"use strict";let l=c(85346);r.exports=pino;let p=function(){function defd(r){return void 0!==r&&r}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(r){return defd(self)||defd(window)||defd(this)||{}}}().console||{};function pino(r){var i;(r=r||{}).browser=r.browser||{};let c=r.browser.transmit;if(c&&"function"!=typeof c.send)throw Error("pino: transmit option must have a send function");let l=r.browser.write||p;r.browser.write&&(r.browser.asObject=!0);let v=r.serializers||{},_=function(r,i){if(Array.isArray(r)){let i=r.filter(function(r){return"!stdSerializers.err"!==r});return i}return!0===r&&Object.keys(i)}(r.browser.serialize,v),E=r.browser.serialize;Array.isArray(r.browser.serialize)&&r.browser.serialize.indexOf("!stdSerializers.err")>-1&&(E=!1),"function"==typeof l&&(l.error=l.fatal=l.warn=l.info=l.debug=l.trace=l),!1===r.enabled&&(r.level="silent");let P=r.level||"info",q=Object.create(l);q.log||(q.log=noop),Object.defineProperty(q,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(q,"level",{get:function(){return this._level},set:function(r){if("silent"!==r&&!this.levels.values[r])throw Error("unknown level "+r);this._level=r,set(z,q,"error","log"),set(z,q,"fatal","error"),set(z,q,"warn","error"),set(z,q,"info","log"),set(z,q,"debug","log"),set(z,q,"trace","log")}});let z={transmit:c,serialize:_,asObject:r.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(i=r).timestamp?i.timestamp:!1===i.timestamp?nullTime:epochTime};return q.levels=pino.levels,q.level=P,q.setMaxListeners=q.getMaxListeners=q.emit=q.addListener=q.on=q.prependListener=q.once=q.prependOnceListener=q.removeListener=q.removeAllListeners=q.listeners=q.listenerCount=q.eventNames=q.write=q.flush=noop,q.serializers=v,q._serialize=_,q._stdErrSerialize=E,q.child=function(i,l){if(!i)throw Error("missing bindings for child Pino");l=l||{},_&&i.serializers&&(l.serializers=i.serializers);let p=l.serializers;if(_&&p){var E=Object.assign({},v,p),P=!0===r.browser.serialize?Object.keys(E):_;delete i.serializers,applySerializers([i],P,E,this._stdErrSerialize)}function Child(r){this._childLevel=(0|r._childLevel)+1,this.error=bind(r,i,"error"),this.fatal=bind(r,i,"fatal"),this.warn=bind(r,i,"warn"),this.info=bind(r,i,"info"),this.debug=bind(r,i,"debug"),this.trace=bind(r,i,"trace"),E&&(this.serializers=E,this._serialize=P),c&&(this._logEvent=createLogEventShape([].concat(r._logEvent.bindings,i)))}return Child.prototype=this,new Child(this)},c&&(q._logEvent=createLogEventShape()),q}function set(r,i,c,v){let _=Object.getPrototypeOf(i);i[c]=i.levelVal>i.levels.values[c]?noop:_[c]?_[c]:p[c]||p[v]||noop,function(r,i,c){if(r.transmit||i[c]!==noop){var v;i[c]=(v=i[c],function(){let _=r.timestamp(),E=Array(arguments.length),P=Object.getPrototypeOf&&Object.getPrototypeOf(this)===p?p:this;for(var q=0;q<E.length;q++)E[q]=arguments[q];if(r.serialize&&!r.asObject&&applySerializers(E,this._serialize,this.serializers,this._stdErrSerialize),r.asObject?v.call(P,function(r,i,c,p){r._serialize&&applySerializers(c,r._serialize,r.serializers,r._stdErrSerialize);let v=c.slice(),_=v[0],E={};p&&(E.time=p),E.level=pino.levels.values[i];let P=(0|r._childLevel)+1;if(P<1&&(P=1),null!==_&&"object"==typeof _){for(;P--&&"object"==typeof v[0];)Object.assign(E,v.shift());_=v.length?l(v.shift(),v):void 0}else"string"==typeof _&&(_=l(v.shift(),v));return void 0!==_&&(E.msg=_),E}(this,c,E,_)):v.apply(P,E),r.transmit){let l=r.transmit.level||i.level,p=pino.levels.values[l],v=pino.levels.values[c];if(v<p)return;(function(r,i,c){let l=i.send,p=i.ts,v=i.methodLevel,_=i.methodValue,E=i.val,P=r._logEvent.bindings;applySerializers(c,r._serialize||Object.keys(r.serializers),r.serializers,void 0===r._stdErrSerialize||r._stdErrSerialize),r._logEvent.ts=p,r._logEvent.messages=c.filter(function(r){return -1===P.indexOf(r)}),r._logEvent.level.label=v,r._logEvent.level.value=_,l(v,r._logEvent,E),r._logEvent=createLogEventShape(P)})(this,{ts:_,methodLevel:c,methodValue:v,transmitLevel:l,transmitValue:pino.levels.values[r.transmit.level||i.level],send:r.transmit.send,val:i.levelVal},E)}})}}(r,i,c)}function applySerializers(r,i,c,l){for(let p in r)if(l&&r[p]instanceof Error)r[p]=pino.stdSerializers.err(r[p]);else if("object"==typeof r[p]&&!Array.isArray(r[p]))for(let l in r[p])i&&i.indexOf(l)>-1&&l in c&&(r[p][l]=c[l](r[p][l]))}function bind(r,i,c){return function(){let l=Array(1+arguments.length);l[0]=i;for(var p=1;p<l.length;p++)l[p]=arguments[p-1];return r[c].apply(this,l)}}function createLogEventShape(r){return{ts:0,messages:[],bindings:r||[],level:{label:"",value:0}}}function mock(){return{}}function passthrough(r){return r}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},pino.stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:function(r){let i={type:r.constructor.name,msg:r.message,stack:r.stack};for(let c in r)void 0===i[c]&&(i[c]=r[c]);return i}},pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})}}]);
//# sourceMappingURL=1307.1ac1793ea8bb3f0b.js.map