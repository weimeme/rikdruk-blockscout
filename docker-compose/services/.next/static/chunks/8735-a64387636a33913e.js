"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8735],{37409:function(e,r,i){i.d(r,{Z:function(){return delay}});function delay(e){return new Promise(r=>window.setTimeout(r,e))}},91929:function(e,r,i){i.d(r,{Z:function(){return eV}});var t=i(85893),s=i(74717),n=i(75350),l=i(31708),a=i(96272),o=i(67294),c=i(87536),d=i(99640),u=i(22099),m=i(37409),p=i(19784),h=i(58586),v=i(85786),f=i(14335),x=i(9095),g=i(70654),b=i(28129),j=i(97477),y=i(14072),_=i(776),C=i(55036),S=o.memo((0,n.m)(e=>{let{children:r,className:i}=e,s=(0,C.Z)(),n=Array.isArray(r)?r[0]:r,l=Array.isArray(r)?r[1]:null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.P,{className:i,_notFirst:{mt:{base:3,lg:0}},children:n}),s&&!l?null:(0,t.jsx)(_.P,{fontSize:"sm",className:i,color:"text_secondary",children:l})]})})),k=o.memo(e=>{let{isReadOnly:r}=e,{formState:i,control:s}=(0,c.Gc)(),l=o.useCallback(e=>{let{field:s}=e,n="address"in i.errors?i.errors.address:void 0;return(0,t.jsxs)(g.NI,{variant:"floating",id:s.name,isRequired:!0,size:{base:"md",lg:"lg"},children:[(0,t.jsx)(b.I,{...s,required:!0,isInvalid:!!n,maxLength:j.y,isDisabled:i.isSubmitting||r,autoComplete:"off"}),(0,t.jsx)(y.Z,{text:"Smart contract / Address (0x...)",error:n})]})},[i.errors,i.isSubmitting,r]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{children:(0,t.jsx)(n.m.span,{fontWeight:500,fontSize:"lg",fontFamily:"heading",children:"Contract address to verify"})}),(0,t.jsx)(S,{mb:3,children:(0,t.jsx)(c.Qr,{name:"address",control:s,render:l,rules:{required:!0,pattern:j.T}})})]})}),w=i(12498),z=i(5197),D=i(33838),F=i(89076),I=i(53948),A=i(49598),V=i(44416),q=i(56426),T=i(20623),Z=i(13272),N=i(24584),O=i(96026),M=i(6901),E=o.memo(e=>{let{control:r,isDisabled:i,methods:s}=e,l=(0,w.ff)("gray.700","gray.900"),a=(0,C.Z)(),d=o.useMemo(()=>s.map(e=>({value:e,label:M.qL[e]})),[s]),u=o.useCallback(e=>{let{field:r}=e;return(0,t.jsx)(N.Z,{...r,options:d,size:a?"md":"lg",placeholder:"Verification method (compiler type)",isDisabled:i,isRequired:!0,isAsync:!1})},[i,a,d]),m=o.useCallback(e=>{switch(e){case"flattened-code":return(0,t.jsx)(z.HC,{children:"Verification through flattened source code."},e);case"multi-part":return(0,t.jsx)(z.HC,{children:"Verification of multi-part Solidity files."},e);case"sourcify":return(0,t.jsxs)(z.HC,{children:["Verification through ",(0,t.jsx)(D.r,{href:"https://sourcify.dev/",target:"_blank",children:"Sourcify"}),"."]},e);case"standard-input":return(0,t.jsxs)(z.HC,{children:[(0,t.jsx)("span",{children:"Verification using "}),(0,t.jsx)(D.r,{href:"https://docs.soliditylang.org/en/latest/using-the-compiler.html#input-description",target:"_blank",children:"Standard input JSON"}),(0,t.jsx)("span",{children:" file."})]},e);case"vyper-code":return(0,t.jsx)(z.HC,{children:"Verification of Vyper contract."},e);case"vyper-multi-part":return(0,t.jsx)(z.HC,{children:"Verification of multi-part Vyper files."},e);case"vyper-standard-input":return(0,t.jsxs)(z.HC,{children:[(0,t.jsx)("span",{children:"Verification of Vyper contract using "}),(0,t.jsx)(D.r,{href:"https://docs.vyperlang.org/en/stable/compiling-a-contract.html#compiler-input-and-output-json-description",target:"_blank",children:"Standard input JSON"}),(0,t.jsx)("span",{children:" file."})]},e)}},[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.m.span,{fontWeight:500,fontSize:"lg",fontFamily:"heading",children:["Currently, Blockscout supports ",s.length," contract verification methods"]}),(0,t.jsxs)(F.J,{trigger:"hover",isLazy:!0,placement:a?"bottom-end":"right-start",offset:[-8,8],children:[(0,t.jsx)(I.x,{children:(0,t.jsx)(n.m.span,{display:"inline-block",ml:1,cursor:"pointer",verticalAlign:"middle",h:"22px",children:(0,t.jsx)(O.Z,{name:"info",boxSize:5,color:"link",_hover:{color:"link_hovered"}})})}),(0,t.jsx)(A.h,{children:(0,t.jsxs)(V.y,{bgColor:l,w:{base:"300px",lg:"380px"},children:[(0,t.jsx)(q.Q,{bgColor:l}),(0,t.jsx)(T.b,{color:"white",children:(0,t.jsxs)(Z.t7,{children:[(0,t.jsxs)("span",{children:["Currently, Blockscout supports ",s.length," methods:"]}),(0,t.jsx)(z.GS,{children:s.map(m)})]})})]})})]})]}),(0,t.jsx)("div",{}),(0,t.jsx)(c.Qr,{name:"method",control:r,render:u,rules:{required:!0}})]})}),R=i(88911),L=o.memo(e=>{let{title:r,children:i}=e,s=o.useRef(null);return o.useEffect(()=>{var e;null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[]),(0,t.jsxs)("section",{ref:s,children:[(0,t.jsx)(R.x,{fontWeight:500,fontSize:"lg",fontFamily:"heading",mt:12,mb:5,children:r}),(0,t.jsx)(l.r,{columnGap:"30px",rowGap:{base:2,lg:5},templateColumns:{base:"1fr",lg:"minmax(0, 680px) minmax(0, 340px)"},children:i})]})}),G=i(69029),P=i(41753),Q=i(23100),W=(0,n.m)(e=>{let{message:r,className:i}=e;return(0,t.jsx)(Q.xu,{className:i,color:"error",fontSize:"sm",mt:2,wordBreak:"break-word",children:r})}),B=o.memo(()=>{let{formState:e,control:r}=(0,c.Gc)(),i=o.useCallback(r=>{let{field:i}=r,s="constructor_args"in e.errors?e.errors.constructor_args:void 0;return(0,t.jsxs)(g.NI,{variant:"floating",id:i.name,size:{base:"md",lg:"lg"},isRequired:!0,children:[(0,t.jsx)(P.g,{...i,maxLength:255,isDisabled:e.isSubmitting,isInvalid:!!s,required:!0}),(0,t.jsx)(y.Z,{text:"ABI-encoded Constructor Arguments"}),(null==s?void 0:s.message)&&(0,t.jsx)(W,{message:null==s?void 0:s.message})]})},[e.errors,e.isSubmitting]);return(0,t.jsxs)(S,{children:[(0,t.jsx)(c.Qr,{name:"constructor_args",control:r,render:i,rules:{required:!0}}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Add arguments in "}),(0,t.jsx)(D.r,{href:"https://solidity.readthedocs.io/en/develop/abi-spec.html",target:"_blank",children:"ABI hex encoded form"}),(0,t.jsx)("span",{children:" if required by the contract. Constructor arguments are written right to left, and will be found at the end of the input created bytecode."}),(0,t.jsx)("span",{children:" They may also be "}),(0,t.jsx)(D.r,{href:"https://abi.hashex.org/",target:"_blank",children:"parsed here"}),(0,t.jsx)("span",{children:"."})]})]})}),J=o.memo(()=>{let[e,r]=o.useState(!0),{formState:i,control:s,resetField:n}=(0,c.Gc)(),l=o.useCallback(()=>{e||n("constructor_args"),r(e=>!e)},[e,n]),a=o.useCallback(e=>{let{field:r}=e;return(0,t.jsx)(G.Z,{text:"Try to fetch constructor arguments automatically",field:r,isDisabled:i.isSubmitting,onChange:l})},[i.isSubmitting,l]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{children:(0,t.jsx)(c.Qr,{name:"autodetect_constructor_args",control:s,render:a})}),!e&&(0,t.jsx)(B,{})]})}),H=o.memo(e=>{let{isVyper:r}=e,{formState:i,control:s}=(0,c.Gc)(),n=o.useCallback(e=>{let{field:r}=e,s="code"in i.errors?i.errors.code:void 0;return(0,t.jsxs)(g.NI,{variant:"floating",id:r.name,isRequired:!0,size:{base:"md",lg:"lg"},children:[(0,t.jsx)(P.g,{...r,isInvalid:!!s,isDisabled:i.isSubmitting,required:!0}),(0,t.jsx)(y.Z,{text:"Contract code"}),(null==s?void 0:s.message)&&(0,t.jsx)(W,{message:null==s?void 0:s.message})]})},[i.errors,i.isSubmitting]);return(0,t.jsxs)(S,{children:[(0,t.jsx)(c.Qr,{name:"code",control:s,render:n,rules:{required:!0}}),r?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"We recommend using flattened code. This is necessary if your code utilizes a library or inherits dependencies. Use the "}),(0,t.jsx)(D.r,{href:"https://github.com/poanetwork/solidity-flattener",target:"_blank",children:"POA solidity flattener"}),(0,t.jsx)("span",{children:" or the "}),(0,t.jsx)(D.r,{href:"https://www.npmjs.com/package/truffle-flattener",target:"_blank",children:"Truffle flattener"})]})]})}),U=i(15058),X=i(62489),Y=i(30202),K=i(36217),$=o.memo(e=>{let{isVyper:r}=e,[i,s]=o.useState(!1),{formState:l,control:a,getValues:d,resetField:u}=(0,c.Gc)(),m=(0,C.Z)(),p=(0,Y.NL)(),h=p.getQueryData((0,K.$)("contract_verification_config")),v=o.useCallback(()=>{if(i){let e=d("compiler");(null==e?void 0:e.value.includes("nightly"))&&u("compiler",{defaultValue:null})}s(e=>!e)},[d,i,u]),f=o.useMemo(()=>{var e;return(null===(e=r?null==h?void 0:h.vyper_compiler_versions:null==h?void 0:h.solidity_compiler_versions)||void 0===e?void 0:e.map(e=>({label:e,value:e})))||[]},[null==h?void 0:h.solidity_compiler_versions,null==h?void 0:h.vyper_compiler_versions,r]),x=o.useCallback(async e=>f.filter(r=>{let{label:i}=r;return!e||i.toLowerCase().includes(e.toLowerCase())}).filter(e=>{let{label:r}=e;return!!i||!r.includes("nightly")}).slice(0,50),[i,f]),g=o.useCallback(e=>{let{field:r}=e,i="compiler"in l.errors?l.errors.compiler:void 0;return(0,t.jsx)(N.Z,{...r,loadOptions:x,defaultOptions:!0,size:m?"md":"lg",placeholder:"Compiler (enter version or use the dropdown)",placeholderIcon:(0,t.jsx)(O.Z,{name:"search"}),isDisabled:l.isSubmitting,error:i,isRequired:!0,isAsync:!0})},[l.errors,l.isSubmitting,m,x]);return(0,t.jsxs)(S,{children:[(0,t.jsxs)(t.Fragment,{children:[!r&&(0,t.jsx)(U.X,{size:"lg",mb:2,onChange:v,isDisabled:l.isSubmitting,children:"Include nightly builds"}),(0,t.jsx)(c.Qr,{name:"compiler",control:a,render:g,rules:{required:!0}})]}),r?null:(0,t.jsxs)(n.m.div,{mt:{base:0,lg:8},children:[(0,t.jsx)("span",{children:"The compiler version is specified in "}),(0,t.jsx)(X.E,{color:"text_secondary",children:"pragma solidity X.X.X"}),(0,t.jsx)("span",{children:". Use the compiler version rather than the nightly build. If using the Solidity compiler, run "}),(0,t.jsx)(X.E,{color:"text_secondary",children:"solc â€”version"}),(0,t.jsx)("span",{children:" to check."})]})]})}),ee=o.memo(e=>{let{isVyper:r}=e,{formState:i,control:s}=(0,c.Gc)(),n=(0,C.Z)(),l=(0,Y.NL)(),a=l.getQueryData((0,K.$)("contract_verification_config")),d=o.useMemo(()=>{var e;return(null===(e=r?null==a?void 0:a.vyper_evm_versions:null==a?void 0:a.solidity_evm_versions)||void 0===e?void 0:e.map(e=>({label:e,value:e})))||[]},[null==a?void 0:a.solidity_evm_versions,null==a?void 0:a.vyper_evm_versions,r]),u=o.useCallback(e=>{let{field:r}=e,s="evm_version"in i.errors?i.errors.evm_version:void 0;return(0,t.jsx)(N.Z,{...r,options:d,size:n?"md":"lg",placeholder:"EVM Version",isDisabled:i.isSubmitting,error:s,isRequired:!0})},[i.errors,i.isSubmitting,n,d]);return(0,t.jsxs)(S,{children:[(0,t.jsx)(c.Qr,{name:"evm_version",control:s,render:u,rules:{required:!0}}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"The EVM version the contract is written for. If the bytecode does not match the version, we try to verify using the latest EVM version. "}),(0,t.jsx)(D.r,{href:r?"https://docs.vyperlang.org/en/stable/compiling-a-contract.html#target-options":"https://docs.soliditylang.org/en/latest/using-the-compiler.html#target-options",target:"_blank",children:"EVM version details"})]})]})}),er=o.memo(()=>{let{formState:e,control:r}=(0,c.Gc)(),i=o.useCallback(r=>{let{field:i}=r;return(0,t.jsx)(G.Z,{text:"Is Yul contract",field:i,isDisabled:e.isSubmitting})},[e.isSubmitting]);return(0,t.jsx)(S,{children:(0,t.jsx)(c.Qr,{name:"is_yul",control:r,render:i})})}),ei=i(204),et=i(89154),es=o.memo(e=>{let{control:r,index:i,fieldsLength:s,onAddFieldClick:n,onRemoveFieldClick:l,error:a,isDisabled:d}=e,u=o.useRef(null),m=o.useCallback(e=>{let{field:r}=e;return(0,t.jsxs)(g.NI,{variant:"floating",id:r.name,isRequired:!0,size:{base:"md",lg:"lg"},children:[(0,t.jsx)(b.I,{...r,required:!0,isInvalid:!!(null==a?void 0:a.name),isDisabled:d,maxLength:255,autoComplete:"off"}),(0,t.jsx)(y.Z,{text:"Library name (.sol file)",error:null==a?void 0:a.name})]})},[null==a?void 0:a.name,d]),p=o.useCallback(e=>{let{field:r}=e;return(0,t.jsxs)(g.NI,{variant:"floating",id:r.name,isRequired:!0,size:{base:"md",lg:"lg"},children:[(0,t.jsx)(b.I,{...r,isInvalid:!!(null==a?void 0:a.address),isDisabled:d,required:!0,autoComplete:"off"}),(0,t.jsx)(y.Z,{text:"Library address (0x...)",error:null==a?void 0:a.address})]})},[null==a?void 0:a.address,d]),h=o.useCallback(()=>{n(i)},[i,n]),v=o.useCallback(()=>{l(i)},[i,l]);return o.useEffect(()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{children:(0,t.jsxs)(ei.k,{alignItems:"center",justifyContent:"space-between",ref:u,mt:0!==i?6:0,children:[(0,t.jsxs)(R.x,{variant:"secondary",fontSize:"sm",children:["Contract library ",i+1]}),(0,t.jsxs)(ei.k,{columnGap:5,children:[s>1&&(0,t.jsx)(et.h,{"aria-label":"delete",variant:"outline",w:"30px",h:"30px",onClick:v,icon:(0,t.jsx)(O.Z,{name:"minus",w:"20px",h:"20px"}),isDisabled:d}),s<10&&(0,t.jsx)(et.h,{"aria-label":"add",variant:"outline",w:"30px",h:"30px",onClick:h,icon:(0,t.jsx)(O.Z,{name:"plus",w:"20px",h:"20px"}),isDisabled:d})]})]})}),(0,t.jsxs)(S,{children:[(0,t.jsx)(c.Qr,{name:"libraries.".concat(i,".name"),control:r,render:m,rules:{required:!0}}),0===i?(0,t.jsx)(t.Fragment,{children:"A library name called in the .sol file. Multiple libraries (up to 10) may be added for each contract."}):null]}),(0,t.jsxs)(S,{children:[(0,t.jsx)(c.Qr,{name:"libraries.".concat(i,".address"),control:r,render:p,rules:{required:!0,pattern:j.T}}),0===i?(0,t.jsx)(t.Fragment,{children:"The 0x library address. This can be found in the generated json file or Truffle output (if using truffle)."}):null]})]})}),en=o.memo(()=>{let{formState:e,control:r,getValues:i}=(0,c.Gc)(),{fields:n,append:l,remove:a,insert:d}=(0,c.Dq)({name:"libraries",control:r}),[u,m]=o.useState(n.length>0),p=i("libraries");(0,s.r)(()=>{p&&0!==p.length||m(!1)},[p]);let h=o.useCallback(()=>{u?a():l({name:"",address:""}),m(e=>!e)},[l,u,a]),v=o.useCallback(e=>{d(e+1,{name:"",address:""})},[d]),f=o.useCallback(e=>{a(e)},[a]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{children:(0,t.jsx)(U.X,{size:"lg",onChange:h,mt:9,isDisabled:e.isSubmitting,children:"Add contract libraries"})}),n.map((i,s)=>{var l;return(0,t.jsx)(es,{index:s,control:r,fieldsLength:n.length,onAddFieldClick:v,onRemoveFieldClick:f,error:"libraries"in e.errors?null===(l=e.errors.libraries)||void 0===l?void 0:l[s]:void 0,isDisabled:e.isSubmitting},i.id)})]})}),el=o.memo(e=>{let{hint:r,isReadOnly:i}=e,{formState:s,control:l}=(0,c.Gc)(),a=o.useCallback(e=>{let{field:r}=e,n="name"in s.errors?s.errors.name:void 0;return(0,t.jsxs)(g.NI,{variant:"floating",id:r.name,isRequired:!0,size:{base:"md",lg:"lg"},children:[(0,t.jsx)(b.I,{...r,required:!0,isInvalid:!!n,maxLength:255,isDisabled:s.isSubmitting||i,autoComplete:"off"}),(0,t.jsx)(y.Z,{text:"Contract name",error:n})]})},[s.errors,s.isSubmitting,i]);return(0,t.jsxs)(S,{children:[(0,t.jsx)(c.Qr,{name:"name",control:l,render:a,rules:{required:!0}}),r?(0,t.jsx)("span",{children:r}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Must match the name specified in the code. For example, in "}),(0,t.jsx)(X.E,{color:"text_secondary",children:"contract MyContract {..}"}),(0,t.jsxs)("span",{children:[". ",(0,t.jsx)(n.m.span,{fontWeight:600,children:"MyContract"})," is the contract name."]})]})]})}),ea=o.memo(()=>{let[e,r]=o.useState(!0),{formState:i,control:s}=(0,c.Gc)(),n="optimization_runs"in i.errors?i.errors.optimization_runs:void 0,l=o.useCallback(()=>{r(e=>!e)},[]),a=o.useCallback(e=>{let{field:r}=e;return(0,t.jsx)(ei.k,{flexShrink:0,children:(0,t.jsx)(G.Z,{text:"Optimization enabled",field:r,onChange:l,isDisabled:i.isSubmitting})})},[i.isSubmitting,l]),d=o.useCallback(e=>{let{field:r}=e;return(0,t.jsx)(b.I,{...r,required:!0,isDisabled:i.isSubmitting,autoComplete:"off",type:"number",placeholder:"Optimization runs",size:"xs",minW:"100px",maxW:"200px",flexShrink:1,isInvalid:!!n})},[n,i.isSubmitting]);return(0,t.jsx)(S,{children:(0,t.jsxs)(ei.k,{columnGap:5,h:{base:"auto",lg:"32px"},children:[(0,t.jsx)(c.Qr,{name:"is_optimization_enabled",control:s,render:a}),e&&(0,t.jsx)(c.Qr,{name:"optimization_runs",control:s,render:d,rules:{required:!0}})]})})}),eo=o.memo(e=>{let{config:r}=e;return(0,t.jsxs)(L,{title:"Contract verification via Solidity (flattened source code)",children:[!(null==r?void 0:r.is_rust_verifier_microservice_enabled)&&(0,t.jsx)(el,{}),(null==r?void 0:r.is_rust_verifier_microservice_enabled)&&(0,t.jsx)(er,{}),(0,t.jsx)($,{}),(0,t.jsx)(ee,{}),(0,t.jsx)(ea,{}),(0,t.jsx)(H,{}),!(null==r?void 0:r.is_rust_verifier_microservice_enabled)&&(0,t.jsx)(J,{}),(0,t.jsx)(en,{})]})}),ec=i(7263),ed=i(7754);async function getAllFileEntries(e){let r=[],i=[];for(let r=0;r<e.length;r++){let t=e[r].webkitGetAsEntry();t&&i.push(t)}for(;i.length>0;){let e=i.shift();(null==e?void 0:e.isFile)?r.push(e):(null==e?void 0:e.isDirectory)&&"createReader"in e&&i.push(...await readAllDirectoryEntries(e.createReader()))}return r}async function readAllDirectoryEntries(e){let r=[],i=await readEntriesPromise(e);for(;i&&i.length>0;)r.push(...i),i=await readEntriesPromise(e);return r}async function readEntriesPromise(e){try{return await new Promise((r,i)=>{e.readEntries(e=>{r(e)},i)})}catch(e){}}function convertFileEntryToFile(e){return new Promise(r=>{e.file(async e=>{r(e)})})}var eu=o.memo((0,n.m)(e=>{let{onDrop:r,children:i,className:s,isDisabled:n}=e,[l,a]=o.useState(!1),c=o.useCallback(async e=>{if(e.preventDefault(),n)return;let i=await getAllFileEntries(e.dataTransfer.items),t=await Promise.all(i.map(convertFileEntryToFile));r(t),a(!1)},[n,r]),d=o.useCallback(e=>{e.preventDefault()},[]),u=o.useCallback(e=>{e.preventDefault(),a(!0)},[]),m=o.useCallback(e=>{e.preventDefault(),a(!1)},[]),p=o.useCallback(e=>{n&&(e.preventDefault(),e.stopPropagation())},[n]),h=(0,w.ff)("blackAlpha.200","whiteAlpha.200");return(0,t.jsx)(ed.M,{className:s,w:"100%",minH:"120px",borderWidth:"2px",borderColor:n?h:l?"link_hovered":"link",_hover:{borderColor:n?h:"link_hovered"},borderRadius:"base",borderStyle:"dashed",cursor:"pointer",textAlign:"center",onClick:p,onDrop:c,onDragOver:d,onDragEnter:u,onDragLeave:m,children:i})})),em=i(93863),ep=i(6450),forms_FileInput=e=>{var r;let{children:i,accept:s,multiple:n,field:l}=e,a=o.useRef(null);o.useEffect(()=>{var e,r;!n&&(null===(e=l.value)||void 0===e?void 0:e.length)===0&&(null===(r=a.current)||void 0===r?void 0:r.value)&&(a.current.value="")},[null===(r=l.value)||void 0===r?void 0:r.length,n]);let c=o.useCallback(e=>{l.onChange([...l.value||[],...e])},[l]),d=o.useCallback(e=>{let r=e.target.files;if(!r)return;let i=Array.from(r);c(i),l.onBlur()},[c,l]),u=o.useCallback(()=>{var e;null===(e=a.current)||void 0===e||e.click()},[]),m=o.useCallback(()=>{l.onBlur()},[l]),p=o.useMemo(()=>({onChange:c}),[c]),h="function"==typeof i?i(p):i;return(0,t.jsxs)(em.B,{onClick:u,onBlur:m,children:[(0,t.jsx)(ep.by,{type:"file",onChange:d,ref:a,accept:s,multiple:n,name:l.name}),h]})},eh=i(47523);let ev={".json":"files/json",".sol":"files/sol",".yul":"files/yul"};var ef=o.memo((0,n.m)(e=>{let{file:r,className:i,index:s,onRemove:n,isDisabled:l,error:a}=e,c=o.useCallback(e=>{e.stopPropagation(),null==n||n(s)},[s,n]),d=o.useCallback(e=>{e.stopPropagation()},[]),u=function(e){let r=e.split(".");return 1===r.length?"":"."+r[r.length-1]}(r.name),m=ev[u]||"files/placeholder",p=(0,w.ff)("gray.600","gray.400");return(0,t.jsxs)(ei.k,{maxW:"300px",overflow:"hidden",className:i,alignItems:"center",textAlign:"left",children:[(0,t.jsx)(O.Z,{name:m,boxSize:"74px",color:a?"error":p,mr:2,borderWidth:"2px",borderRadius:"md",borderColor:(0,w.ff)("blackAlpha.100","whiteAlpha.200"),p:3}),(0,t.jsxs)(Q.xu,{maxW:"calc(100% - 58px - 24px)",children:[(0,t.jsxs)(ei.k,{alignItems:"center",children:[(0,t.jsx)(R.x,{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:a?"error":"initial",children:r.name}),!!a&&(0,t.jsx)(eh.u,{label:a,placement:"top",maxW:"320px",children:(0,t.jsx)(Q.xu,{cursor:"pointer",display:"inherit",onClick:d,ml:1,children:(0,t.jsx)(O.Z,{name:"info",boxSize:5,color:"error"})})}),(0,t.jsx)(et.h,{"aria-label":"remove",icon:(0,t.jsx)(O.Z,{name:"cross",boxSize:6}),boxSize:6,variant:"simple",display:"inline-block",flexShrink:0,ml:"auto",onClick:c,isDisabled:l,alignSelf:"flex-start"})]}),(0,t.jsx)(R.x,{variant:"secondary",mt:1,children:r.size.toLocaleString(void 0,{notation:"compact",maximumFractionDigits:2,unit:"byte",unitDisplay:"narrow",style:"unit"})})]})]})})),ex=o.memo(e=>{var r,i;let{fileTypes:s,multiple:n,required:l,title:d,hint:u,name:m="sources"}=e,{setValue:p,getValues:h,control:v,formState:f,clearErrors:x}=(0,c.Gc)(),g="sources"===m&&"sources"in f.errors?f.errors.sources:"interfaces"===m&&"interfaces"in f.errors?f.errors.interfaces:void 0,b=(null==g?void 0:null===(r=g.type)||void 0===r?void 0:r.startsWith("file_"))?void 0:g,j=(null==g?void 0:null===(i=g.type)||void 0===i?void 0:i.startsWith("file_"))?g:void 0,y=o.useCallback(e=>{if(void 0===e)return;let r=h(m).slice();r.splice(e,1),p(m,r),x(m)},[h,m,p,x]),_=o.useCallback(()=>(0,t.jsxs)("div",{children:[(0,t.jsx)(R.x,{fontWeight:500,color:"text_secondary",mb:3,children:d}),(0,t.jsxs)(a.z,{size:"sm",variant:"outline",children:["Drop file",n?"s":""," or click here"]})]}),[n,d]),C=o.useCallback(e=>{var r;let i=null==j?void 0:null===(r=j.message)||void 0===r?void 0:r.split(";");return(0,t.jsx)(Q.xu,{display:"grid",gridTemplateColumns:{base:"minmax(0, 1fr)",lg:"minmax(0, 1fr) minmax(0, 1fr)"},columnGap:3,rowGap:3,w:"100%",children:e.map((e,r)=>(0,t.jsx)(Q.xu,{children:(0,t.jsx)(ef,{file:e,maxW:"initial",onRemove:y,index:r,isDisabled:f.isSubmitting,error:null==i?void 0:i[r]})},e.name+e.lastModified+r))})},[f.isSubmitting,y,j]),k=o.useCallback(e=>{let{field:r}=e,i=r.value&&r.value.length>0,l=(null==b?void 0:b.type)==="required"?(0,t.jsx)(W,{message:"Field is required"}):(null==b?void 0:b.message)?(0,t.jsx)(W,{message:b.message}):null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(forms_FileInput,{accept:s.join(","),multiple:n,field:r,children:e=>{let{onChange:s}=e;return(0,t.jsx)(ei.k,{flexDir:"column",alignItems:"flex-start",rowGap:2,w:"100%",children:(0,t.jsx)(eu,{onDrop:s,p:{base:3,lg:6},isDisabled:f.isSubmitting,children:i?C(r.value):_()})})}}),l]})},[s,n,b,f.isSubmitting,C,_]),w=o.useCallback(async e=>{if(Array.isArray(e)){let r="Wrong file type. Allowed files types are ".concat(s.join(","),"."),i=e.map(e=>{let{name:i}=e;return s.some(e=>i.endsWith(e))?"":r});if(i.some(e=>""!==e))return i.join(";")}return!0},[s]),z=o.useCallback(async e=>{if(Array.isArray(e)){let r=20*ec.Mb,i=e.map(e=>{let{size:i}=e;return i>r?"File is too big. Maximum size is 20 Mb.":""});if(i.some(e=>""!==e))return i.join(";")}return!0},[]),D=o.useCallback(async e=>!(!n&&Array.isArray(e))||!(e.length>1)||"You can upload only one file",[n]),F=o.useMemo(()=>({required:l,validate:{file_type:w,file_size:z,quantity:D}}),[z,w,D,l]);return(0,t.jsxs)(S,{children:[(0,t.jsx)(c.Qr,{name:m,control:v,render:k,rules:F}),u?(0,t.jsx)("span",{children:u}):null]})});let eg=[".sol",".yul"];var eb=o.memo(()=>(0,t.jsxs)(L,{title:"Contract verification via Solidity (multi-part files)",children:[(0,t.jsx)($,{}),(0,t.jsx)(ee,{}),(0,t.jsx)(ea,{}),(0,t.jsx)(ex,{fileTypes:eg,multiple:!0,required:!0,title:"Sources *.sol or *.yul files",hint:"Upload all Solidity or Yul contract source files."}),(0,t.jsx)(en,{})]}));let ej=/\(([^()]*)\)/;var ey=o.memo(()=>{var e;let[r,i]=o.useState([]),{formState:n,control:l,watch:a}=(0,c.Gc)(),d=(0,C.Z)(),u=a("sources"),m="sources"in n.errors?null===(e=n.errors.sources)||void 0===e?void 0:e.message:void 0;(0,s.r)(()=>{if(!m)return;let e=m.match(ej),r=null==e?void 0:e[1].split(",");if(!Array.isArray(r)||0===r.length)return;let t=r.map((e,r)=>({label:e,value:String(r+1)}));i(t)},[m]),(0,s.r)(()=>{i([])},[u]);let p=o.useCallback(e=>{let{field:i}=e,s="contract_index"in n.errors?n.errors.contract_index:void 0;return(0,t.jsx)(N.Z,{...i,options:r,size:d?"md":"lg",placeholder:"Contract name",isDisabled:n.isSubmitting,error:s,isRequired:!0,isAsync:!1})},[n.errors,n.isSubmitting,d,r]);return 0===r.length?null:(0,t.jsx)(S,{children:(0,t.jsx)(c.Qr,{name:"contract_index",control:l,render:p,rules:{required:!0}})})});let e_=[".json",".sol"];var eC=o.memo(()=>(0,t.jsxs)(L,{title:"Contract verification via Solidity (Sourcify)",children:[(0,t.jsx)(ex,{fileTypes:e_,multiple:!0,required:!0,title:"Sources and Metadata JSON",hint:"Upload all Solidity contract source files and JSON metadata file(s) created during contract compilation."}),(0,t.jsx)(ey,{})]}));let eS=[".json"];var ek=o.memo(e=>{let{config:r}=e;return(0,t.jsxs)(L,{title:"Contract verification via Solidity (standard JSON input) ",children:[!(null==r?void 0:r.is_rust_verifier_microservice_enabled)&&(0,t.jsx)(el,{}),(0,t.jsx)($,{}),(0,t.jsx)(ex,{fileTypes:eS,title:"Standard Input JSON",hint:"Upload the standard input JSON file created during contract compilation.",required:!0}),!(null==r?void 0:r.is_rust_verifier_microservice_enabled)&&(0,t.jsx)(J,{})]})}),ew=o.memo(e=>{let{config:r}=e;return(0,t.jsxs)(L,{title:"Contract verification via Vyper (contract)",children:[(0,t.jsx)(el,{hint:"The contract name is the name assigned to the verified contract in Blockscout."}),(0,t.jsx)($,{isVyper:!0}),(null==r?void 0:r.is_rust_verifier_microservice_enabled)&&(0,t.jsx)(ee,{isVyper:!0}),(0,t.jsx)(H,{isVyper:!0}),!(null==r?void 0:r.is_rust_verifier_microservice_enabled)&&(0,t.jsx)(B,{})]})});let ez=[".vy"],eD=[".vy",".json"];var eF=o.memo(()=>{let e=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Add any "}),(0,t.jsx)(D.r,{href:"https://docs.vyperlang.org/en/stable/interfaces.html",target:"_blank",children:"required interfaces"}),(0,t.jsx)("span",{children:" for the main compiled contract."})]});return(0,t.jsxs)(L,{title:"Contract verification via Vyper (multi-part files)",children:[(0,t.jsx)($,{isVyper:!0}),(0,t.jsx)(ee,{isVyper:!0}),(0,t.jsx)(ex,{name:"sources",fileTypes:ez,title:"Upload main *.vy source",hint:"\n          Primary compiled Vyper contract. \n          Only add the main contract here whose bytecode has been deployed, all other files can be uploaded to the interfaces box below.\n        ",required:!0}),(0,t.jsx)(ex,{name:"interfaces",fileTypes:eD,multiple:!0,title:"Interfaces (.vy or .json)",hint:e})]})});let eI=[".json"];var eA=o.memo(()=>(0,t.jsxs)(L,{title:"Contract verification via Vyper (standard JSON input) ",children:[(0,t.jsx)($,{isVyper:!0}),(0,t.jsx)(ex,{fileTypes:eI,title:"Standard Input JSON",hint:"Upload the standard input JSON file created during contract compilation.",required:!0})]})),eV=o.memo(e=>{let{method:r,config:i,hash:g}=e,b=(0,c.cI)({mode:"onBlur",defaultValues:r?(0,M.O4)(r,i,g):void 0}),{control:j,handleSubmit:y,watch:_,formState:C,setError:S,reset:w,getFieldState:z}=b,D=o.useRef(),F=o.useRef(),I=(0,u.Z)(),A=(0,h.Z)(),V=o.useCallback(async e=>{let r=(0,M.Os)(e);if(!g)try{let r=await I("contract",{pathParams:{hash:e.address.toLowerCase()}}),i="is_verified"in r&&(null==r?void 0:r.is_verified)&&!r.is_partially_verified;if(i)return S("address",{message:"Contract has already been verified"}),Promise.resolve()}catch(r){let e=(0,p.Z)(r);return S("address",{message:404===e?"Address is not a smart contract":"Something went wrong"}),Promise.resolve()}try{await I("contract_verification_via",{pathParams:{method:e.method.value,hash:e.address.toLowerCase()},fetchParams:{method:"POST",body:r}})}catch(e){return}return new Promise(e=>{D.current=e})},[I,g,S]),q=_("address"),T=z("address"),Z=o.useCallback(async e=>{if("error"===e.status){var r;let i=(0,M.rr)(e.errors);i.filter(Boolean).forEach(e=>{let[r,i]=e;return S(r,i)}),await (0,m.Z)(100),null===(r=D.current)||void 0===r||r.call(D,null);return}A({position:"top-right",title:"Success",description:"Contract is successfully verified.",status:"success",variant:"subtle",isClosable:!0}),v.Kz(v.GM.CONTRACT_VERIFICATION,{Status:"Finished",Method:F.current||""},{send_immediately:!0}),window.location.assign((0,d.B)({pathname:"/address/[hash]",query:{hash:q,tab:"contract"}}))},[S,A,q]),N=o.useCallback(()=>{var e;if(!C.isSubmitting)return;null===(e=D.current)||void 0===e||e.call(D,null);let r="socket-error";A.isActive(r)||A({id:r,position:"top-right",title:"Error",description:"There was an error with socket connection. Try again later.",status:"error",variant:"subtle",isClosable:!0})},[A]),O=(0,f.Z)({topic:"addresses:".concat(null==q?void 0:q.toLowerCase()),onSocketClose:N,onSocketError:N,isDisabled:!!(q&&T.error)});(0,x.Z)({channel:O,event:"verification_result",handler:Z});let R=o.useMemo(()=>({"flattened-code":(0,t.jsx)(eo,{config:i}),"standard-input":(0,t.jsx)(ek,{config:i}),sourcify:(0,t.jsx)(eC,{}),"multi-part":(0,t.jsx)(eb,{}),"vyper-code":(0,t.jsx)(ew,{config:i}),"vyper-multi-part":(0,t.jsx)(eF,{}),"vyper-standard-input":(0,t.jsx)(eA,{})}),[i]),L=_("method"),G=R[null==L?void 0:L.value]||null,P=null==L?void 0:L.value;return(0,s.r)(()=>{if(P){w((0,M.O4)(P,i,q||g));let e=M.qL[P];v.Kz(v.GM.CONTRACT_VERIFICATION,{Status:"Method selected",Method:e}),F.current=e}},[P]),(0,t.jsx)(c.RV,{...b,children:(0,t.jsxs)(n.m.form,{noValidate:!0,onSubmit:y(V),children:[(0,t.jsxs)(l.r,{as:"section",columnGap:"30px",rowGap:{base:2,lg:5},templateColumns:{base:"1fr",lg:"minmax(auto, 680px) minmax(0, 340px)"},children:[!g&&(0,t.jsx)(k,{}),(0,t.jsx)(E,{control:j,methods:i.verification_options,isDisabled:C.isSubmitting})]}),G,!!L&&(0,t.jsx)(a.z,{variant:"solid",size:"lg",type:"submit",mt:12,isLoading:C.isSubmitting,loadingText:"Verify & publish",children:"Verify & publish"})]})})})},417:function(e,r,i){i.d(r,{Z:function(){return useFormConfigQuery}});var t=i(36217),s=i(6901);function useFormConfigQuery(e){return(0,t.Z)("contract_verification_config",{queryOptions:{select:e=>({...e,verification_options:e.verification_options.filter(s.is).sort(s.ct)}),enabled:e}})}},6901:function(e,r,i){i.d(r,{O4:function(){return getDefaultValues},Os:function(){return prepareRequestBody},ct:function(){return sortVerificationMethods},is:function(){return isValidVerificationMethod},qL:function(){return s},rr:function(){return formatSocketErrors}});let t=["flattened-code","standard-input","sourcify","multi-part","vyper-code","vyper-multi-part","vyper-standard-input"],s={"flattened-code":"Solidity (Flattened source code)","standard-input":"Solidity (Standard JSON input)",sourcify:"Solidity (Sourcify)","multi-part":"Solidity (Multi-part files)","vyper-code":"Vyper (Contract)","vyper-multi-part":"Vyper (Multi-part files)","vyper-standard-input":"Vyper (Standard JSON input)"},n={"flattened-code":{address:"",method:{value:"flattened-code",label:s["flattened-code"]},is_yul:!1,name:"",compiler:null,evm_version:null,is_optimization_enabled:!0,optimization_runs:"200",code:"",autodetect_constructor_args:!0,constructor_args:"",libraries:[]},"standard-input":{address:"",method:{value:"standard-input",label:s["standard-input"]},name:"",compiler:null,sources:[],autodetect_constructor_args:!0,constructor_args:""},sourcify:{address:"",method:{value:"sourcify",label:s.sourcify},sources:[]},"multi-part":{address:"",method:{value:"multi-part",label:s["multi-part"]},compiler:null,evm_version:null,is_optimization_enabled:!0,optimization_runs:"200",sources:[],libraries:[]},"vyper-code":{address:"",method:{value:"vyper-code",label:s["vyper-code"]},name:"",compiler:null,evm_version:null,code:"",constructor_args:""},"vyper-multi-part":{address:"",method:{value:"vyper-multi-part",label:s["vyper-multi-part"]},compiler:null,evm_version:null,sources:[]},"vyper-standard-input":{address:"",method:{value:"vyper-standard-input",label:s["vyper-standard-input"]},compiler:null,sources:[]}};function getDefaultValues(e,r,i){let t={...n[e],address:i};return"evm_version"in t&&(("flattened-code"===e||"multi-part"===e)&&(t.evm_version=r.solidity_evm_versions.find(e=>"default"===e)?{label:"default",value:"default"}:null),"vyper-multi-part"===e&&(t.evm_version=r.vyper_evm_versions.find(e=>"default"===e)?{label:"default",value:"default"}:null)),r.is_rust_verifier_microservice_enabled&&("flattened-code"===e||"standard-input"===e)&&("name"in t&&(t.name=void 0),"autodetect_constructor_args"in t&&(t.autodetect_constructor_args=!1)),t}function isValidVerificationMethod(e){return!!(e&&t.includes(e))}function sortVerificationMethods(e,r){let i=t.indexOf(e),s=t.indexOf(r);return i>s?1:i<s?-1:0}function prepareRequestBody(e){var r,i,t,s;switch(e.method.value){case"flattened-code":return{compiler_version:null===(r=e.compiler)||void 0===r?void 0:r.value,source_code:e.code,is_optimization_enabled:e.is_optimization_enabled,is_yul_contract:e.is_yul,optimization_runs:e.optimization_runs,contract_name:e.name||void 0,libraries:reduceLibrariesArray(e.libraries),evm_version:null===(i=e.evm_version)||void 0===i?void 0:i.value,autodetect_constructor_args:e.autodetect_constructor_args,constructor_args:e.constructor_args};case"standard-input":{let r=new FormData;return e.compiler&&r.set("compiler_version",e.compiler.value),r.set("contract_name",e.name),r.set("autodetect_constructor_args",String(!!e.autodetect_constructor_args)),r.set("constructor_args",e.constructor_args),addFilesToFormData(r,e.sources,"files"),r}case"sourcify":{let r=new FormData;return addFilesToFormData(r,e.sources,"files"),e.contract_index&&r.set("chosen_contract_index",e.contract_index.value),r}case"multi-part":{let r=new FormData;e.compiler&&r.set("compiler_version",e.compiler.value),e.evm_version&&r.set("evm_version",e.evm_version.value),r.set("is_optimization_enabled",String(!!e.is_optimization_enabled)),e.is_optimization_enabled&&r.set("optimization_runs",e.optimization_runs);let i=reduceLibrariesArray(e.libraries);return i&&r.set("libraries",JSON.stringify(i)),addFilesToFormData(r,e.sources,"files"),r}case"vyper-code":return{compiler_version:null===(t=e.compiler)||void 0===t?void 0:t.value,evm_version:null===(s=e.evm_version)||void 0===s?void 0:s.value,source_code:e.code,contract_name:e.name,constructor_args:e.constructor_args};case"vyper-multi-part":{let r=new FormData;return e.compiler&&r.set("compiler_version",e.compiler.value),e.evm_version&&r.set("evm_version",e.evm_version.value),addFilesToFormData(r,e.sources,"files"),addFilesToFormData(r,e.interfaces,"interfaces"),r}case"vyper-standard-input":{let r=new FormData;return e.compiler&&r.set("compiler_version",e.compiler.value),addFilesToFormData(r,e.sources,"files"),r}default:return{}}}function reduceLibrariesArray(e){if(e&&0!==e.length)return e.reduce((e,r)=>(e[r.name]=r.address,e),{})}function addFilesToFormData(e,r,i){if(r)for(let t=0;t<r.length;t++){let s=r[t];e.set("".concat(i,"[").concat(t,"]"),s,s.name)}}let l={contract_source_code:"code",files:"sources",interfaces:"interfaces",compiler_version:"compiler",constructor_arguments:"constructor_args",name:"name"};function formatSocketErrors(e){return Object.entries(e).map(e=>{let[r,i]=e;if(l[r])return[l[r],{message:i.join(",")}]})}},69029:function(e,r,i){i.d(r,{Z:function(){return CheckboxInput}});var t=i(85893),s=i(15058),n=i(67294);function CheckboxInput(e){let{field:r,text:i,onChange:l,isDisabled:a}=e,o=n.useCallback(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];r.onChange(...i),null==l||l()},[r,l]);return(0,t.jsx)(s.X,{isChecked:r.value,onChange:o,ref:r.ref,colorScheme:"blue",size:"lg",isDisabled:a,children:i})}},19819:function(e,r,i){var t=i(85893),s=i(31507),n=i(56837),l=i(75350);i(67294),r.Z=(0,l.m)(e=>{let{className:r}=e;return(0,t.jsx)(s.b,{status:"warning",width:"fit-content",className:r,children:(0,t.jsx)(n.X,{children:"Something went wrong. Try refreshing the page or come back later."})})})},24584:function(e,r,i){i.d(r,{Z:function(){return u}});var t=i(85893),s=i(34629),n=i(12498),l=i(70654),a=i(3563),o=i(22568),c=i(67294);let getChakraStyles=e=>{let r="dark"===e?"gray.700":"gray.100",i="dark"===e?"gray.600":"gray.300";return{control:(e,t)=>({...e,borderColor:t.hasValue?i:r}),inputContainer:e=>({...e,py:0,mx:0}),valueContainer:(e,r)=>({...e,...function(e){switch(e){case"sm":case"md":return{paddingLeft:4};case"lg":return{paddingLeft:6};default:return{}}}(r.selectProps.size),py:0}),singleValue:(e,r)=>({...e,mx:0,transform:"none",...function(e){switch(e){case"sm":case"md":return{top:"26px"};case"lg":return{top:"38px"};default:return{}}}(r.selectProps.size)})}};var d=i(14072),u=c.memo(c.forwardRef((e,r)=>{let i=(0,s.dQ)("zIndices","dropdown"),{colorMode:u}=(0,n.If)(),m=c.useMemo(()=>({menuPortal:e=>({...e,zIndex:i})}),[i]),p=c.useMemo(()=>getChakraStyles(u),[u]),h=e.isAsync?a.Z:o.Z;return(0,t.jsxs)(l.NI,{variant:"floating",size:e.size||"md",isRequired:e.isRequired,ref:r,...e.error?{"aria-invalid":!0}:{},...e.isDisabled?{"aria-disabled":!0}:{},...e.value?{"data-active":!0}:{},children:[(0,t.jsx)(h,{...e,size:e.size||"md",menuPortalTarget:window.document.body,placeholder:"",styles:m,chakraStyles:p,isInvalid:!!e.error,useBasicStyles:!0}),(0,t.jsx)(d.Z,{text:"string"==typeof e.placeholder?e.placeholder:"",icon:e.placeholderIcon,error:e.error,isFancy:!0})]})}))},14072:function(e,r,i){var t=i(85893),s=i(96177),n=i(75350);i(67294),r.Z=(0,n.m)(e=>{let{text:r,icon:i,error:l,className:a,isFancy:o,isInModal:c}=e,d=null==l?void 0:l.message;return d||(null==l?void 0:l.type)!=="pattern"||(d="Invalid format"),(0,t.jsxs)(s.l,{className:a,alignItems:"center",...o?{"data-fancy":!0}:{},...c?{"data-in-modal":!0}:{},children:[i,(0,t.jsx)(n.m.span,{children:r}),d&&(0,t.jsxs)(n.m.span,{order:3,whiteSpace:"pre",children:[" - ",d]})]})})}}]);
//# sourceMappingURL=8735-a64387636a33913e.js.map