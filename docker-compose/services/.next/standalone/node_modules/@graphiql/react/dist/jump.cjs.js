"use strict";var c=Object.defineProperty;var u=(e,n)=>c(e,"name",{value:n,configurable:!0});var s=require("./codemirror.cjs.js"),d=require("./SchemaReference.cjs.js");require("./index.cjs.js");require("react");require("graphql");require("react-dom");require("./introspection.cjs.js");require("./forEachState.cjs.js");s.CodeMirror.defineOption("jump",!1,(e,n,o)=>{if(o&&o!==s.CodeMirror.Init){const t=e.state.jump.onMouseOver;s.CodeMirror.off(e.getWrapperElement(),"mouseover",t);const i=e.state.jump.onMouseOut;s.CodeMirror.off(e.getWrapperElement(),"mouseout",i),s.CodeMirror.off(document,"keydown",e.state.jump.onKeyDown),delete e.state.jump}if(n){const t=e.state.jump={options:n,onMouseOver:j.bind(null,e),onMouseOut:m.bind(null,e),onKeyDown:M.bind(null,e)};s.CodeMirror.on(e.getWrapperElement(),"mouseover",t.onMouseOver),s.CodeMirror.on(e.getWrapperElement(),"mouseout",t.onMouseOut),s.CodeMirror.on(document,"keydown",t.onKeyDown)}});function j(e,n){const o=n.target||n.srcElement;if(!(o instanceof HTMLElement)||(o==null?void 0:o.nodeName)!=="SPAN")return;const t=o.getBoundingClientRect(),i={left:(t.left+t.right)/2,top:(t.top+t.bottom)/2};e.state.jump.cursor=i,e.state.jump.isHoldingModifier&&f(e)}u(j,"onMouseOver");function m(e){if(!e.state.jump.isHoldingModifier&&e.state.jump.cursor){e.state.jump.cursor=null;return}e.state.jump.isHoldingModifier&&e.state.jump.marker&&p(e)}u(m,"onMouseOut");function M(e,n){if(e.state.jump.isHoldingModifier||!k(n.key))return;e.state.jump.isHoldingModifier=!0,e.state.jump.cursor&&f(e);const o=u(r=>{r.code===n.code&&(e.state.jump.isHoldingModifier=!1,e.state.jump.marker&&p(e),s.CodeMirror.off(document,"keyup",o),s.CodeMirror.off(document,"click",t),e.off("mousedown",i))},"onKeyUp"),t=u(r=>{const a=e.state.jump.destination;a&&e.state.jump.options.onClick(a,r)},"onClick"),i=u((r,a)=>{e.state.jump.destination&&(a.codemirrorIgnore=!0)},"onMouseDown");s.CodeMirror.on(document,"keyup",o),s.CodeMirror.on(document,"click",t),e.on("mousedown",i)}u(M,"onKeyDown");const g=typeof navigator!="undefined"&&navigator&&navigator.appVersion.indexOf("Mac")!==-1;function k(e){return e===(g?"Meta":"Control")}u(k,"isJumpModifier");function f(e){if(e.state.jump.marker)return;const n=e.state.jump.cursor,o=e.coordsChar(n),t=e.getTokenAt(o,!0),i=e.state.jump.options,r=i.getDestination||e.getHelper(o,"jump");if(r){const a=r(t,i,e);if(a){const l=e.markText({line:o.line,ch:t.start},{line:o.line,ch:t.end},{className:"CodeMirror-jump-token"});e.state.jump.marker=l,e.state.jump.destination=a}}}u(f,"enableJumpMode");function p(e){const n=e.state.jump.marker;e.state.jump.marker=null,e.state.jump.destination=null,n.clear()}u(p,"disableJumpMode");s.CodeMirror.registerHelper("jump","graphql",(e,n)=>{if(!n.schema||!n.onClick||!e.state)return;const o=e.state,t=o.kind,i=o.step,r=d.getTypeInfo(n.schema,o);if(t==="Field"&&i===0&&r.fieldDef||t==="AliasedField"&&i===2&&r.fieldDef)return d.getFieldReference(r);if(t==="Directive"&&i===1&&r.directiveDef)return d.getDirectiveReference(r);if(t==="Argument"&&i===0&&r.argDef)return d.getArgumentReference(r);if(t==="EnumValue"&&r.enumValue)return d.getEnumValueReference(r);if(t==="NamedType"&&r.type)return d.getTypeReference(r)});
